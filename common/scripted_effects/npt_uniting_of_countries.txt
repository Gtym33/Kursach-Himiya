#
# Main part of uniting counries script
#


# Use it with:
# event_target:INTEGRATING_COUNTRY_MAJOR - first integraited country. Gives ruling party to unided country.
# event_target:INTEGRATING_COUNTRY_MINOR - second integraited country. Don't gives ruling party to unided country.
# event_target:UNITED_COUNTRY - unided country. Annexs two other countries.
#
# In one-counrty-tag-change-script use event_target:INTEGRATING_COUNTRY_MAJOR and event_target:INTEGRATING_COUNTRY_MINOR for tag-changing-counrty and event_target:UNITED_COUNTRY for unided country.
#
# Don't forgen clean event targets.

# Use party_populatiry_addition_script_1 or party_populatiry_addition_script_1_reverse in event before using THE_GREAT_TWO_COUNTRIES_INTERGRATION_SCRIPT or THE_GREAT_ONE_COUNTRY_CHANGE_TAG_SCRIPT

THE_GREAT_TWO_COUNTRIES_INTERGRATION_SCRIPT = {
		
		event_target:UNITED_COUNTRY = {
			inherit_technology = event_target:INTEGRATING_COUNTRY_MAJOR
		}
		
		event_target:INTEGRATING_COUNTRY_MAJOR = {
			every_unit_leader = { set_nationality = event_target:UNITED_COUNTRY }
			#event_target:UNITED_COUNTRY = { transfer_technology = yes }
			set_variable = {
				var = curnet_stability
				value = has_stability
			}
			set_variable = {
				var = curnet_war_support
				value = has_war_support
			}
		}
		event_target:INTEGRATING_COUNTRY_MINOR = {
			every_unit_leader = { set_nationality = event_target:UNITED_COUNTRY }
			#event_target:UNITED_COUNTRY = { transfer_technology = yes }
			set_variable = {
				var = curnet_stability
				value = has_stability
			}
			set_variable = {
				var = curnet_war_support
				value = has_war_support
			}
		}
		every_country = {
			limit = {
				OR = {
					has_offensive_war_with = event_target:INTEGRATING_COUNTRY_MINOR
					has_offensive_war_with = event_target:INTEGRATING_COUNTRY_MAJOR
				}
			}
			declare_war_on = {
				target = event_target:UNITED_COUNTRY
				type = annex_everything
			}
		}
		every_country = {
			limit = {
				OR = {
					has_defensive_war_with = event_target:INTEGRATING_COUNTRY_MINOR
					has_defensive_war_with = event_target:INTEGRATING_COUNTRY_MAJOR
				}
				NOT = { has_war_with = event_target:UNITED_COUNTRY }
			}
			event_target:UNITED_COUNTRY = {
				declare_war_on = {
					target = PREV
					type = annex_everything
				}
			}
		}
		every_country = {
			limit = {
				OR = {
					is_guaranteed_by = event_target:INTEGRATING_COUNTRY_MINOR
					is_guaranteed_by = event_target:INTEGRATING_COUNTRY_MAJOR
				}
				NOT = { has_war_with = event_target:UNITED_COUNTRY }
			}
			event_target:UNITED_COUNTRY = { give_guarantee = PREV }
		}
		every_country = {
			limit = {
				OR = {
					has_military_access_to = event_target:INTEGRATING_COUNTRY_MINOR
					has_military_access_to = event_target:INTEGRATING_COUNTRY_MAJOR
				}
				NOT = { has_war_with = event_target:UNITED_COUNTRY }
			}
			event_target:UNITED_COUNTRY = { give_military_access = PREV }
		}
		every_country = {
			limit = {
				OR = {
					gives_military_access_to = event_target:INTEGRATING_COUNTRY_MINOR
					gives_military_access_to = event_target:INTEGRATING_COUNTRY_MAJOR
				}
				NOT = { has_war_with = event_target:UNITED_COUNTRY }
			}
			give_military_access = event_target:UNITED_COUNTRY
		}
		every_country = {
			limit = {
				OR = {
					has_non_aggression_pact_with = event_target:INTEGRATING_COUNTRY_MINOR
					has_non_aggression_pact_with = event_target:INTEGRATING_COUNTRY_MAJOR
				}
				NOT = { has_war_with = event_target:UNITED_COUNTRY }
			}
			diplomatic_relation = {
				country = event_target:INTEGRATING_COUNTRY_MINOR
				relation = non_aggression_pact
				active = no
			}
			diplomatic_relation = {
				country = event_target:INTEGRATING_COUNTRY_MAJOR
				relation = non_aggression_pact
				active = no
			}
			diplomatic_relation = {
				country = event_target:UNITED_COUNTRY
				relation = non_aggression_pact
				active = yes
			}
		}
		if = {
			limit = { event_target:INTEGRATING_COUNTRY_MAJOR = { is_subject = yes } }
			event_target:INTEGRATING_COUNTRY_MAJOR = {
				OVERLORD = {
					if = {
						limit = { event_target:INTEGRATING_COUNTRY_MAJOR = { compare_autonomy_state < autonomy_colony } }
						end_puppet = event_target:INTEGRATING_COUNTRY_MAJOR
						set_autonomy = { target = event_target:UNITED_COUNTRY autonomy_state = autonomy_colony }
					}
					else_if = {
						limit = { event_target:INTEGRATING_COUNTRY_MAJOR = { compare_autonomy_state < autonomy_dominion } }
						end_puppet = event_target:INTEGRATING_COUNTRY_MAJOR
						set_autonomy = { target = event_target:UNITED_COUNTRY autonomy_state = autonomy_dominion }
					}
					else_if = {
						limit = { event_target:INTEGRATING_COUNTRY_MAJOR = { compare_autonomy_state < autonomy_integrated_puppet } }
						end_puppet = event_target:INTEGRATING_COUNTRY_MAJOR
						set_autonomy = { target = event_target:UNITED_COUNTRY autonomy_state = autonomy_integrated_puppet }
					}
					else_if = {
						limit = { event_target:INTEGRATING_COUNTRY_MAJOR = { compare_autonomy_state < autonomy_puppet } }
						end_puppet = event_target:INTEGRATING_COUNTRY_MAJOR
						set_autonomy = { target = event_target:UNITED_COUNTRY autonomy_state = autonomy_puppet }
					}
					else_if = {
						limit = { event_target:INTEGRATING_COUNTRY_MAJOR = { compare_autonomy_state < autonomy_reichskommissariat } }
						end_puppet = event_target:INTEGRATING_COUNTRY_MAJOR
						set_autonomy = { target = event_target:UNITED_COUNTRY autonomy_state = autonomy_reichskommissariat }
					}
					else_if = {
						limit = { event_target:INTEGRATING_COUNTRY_MAJOR = { compare_autonomy_state < autonomy_reichsprotectorate } }
						end_puppet = event_target:INTEGRATING_COUNTRY_MAJOR
						set_autonomy = { target = event_target:UNITED_COUNTRY autonomy_state = autonomy_reichsprotectorate }
					}
					else_if = {
						limit = { event_target:INTEGRATING_COUNTRY_MAJOR = { compare_autonomy_state < autonomy_satellite } }
						end_puppet = event_target:INTEGRATING_COUNTRY_MAJOR
						set_autonomy = { target = event_target:UNITED_COUNTRY autonomy_state = autonomy_satellite }
					}
					else_if = {
						limit = { event_target:INTEGRATING_COUNTRY_MAJOR = { compare_autonomy_state < autonomy_wtt_imperial_associate } }
						end_puppet = event_target:INTEGRATING_COUNTRY_MAJOR
						set_autonomy = { target = event_target:UNITED_COUNTRY autonomy_state = autonomy_wtt_imperial_associate }
					}
					else_if = {
						limit = { event_target:INTEGRATING_COUNTRY_MAJOR = { compare_autonomy_state < autonomy_wtt_imperial_protectorate } }
						end_puppet = event_target:INTEGRATING_COUNTRY_MAJOR
						set_autonomy = { target = event_target:UNITED_COUNTRY autonomy_state = autonomy_wtt_imperial_protectorate }
					}
					else_if = {
						limit = { event_target:INTEGRATING_COUNTRY_MAJOR = { compare_autonomy_state < autonomy_wtt_imperial_subject } }
						end_puppet = event_target:INTEGRATING_COUNTRY_MAJOR
						set_autonomy = { target = event_target:UNITED_COUNTRY autonomy_state = autonomy_wtt_imperial_subject }
					}
					else_if = {
						limit = { event_target:INTEGRATING_COUNTRY_MAJOR = { compare_autonomy_state < autonomy_military_gov } }
						end_puppet = event_target:INTEGRATING_COUNTRY_MAJOR
						set_autonomy = { target = event_target:UNITED_COUNTRY autonomy_state = autonomy_military_gov }
					}
				}
			}
		}
		event_target:UNITED_COUNTRY = {
			every_country = {
				limit = {
					OR = {
						is_subject_of = event_target:INTEGRATING_COUNTRY_MINOR
						is_subject_of = event_target:INTEGRATING_COUNTRY_MAJOR
					}
				}
				subject_owner_change_script_check_ideology_and_transfer_parties = yes
			}
		}
		event_target:UNITED_COUNTRY = {
			annex_country = {
				target = event_target:INTEGRATING_COUNTRY_MAJOR
				transfer_troops = yes
			}
			annex_country = {
				target = event_target:INTEGRATING_COUNTRY_MINOR
				transfer_troops = yes
			}
			set_variable = {
				var = curnet_stability
				value = event_target:INTEGRATING_COUNTRY_MAJOR.curnet_stability
			}
			set_variable = {
				var = curnet_war_support
				value = event_target:INTEGRATING_COUNTRY_MAJOR.curnet_war_support
			}
			add_to_variable = {
				var = curnet_stability
				value = event_target:INTEGRATING_COUNTRY_MINOR.curnet_stability
			}
			add_to_variable = {
				var = curnet_war_support
				value = event_target:INTEGRATING_COUNTRY_MINOR.curnet_war_support
			}
			multiply_variable = {
				var = curnet_stability
				value = 0.45
			}
			multiply_variable = {
				var = curnet_war_support
				value = 0.5
			}
			set_temp_variable = { global.threat = temp_threat }
			multiply_temp_variable = { temp_threat = 0.6 }
			add_to_temp_variable { temp_threat = 0.1 }
			
			subtract_from_variable = {
				var = curnet_war_support
				value = temp_threat
			}
			set_stability = var:curnet_stability
			set_war_support = var:curnet_war_support
			
			party_populatiry_addition_script_clear = yes
			
			if = {
				limit = { event_target:INTEGRATING_COUNTRY_MAJOR = { is_ai = no } }
				change_tag_from = event_target:INTEGRATING_COUNTRY_MAJOR
				else = {
					change_tag_from = event_target:INTEGRATING_COUNTRY_MINOR
				}
			}
		}
		every_state = {
			limit = { OR = { is_core_of = event_target:INTEGRATING_COUNTRY_MAJOR is_core_of = event_target:INTEGRATING_COUNTRY_MINOR } }
			add_core_of = event_target:UNITED_COUNTRY
		}
		
	event_target:UNITED_COUNTRY = {
		hidden_effect = {
			every_country = {
				limit = {
					is_in_array = {
						array = unrecognized_states
						value = event_target:INTEGRATING_COUNTRY_MAJOR.id
					}
					is_in_array = {
						array = unrecognized_states
						value = event_target:INTEGRATING_COUNTRY_MINOR.id
					}
				}
				add_opinion_modifier = { target = PREV modifier = unrecognized_state_embargo }
				add_opinion_modifier = { target = PREV modifier = unrecognized_state_rel }
				reverse_add_opinion_modifier = { target = PREV modifier = unrecognized_state_embargo_to_initiator }
				reverse_add_opinion_modifier = { target = PREV modifier = unrecognized_state_rel_to_initiator }
				add_to_array = { unrecognized_states = PREV.id }
				add_ai_strategy = {
					type = befriend
					id = PREV
					value = -50
				}
				PREV = {
					add_ai_strategy = {
						type = befriend
						id = PREV
						value = -50
					}
				}
			}
		}
	}
}
THE_GREAT_ONE_COUNTRY_CHANGE_TAG_SCRIPT = {
### For this just set MAJOR and MINOR event_target to one tag
}

party_populatiry_addition_script_PREV = {
	hidden_effect = {
			multiply_variable = {
				var = radical_socialism_party
				value = 100
			}
			multiply_variable = {
				var = communism_party
				value = 100
			}
			multiply_variable = {
				var = social_democracy_party
				value = 100
			}
			multiply_variable = {
				var = social_liberalism_party
				value = 100
			}
			multiply_variable = {
				var = market_liberalism_party
				value = 100
			}
			multiply_variable = {
				var = social_conservatism_party
				value = 100
			}
			multiply_variable = {
				var = authoritarism_party
				value = 100
			}
			multiply_variable = {
				var = despotism_party
				value = 100
			}
			multiply_variable = {
				var = fascism_party
				value = 100
			}
			multiply_variable = {
				var = national_syndicalism_party
				value = 100
			}
			set_popularities = {
					radical_socialism = var:radical_socialism_party
					communism = var:communism_party
					social_democracy = var:social_democracy_party
					social_liberalism = var:social_liberalism_party
					market_liberalism = var:market_liberalism_party
					social_conservatism = var:social_conservatism_party
					authoritarism = var:authoritarism_party
					despotism = var:despotism_party
					fascism = var:fascism_party
					national_syndicalism = var:national_syndicalism_party
			}
	}
}
set_ruling_party_for_uniting_country_script = {
		event_target:UNITED_COUNTRY = {
			if = {
				limit = { event_target:INTEGRATING_COUNTRY_MAJOR = { has_government = radical_socialism } }
				set_politics = { ruling_party = radical_socialism }
			}
			else_if = {
				limit = { event_target:INTEGRATING_COUNTRY_MAJOR = { has_government = communism } }
				set_politics = { ruling_party = communism }
			}
			else_if = {
				limit = { event_target:INTEGRATING_COUNTRY_MAJOR = { has_government = social_democracy } }
				set_politics = { ruling_party = social_democracy }
			}
			else_if = {
				limit = { event_target:INTEGRATING_COUNTRY_MAJOR = { has_government = social_liberalism } }
				set_politics = { ruling_party = social_liberalism }
			}
			else_if = {
				limit = { event_target:INTEGRATING_COUNTRY_MAJOR = { has_government = market_liberalism } }
				set_politics = { ruling_party = market_liberalism }
			}
			else_if = {
				limit = { event_target:INTEGRATING_COUNTRY_MAJOR = { has_government = social_conservatism } }
				set_politics = { ruling_party = social_conservatism }
			}
			else_if = {
				limit = { event_target:INTEGRATING_COUNTRY_MAJOR = { has_government = authoritarism } }
				set_politics = { ruling_party = authoritarism }
			}
			else_if = {
				limit = { event_target:INTEGRATING_COUNTRY_MAJOR = { has_government = despotism } }
				set_politics = { ruling_party = despotism }
			}
			else_if = {
				limit = { event_target:INTEGRATING_COUNTRY_MAJOR = { has_government = fascism } }
				set_politics = { ruling_party = fascism }
			}
			else_if = {
				limit = { event_target:INTEGRATING_COUNTRY_MAJOR = { has_government = national_syndicalism } }
				set_politics = { ruling_party = national_syndicalism }
			}
		}
}
set_ruling_party_for_uniting_country_script_reverse = {
		event_target:UNITED_COUNTRY = {
			if = {
				limit = { event_target:INTEGRATING_COUNTRY_MINOR = { has_government = radical_socialism } }
				set_politics = { ruling_party = radical_socialism }
			}
			else_if = {
				limit = { event_target:INTEGRATING_COUNTRY_MINOR = { has_government = communism } }
				set_politics = { ruling_party = communism }
			}
			else_if = {
				limit = { event_target:INTEGRATING_COUNTRY_MINOR = { has_government = social_democracy } }
				set_politics = { ruling_party = social_democracy }
			}
			else_if = {
				limit = { event_target:INTEGRATING_COUNTRY_MINOR = { has_government = social_liberalism } }
				set_politics = { ruling_party = social_liberalism }
			}
			else_if = {
				limit = { event_target:INTEGRATING_COUNTRY_MINOR = { has_government = market_liberalism } }
				set_politics = { ruling_party = market_liberalism }
			}
			else_if = {
				limit = { event_target:INTEGRATING_COUNTRY_MINOR = { has_government = social_conservatism } }
				set_politics = { ruling_party = social_conservatism }
			}
			else_if = {
				limit = { event_target:INTEGRATING_COUNTRY_MINOR = { has_government = authoritarism } }
				set_politics = { ruling_party = authoritarism }
			}
			else_if = {
				limit = { event_target:INTEGRATING_COUNTRY_MINOR = { has_government = despotism } }
				set_politics = { ruling_party = despotism }
			}
			else_if = {
				limit = { event_target:INTEGRATING_COUNTRY_MINOR = { has_government = fascism } }
				set_politics = { ruling_party = fascism }
			}
			else_if = {
				limit = { event_target:INTEGRATING_COUNTRY_MINOR = { has_government = national_syndicalism } }
				set_politics = { ruling_party = national_syndicalism }
			}
		}
}
party_populatiry_addition_script_1 = {
		event_target:UNITED_COUNTRY = {
			set_variable = {
				var = radical_socialism_party
				value = event_target:INTEGRATING_COUNTRY_MAJOR.party_popularity@radical_socialism
			}
			set_variable = {
				var = communism_party
				value = event_target:INTEGRATING_COUNTRY_MAJOR.party_popularity@communism
			}
			set_variable = {
				var = social_democracy_party
				value = event_target:INTEGRATING_COUNTRY_MAJOR.party_popularity@social_democracy
			}
			set_variable = {
				var = social_liberalism_party
				value = event_target:INTEGRATING_COUNTRY_MAJOR.party_popularity@social_liberalism
			}
			set_variable = {
				var = market_liberalism_party
				value = event_target:INTEGRATING_COUNTRY_MAJOR.party_popularity@market_liberalism
			}
			set_variable = {
				var = social_conservatism_party
				value = event_target:INTEGRATING_COUNTRY_MAJOR.party_popularity@social_conservatism
			}
			set_variable = {
				var = authoritarism_party
				value = event_target:INTEGRATING_COUNTRY_MAJOR.party_popularity@authoritarism
			}
			set_variable = {
				var = despotism_party
				value = event_target:INTEGRATING_COUNTRY_MAJOR.party_popularity@despotism
			}
			set_variable = {
				var = fascism_party
				value = event_target:INTEGRATING_COUNTRY_MAJOR.party_popularity@fascism
			}
			set_variable = {
				var = national_syndicalism_party
				value = event_target:INTEGRATING_COUNTRY_MAJOR.party_popularity@national_syndicalism
			}
			add_to_variable = {
				var = radical_socialism_party
				value = event_target:INTEGRATING_COUNTRY_MINOR.party_popularity@radical_socialism
			}
			add_to_variable = {
				var = communism_party
				value = event_target:INTEGRATING_COUNTRY_MINOR.party_popularity@communism
			}
			add_to_variable = {
				var = social_democracy_party
				value = event_target:INTEGRATING_COUNTRY_MINOR.party_popularity@social_democracy
			}
			add_to_variable = {
				var = social_liberalism_party
				value = event_target:INTEGRATING_COUNTRY_MINOR.party_popularity@social_liberalism
			}
			add_to_variable = {
				var = market_liberalism_party
				value = event_target:INTEGRATING_COUNTRY_MINOR.party_popularity@market_liberalism
			}
			add_to_variable = {
				var = social_conservatism_party
				value = event_target:INTEGRATING_COUNTRY_MINOR.party_popularity@social_conservatism
			}
			add_to_variable = {
				var = authoritarism_party
				value = event_target:INTEGRATING_COUNTRY_MINOR.party_popularity@authoritarism
			}
			add_to_variable = {
				var = despotism_party
				value = event_target:INTEGRATING_COUNTRY_MINOR.party_popularity@despotism
			}
			add_to_variable = {
				var = fascism_party
				value = event_target:INTEGRATING_COUNTRY_MINOR.party_popularity@fascism
			}
			add_to_variable = {
				var = national_syndicalism_party
				value = event_target:INTEGRATING_COUNTRY_MINOR.party_popularity@national_syndicalism
			}
			multiply_variable = {
				var = radical_socialism_party
				value = 50
			}
			multiply_variable = {
				var = communism_party
				value = 50
			}
			multiply_variable = {
				var = social_democracy_party
				value = 50
			}
			multiply_variable = {
				var = social_liberalism_party
				value = 50
			}
			multiply_variable = {
				var = market_liberalism_party
				value = 50
			}
			multiply_variable = {
				var = social_conservatism_party
				value = 50
			}
			multiply_variable = {
				var = authoritarism_party
				value = 50
			}
			multiply_variable = {
				var = despotism_party
				value = 50
			}
			multiply_variable = {
				var = fascism_party
				value = 50
			}
			multiply_variable = {
				var = national_syndicalism_party
				value = 50
			}
			
			set_temp_variable = { tot_party_pop_amount = radical_socialism_party }
			add_to_temp_variable = { tot_party_pop_amount = communism_party }
			add_to_temp_variable = { tot_party_pop_amount = social_democracy_party }
			add_to_temp_variable = { tot_party_pop_amount = social_liberalism_party }
			add_to_temp_variable = { tot_party_pop_amount = market_liberalism_party }
			add_to_temp_variable = { tot_party_pop_amount = social_conservatism_party }
			add_to_temp_variable = { tot_party_pop_amount = authoritarism_party }
			add_to_temp_variable = { tot_party_pop_amount = despotism_party }
			add_to_temp_variable = { tot_party_pop_amount = fascism_party }
			add_to_temp_variable = { tot_party_pop_amount = national_syndicalism_party }
			set_temp_variable = { calculation_infelicity = 100 }
			subtract_from_temp_variable = { calculation_infelicity = tot_party_pop_amount }
			
			if = {
				limit = { has_government = radical_socialism }
				add_to_variable = { radical_socialism_party = calculation_infelicity }
			}
			else_if = {
				limit = { has_government = communism }
				add_to_variable = { communism_party = calculation_infelicity }
			}
			else_if = {
				limit = { has_government = social_democracy }
				add_to_variable = { social_democracy_party = calculation_infelicity }
			}
			else_if = {
				limit = { has_government = social_liberalism }
				add_to_variable = { social_liberalism_party = calculation_infelicity }
			}
			else_if = {
				limit = { has_government = market_liberalism }
				add_to_variable = { market_liberalism_party = calculation_infelicity }
			}
			else_if = {
				limit = { has_government = social_conservatism }
				add_to_variable = { social_conservatism_party = calculation_infelicity }
			}
			else_if = {
				limit = { has_government = authoritarism }
				add_to_variable = { authoritarism_party = calculation_infelicity }
			}
			else_if = {
				limit = { has_government = despotism }
				add_to_variable = { despotism_party = calculation_infelicity }
			}
			else_if = {
				limit = { has_government = fascism }
				add_to_variable = { fascism_party = calculation_infelicity }
			}
			else_if = {
				limit = { has_government = national_syndicalism }
				add_to_variable = { national_syndicalism_party = calculation_infelicity }
			}
			
			set_popularities = {
					radical_socialism = var:radical_socialism_party
					communism = var:communism_party
					social_democracy = var:social_democracy_party
					social_liberalism = var:social_liberalism_party
					market_liberalism = var:market_liberalism_party
					social_conservatism = var:social_conservatism_party
					authoritarism = var:authoritarism_party
					despotism = var:despotism_party
					fascism = var:fascism_party
					national_syndicalism = var:national_syndicalism_party
			}
		}
}

party_populatiry_addition_script_clear = {
		clear_variable = event_target:UNITED_COUNTRY.first_radical_socialism_party
		clear_variable = event_target:UNITED_COUNTRY.first_communism_party
		clear_variable = event_target:UNITED_COUNTRY.first_social_democracy_party
		clear_variable = event_target:UNITED_COUNTRY.first_social_liberalism_party
		clear_variable = event_target:UNITED_COUNTRY.first_market_liberalism_party
		clear_variable = event_target:UNITED_COUNTRY.first_social_conservatism_party
		clear_variable = event_target:UNITED_COUNTRY.first_authoritarism_party
		clear_variable = event_target:UNITED_COUNTRY.first_despotism_party
		clear_variable = event_target:UNITED_COUNTRY.first_fascism_party
		clear_variable = event_target:UNITED_COUNTRY.first_national_syndicalism_party
		clear_variable = event_target:UNITED_COUNTRY.second_radical_socialism_party
		clear_variable = event_target:UNITED_COUNTRY.second_communism_party
		clear_variable = event_target:UNITED_COUNTRY.second_social_democracy_party
		clear_variable = event_target:UNITED_COUNTRY.second_social_liberalism_party
		clear_variable = event_target:UNITED_COUNTRY.second_market_liberalism_party
		clear_variable = event_target:UNITED_COUNTRY.second_social_conservatism_party
		clear_variable = event_target:UNITED_COUNTRY.second_authoritarism_party
		clear_variable = event_target:UNITED_COUNTRY.second_despotism_party
		clear_variable = event_target:UNITED_COUNTRY.second_fascism_party
		clear_variable = event_target:UNITED_COUNTRY.second_national_syndicalism_party
}

subject_owner_change_script_check_ideology_and_transfer_parties = {
		set_variable = {
			var = radical_socialism_party
			value = party_popularity@radical_socialism
		}
		set_variable = {
			var = communism_party
			value = party_popularity@communism
		}
		set_variable = {
			var = social_democracy_party
			value = party_popularity@social_democracy
		}
		set_variable = {
			var = social_liberalism_party
			value = party_popularity@social_liberalism
		}
		set_variable = {
			var = market_liberalism_party
			value = party_popularity@market_liberalism
		}
		set_variable = {
			var = social_conservatism_party
			value = party_popularity@social_conservatism
		}
		set_variable = {
			var = authoritarism_party
			value = party_popularity@authoritarism
		}
		set_variable = {
			var = despotism_party
			value = party_popularity@despotism
		}
		set_variable = {
			var = fascism_party
			value = party_popularity@fascism
		}
		set_variable = {
			var = national_syndicalism_party
			value = party_popularity@national_syndicalism
		}
		
		if = {
			limit = { has_government = radical_socialism }
			subject_owner_change_script = yes
			set_politics = { ruling_party = radical_socialism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = communism }
			subject_owner_change_script = yes
			set_politics = { ruling_party = communism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = social_democracy }
			subject_owner_change_script = yes
			set_politics = { ruling_party = social_democracy }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = social_liberalism }
			subject_owner_change_script = yes
			set_politics = { ruling_party = social_liberalism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = market_liberalism }
			subject_owner_change_script = yes
			set_politics = { ruling_party = market_liberalism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = social_conservatism }
			subject_owner_change_script = yes
			set_politics = { ruling_party = social_conservatism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = authoritarism }
			subject_owner_change_script = yes
			set_politics = { ruling_party = authoritarism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = despotism }
			subject_owner_change_script = yes
			set_politics = { ruling_party = despotism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = fascism }
			subject_owner_change_script = yes
			set_politics = { ruling_party = fascism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = fascism }
			subject_owner_change_script = yes
			set_politics = { ruling_party = fascism }
			party_populatiry_addition_script_PREV = yes
		}
}

subject_owner_change_script = {
		if = {
			limit = { has_autonomy_state = autonomy_satellite }
			event_target:UNITED_COUNTRY = {
				puppet = PREV
				set_autonomy = { target = PREV autonomy_state = autonomy_satellite }
			}
		}
		if = {
			limit = { has_autonomy_state = autonomy_satellite }
			OVERLORD = { end_puppet = PREV }
			event_target:UNITED_COUNTRY = {
				puppet = PREV
				set_autonomy = { target = PREV autonomy_state = autonomy_satellite }
			}
		}
		if = {
			limit = {
				has_autonomy_state = autonomy_dominion
			}
			OVERLORD = { end_puppet = PREV }
			event_target:UNITED_COUNTRY = {
				puppet = PREV
				set_autonomy = { target = PREV autonomy_state = autonomy_dominion }
			}
		}
		if = {
			limit = {
				has_autonomy_state = autonomy_wtt_imperial_subject
			}
			OVERLORD = { end_puppet = PREV }
			event_target:UNITED_COUNTRY = {
				puppet = PREV
				set_autonomy = { target = PREV autonomy_state = autonomy_wtt_imperial_subject }
			}
		}
		if = {
			limit = {
				has_autonomy_state = autonomy_wtt_imperial_associate
			}
			OVERLORD = { end_puppet = PREV }
			event_target:UNITED_COUNTRY = {
				puppet = PREV
				set_autonomy = { target = PREV autonomy_state = autonomy_wtt_imperial_associate }
			}
		}
		if = {
			limit = {
				has_autonomy_state = autonomy_colony
			}
			OVERLORD = { end_puppet = PREV }
			event_target:UNITED_COUNTRY = {
				puppet = PREV
				set_autonomy = { target = PREV autonomy_state = autonomy_colony }
			}
		}
		if = {
			limit = {
				has_autonomy_state = autonomy_reichsprotectorate
			}
			OVERLORD = { end_puppet = PREV }
			event_target:UNITED_COUNTRY = {
				puppet = PREV
				set_autonomy = { target = PREV autonomy_state = autonomy_reichsprotectorate }
			}
		}
		if = {
			limit = {
				has_autonomy_state = autonomy_puppet
			}
			OVERLORD = { end_puppet = PREV }
			event_target:UNITED_COUNTRY = {
				puppet = PREV
				set_autonomy = { target = PREV autonomy_state = autonomy_puppet }
			}
		}
		if = {
			limit = {
				has_autonomy_state = autonomy_reichskommissariat
			}
			OVERLORD = { end_puppet = PREV }
			event_target:UNITED_COUNTRY = {
				puppet = PREV
				set_autonomy = { target = PREV autonomy_state = autonomy_reichskommissariat }
			}
		}
		if = {
			limit = {
				has_autonomy_state = autonomy_integrated_puppet
			}
			OVERLORD = { end_puppet = PREV }
			event_target:UNITED_COUNTRY = {
				puppet = PREV
				set_autonomy = { target = PREV autonomy_state = autonomy_integrated_puppet }
			}
		}
		if = {
			limit = {
				has_autonomy_state = autonomy_wtt_imperial_protectorate
			}
			OVERLORD = { end_puppet = PREV }
			event_target:UNITED_COUNTRY = {
				puppet = PREV
				set_autonomy = { target = PREV autonomy_state = autonomy_wtt_imperial_protectorate }
			}
		}
		if = {
			limit = {
				has_autonomy_state = autonomy_military_gov
			}
			OVERLORD = { end_puppet = PREV }
			event_target:UNITED_COUNTRY = {
				puppet = PREV
				set_autonomy = { target = PREV autonomy_state = autonomy_military_gov }
			}
		}
}

subjecting_script_with_transfer_parties = {
		set_variable = {
			var = radical_socialism_party
			value = party_popularity@radical_socialism
		}
		set_variable = {
			var = communism_party
			value = party_popularity@communism
		}
		set_variable = {
			var = social_democracy_party
			value = party_popularity@social_democracy
		}
		set_variable = {
			var = social_liberalism_party
			value = party_popularity@social_liberalism
		}
		set_variable = {
			var = market_liberalism_party
			value = party_popularity@market_liberalism
		}
		set_variable = {
			var = social_conservatism_party
			value = party_popularity@social_conservatism
		}
		set_variable = {
			var = authoritarism_party
			value = party_popularity@authoritarism
		}
		set_variable = {
			var = despotism_party
			value = party_popularity@despotism
		}
		set_variable = {
			var = fascism_party
			value = party_popularity@fascism
		}
		set_variable = {
			var = national_syndicalism_party
			value = party_popularity@national_syndicalism
		}
		
		if = {
			limit = { has_government = radical_socialism }
			PREV =  { puppet = PREV }
			set_politics = { ruling_party = radical_socialism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = communism }
			PREV =  { puppet = PREV }
			set_politics = { ruling_party = communism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = social_democracy }
			PREV =  { puppet = PREV }
			set_politics = { ruling_party = social_democracy }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = social_liberalism }
			PREV =  { puppet = PREV }
			set_politics = { ruling_party = social_liberalism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = market_liberalism }
			PREV =  { puppet = PREV }
			set_politics = { ruling_party = market_liberalism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = social_conservatism }
			PREV =  { puppet = PREV }
			set_politics = { ruling_party = social_conservatism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = authoritarism }
			PREV =  { puppet = PREV }
			set_politics = { ruling_party = authoritarism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = despotism }
			PREV =  { puppet = PREV }
			set_politics = { ruling_party = despotism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = fascism }
			PREV =  { puppet = PREV }
			set_politics = { ruling_party = fascism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = fascism }
			PREV =  { puppet = PREV }
			set_politics = { ruling_party = fascism }
			party_populatiry_addition_script_PREV = yes
		}
}

subjecting_script_with_transfer_parties_dominion = {
		set_variable = {
			var = radical_socialism_party
			value = party_popularity@radical_socialism
		}
		set_variable = {
			var = communism_party
			value = party_popularity@communism
		}
		set_variable = {
			var = social_democracy_party
			value = party_popularity@social_democracy
		}
		set_variable = {
			var = social_liberalism_party
			value = party_popularity@social_liberalism
		}
		set_variable = {
			var = market_liberalism_party
			value = party_popularity@market_liberalism
		}
		set_variable = {
			var = social_conservatism_party
			value = party_popularity@social_conservatism
		}
		set_variable = {
			var = authoritarism_party
			value = party_popularity@authoritarism
		}
		set_variable = {
			var = despotism_party
			value = party_popularity@despotism
		}
		set_variable = {
			var = fascism_party
			value = party_popularity@fascism
		}
		set_variable = {
			var = national_syndicalism_party
			value = party_popularity@national_syndicalism
		}
		
		if = {
			limit = { has_government = radical_socialism }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_dominion
				}
			}
			set_politics = { ruling_party = radical_socialism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = communism }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_dominion
				}
			}
			set_politics = { ruling_party = communism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = social_democracy }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_dominion
				}
			}
			set_politics = { ruling_party = social_democracy }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = social_liberalism }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_dominion
				}
			}
			set_politics = { ruling_party = social_liberalism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = market_liberalism }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_dominion
				}
			}
			set_politics = { ruling_party = market_liberalism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = social_conservatism }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_dominion
				}
			}
			set_politics = { ruling_party = social_conservatism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = authoritarism }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_dominion
				}
			}
			set_politics = { ruling_party = authoritarism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = despotism }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_dominion
				}
			}
			set_politics = { ruling_party = despotism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = fascism }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_dominion
				}
			}
			set_politics = { ruling_party = fascism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = fascism }
			PREV = {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_dominion
				}
			}
			set_politics = { ruling_party = fascism }
			party_populatiry_addition_script_PREV = yes
		}
}

subjecting_script_with_transfer_parties_colony = {
		set_variable = {
			var = radical_socialism_party
			value = party_popularity@radical_socialism
		}
		set_variable = {
			var = communism_party
			value = party_popularity@communism
		}
		set_variable = {
			var = social_democracy_party
			value = party_popularity@social_democracy
		}
		set_variable = {
			var = social_liberalism_party
			value = party_popularity@social_liberalism
		}
		set_variable = {
			var = market_liberalism_party
			value = party_popularity@market_liberalism
		}
		set_variable = {
			var = social_conservatism_party
			value = party_popularity@social_conservatism
		}
		set_variable = {
			var = authoritarism_party
			value = party_popularity@authoritarism
		}
		set_variable = {
			var = despotism_party
			value = party_popularity@despotism
		}
		set_variable = {
			var = fascism_party
			value = party_popularity@fascism
		}
		set_variable = {
			var = national_syndicalism_party
			value = party_popularity@national_syndicalism
		}
		
		if = {
			limit = { has_government = radical_socialism }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_colony
				}
			}
			set_politics = { ruling_party = radical_socialism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = communism }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_colony
				}
			}
			set_politics = { ruling_party = communism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = social_democracy }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_colony
				}
			}
			set_politics = { ruling_party = social_democracy }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = social_liberalism }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_colony
				}
			}
			set_politics = { ruling_party = social_liberalism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = market_liberalism }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_colony
				}
			}
			set_politics = { ruling_party = market_liberalism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = social_conservatism }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_colony
				}
			}
			set_politics = { ruling_party = social_conservatism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = authoritarism }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_colony
				}
			}
			set_politics = { ruling_party = authoritarism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = despotism }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_colony
				}
			}
			set_politics = { ruling_party = despotism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = fascism }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_colony
				}
			}
			set_politics = { ruling_party = fascism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = fascism }
			PREV = {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_colony
				}
			}
			set_politics = { ruling_party = fascism }
			party_populatiry_addition_script_PREV = yes
		}
}

subjecting_script_with_transfer_parties_integrated_puppet = {
		set_variable = {
			var = radical_socialism_party
			value = party_popularity@radical_socialism
		}
		set_variable = {
			var = communism_party
			value = party_popularity@communism
		}
		set_variable = {
			var = social_democracy_party
			value = party_popularity@social_democracy
		}
		set_variable = {
			var = social_liberalism_party
			value = party_popularity@social_liberalism
		}
		set_variable = {
			var = market_liberalism_party
			value = party_popularity@market_liberalism
		}
		set_variable = {
			var = social_conservatism_party
			value = party_popularity@social_conservatism
		}
		set_variable = {
			var = authoritarism_party
			value = party_popularity@authoritarism
		}
		set_variable = {
			var = despotism_party
			value = party_popularity@despotism
		}
		set_variable = {
			var = fascism_party
			value = party_popularity@fascism
		}
		set_variable = {
			var = national_syndicalism_party
			value = party_popularity@national_syndicalism
		}
		
		if = {
			limit = { has_government = radical_socialism }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_integrated_puppet
				}
			}
			set_politics = { ruling_party = radical_socialism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = communism }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_integrated_puppet
				}
			}
			set_politics = { ruling_party = communism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = social_democracy }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_integrated_puppet
				}
			}
			set_politics = { ruling_party = social_democracy }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = social_liberalism }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_integrated_puppet
				}
			}
			set_politics = { ruling_party = social_liberalism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = market_liberalism }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_integrated_puppet
				}
			}
			set_politics = { ruling_party = market_liberalism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = social_conservatism }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_integrated_puppet
				}
			}
			set_politics = { ruling_party = social_conservatism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = authoritarism }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_integrated_puppet
				}
			}
			set_politics = { ruling_party = authoritarism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = despotism }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_integrated_puppet
				}
			}
			set_politics = { ruling_party = despotism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = fascism }
			PREV =  {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_integrated_puppet
				}
			}
			set_politics = { ruling_party = fascism }
			party_populatiry_addition_script_PREV = yes
		}
		if = {
			limit = { has_government = fascism }
			PREV = {
				puppet = PREV
				set_autonomy = {
					target = PREV
					autonomy_state = autonomy_integrated_puppet
				}
			}
			set_politics = { ruling_party = fascism }
			party_populatiry_addition_script_PREV = yes
		}
}