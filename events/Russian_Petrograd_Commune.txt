###########################
# Events Petrograd Commune
###########################

add_namespace = petrograd_commune

# Сверхрасширение
country_event = {
	id = petrograd_commune.-1
	title = petrograd_commune.-1.t
	desc = petrograd_commune.-1.desc
	picture = GFX_report_event_sov_cities_fights
	
	trigger = {
		tag = KRN
		num_of_controlled_states > 12
		NOT = { has_idea = decentralization_of_government }
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	fire_only_once = yes
	
	option = {
		name = petrograd_commune.-1.a
		remove_ideas = KRN_revolution_under_siege
		add_ideas = KRN_administrative_overload_1
	}
}

# Отношение к войне
country_event = {
	id = petrograd_commune.0
	title = petrograd_commune.0.t
	desc = petrograd_commune.0.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	trigger = {
		RUS = { has_war_with = GER }
	}
	
	immediate = {
		hidden_effect = {
			every_country = {
					limit = {
						NOT = {
							tag = ROOT
							has_government = communism
							has_government = radical_socialism
							has_government = social_democracy
							has_war_with = ROOT
							is_in_faction_with = ROOT
						}
					}
					set_THIS_country_non_recognize_PREV = yes
				}
		}
	}
	
	option = {
		name = petrograd_commune.0.a
		add_popularity = {
			ideology = radical_socialism
			popularity = 0.05
		}
		add_popularity = {
			ideology = communism
			popularity = 0.05
		}
		add_stability = -0.05
		add_war_support = -0.15
		GER = {
			declare_war_on = {
				target = ROOT
				type = annex_everything
			}
		}
	}
	option = {
		name = petrograd_commune.0.b
		add_stability = 0.05
		add_war_support = 0.05
	}
}

# Выборы в Петросовет
country_event = {
	id = petrograd_commune.1
	title = petrograd_commune.1.t
	desc = petrograd_commune.1.desc
	picture = GFX_report_event_rus_kornilov_government

	is_triggered_only = yes
	
	option = {
		name = petrograd_commune.1.a
		ai_chance = { factor = 50 }
		set_politics = {
			ruling_party = social_liberalism
			elections_allowed = no
		}
		country_event = petrograd_commune.29
	}
	option = {
		name = petrograd_commune.1.b
		ai_chance = { factor = 40 }
		set_politics = {
			ruling_party = social_democracy
			elections_allowed = no
		}
		country_event = petrograd_commune.29
	}
	option = {
		name = petrograd_commune.1.c
		ai_chance = { factor = 10 }
		set_politics = {
			ruling_party = communism
			elections_allowed = no
		}
		country_event = petrograd_commune.30
	}
}

# Восстания по всей стране
country_event = {
	id = petrograd_commune.2
	title = petrograd_commune.2.t
	desc = petrograd_commune.2.desc
	picture = GFX_report_event_rus_kornilov_government
	
	trigger = { KRN = { exists = yes } NOT = { has_government = radical_socialism has_government = communism has_government = social_democracy has_government = social_liberalism } }
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			KRN = {
				division_template = {
					name = "Krasnaya Gvardiya"
					regiments = {
						militia = { x = 0 y = 0 }
						militia = { x = 0 y = 1 }
						militia = { x = 1 y = 0 }
					}
					priority = 0
					is_locked = yes
				}
			}
		}
	}
	
	option = {
		name = petrograd_commune.2.a
		hidden_effect = {
			if = { limit = { has_country_flag = new_temp_capital capital_scope = { state = 219 } } }
			set_country_flag = fall_of_Moscow_by_revolt
			KRN = { country_event = { id = petrograd_commune.103 hours = 4 } }
		}
		hidden_effect = {
			KRN = {
				set_province_controller = 6380
				set_province_controller = 3303
				set_province_controller = 117
			}
		}
		every_state = {
			limit = {
				OR = {
					state = 219
					state = 252
					state = 263
				}
			}
			if = {
				limit = {
					is_owned_by = RUS
				}
				create_unit = {
					division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
					owner = KRN
				}
				create_unit = {
					division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
					owner = KRN
				}
				create_unit = {
					division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
					owner = KRN
				}
			}
		}
		RUS = {
			if = {
				limit = { has_completed_focus = RUS_purification_of_imperial_army }
				add_timed_idea = { idea = disorganization_of_army_commune_civil_war days = 14 }
			}
			else = {
				add_timed_idea = { idea = disorganization_of_army_commune_civil_war days = 28 }
			}
			remove_one_priziv_from_army = yes
			set_province_controller = 6380
		}
		hidden_effect = { KRN = { country_event = petrograd_commune.3 } }
		hidden_effect = { if = { limit = { NOT = { has_country_flag = fall_of_Moscow_by_revolt } } country_event = { id = petrograd_commune.4 days = 5 } set_country_flag = pcf_1 } }
	}
}

# Восстания по всей стране, оповещение для Коммуны
country_event = {
	id = petrograd_commune.3
	title = petrograd_commune.3.t
	desc = petrograd_commune.3.desc
	picture = GFX_report_event_rus_kornilov_government

	is_triggered_only = yes
	option = {
		name = petrograd_commune.3.a
	}
}

country_event = {
	id = petrograd_commune.4
	
	hidden = yes
	
	trigger = {
		KRN = { exists = yes }
	}
	
	is_triggered_only = yes
	
	option = {
		if = {
			limit = { has_country_flag = pcf_1 }
			hidden_effect = {
				KRN = {
					set_province_controller = 3477
				}
			}
			every_state = {
				limit = {
					state = 239
				}
				if = {
					limit = {
						is_owned_by = RUS
					}
					create_unit = {
						division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
						owner = KRN
					}
					create_unit = {
						division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
						owner = KRN
					}
					create_unit = {
						division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
						owner = KRN
					}
				}
			}
			clr_country_flag = pcf_1
			set_country_flag = pcf_2
			hidden_effect = { country_event = { id = petrograd_commune.4 days = 3 } }
		}
		else_if = {
			limit = { has_country_flag = pcf_2 }
			hidden_effect = {
				KRN = {
					set_province_controller = 9556
					set_province_controller = 547
				}
			}
			every_state = {
				limit = {
					OR = {
						state = 221
						state = 958
					}
				}
				if = {
					limit = {
						is_owned_by = RUS
					}
					create_unit = {
						division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
						owner = KRN
					}
					create_unit = {
						division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
						owner = KRN
					}
					create_unit = {
						division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
						owner = KRN
					}
				}
			}
			clr_country_flag = pcf_2
			set_country_flag = pcf_3
			hidden_effect = { country_event = { id = petrograd_commune.4 days = 3 } }
		}
		else_if = {
			limit = { has_country_flag = pcf_3 }
			hidden_effect = {
				KRN = {
					set_province_controller = 3527
				}
			}
			every_state = {
				limit = {
					state = 260
				}
				if = {
					limit = {
						is_owned_by = RUS
					}
					create_unit = {
						division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
						owner = KRN
					}
					create_unit = {
						division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
						owner = KRN
					}
					create_unit = {
						division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
						owner = KRN
					}
				}
			}
			clr_country_flag = pcf_3
			set_country_flag = pcf_4
			hidden_effect = { country_event = { id = petrograd_commune.4 days = 3 } }
		}
		else_if = {
			limit = { has_country_flag = pcf_4 }
			hidden_effect = {
				KRN = {
					set_province_controller = 13311
					set_province_controller = 9461
				}
			}
			every_state = {
				limit = {
					OR = {
						state = 227
						state = 918
					}
				}
				if = {
					limit = {
						is_owned_by = RUS
					}
					create_unit = {
						division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
						owner = KRN
					}
					create_unit = {
						division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
						owner = KRN
					}
					create_unit = {
						division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
						owner = KRN
					}
				}
			}
			clr_country_flag = pcf_4
			set_country_flag = pcf_5
			hidden_effect = { country_event = { id = petrograd_commune.4 days = 3 } }
		}
		else_if = {
			limit = { has_country_flag = pcf_5 }
			hidden_effect = {
				KRN = {
					set_province_controller = 525
				}
			}
			every_state = {
				limit = {
					state = 202
				}
				if = {
					limit = {
						is_owned_by = RUS
					}
					create_unit = {
						division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
						owner = KRN
					}
					create_unit = {
						division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
						owner = KRN
					}
					create_unit = {
						division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
						owner = KRN
					}
				}
			}
			clr_country_flag = pcf_5
			set_country_flag = pcf_6
			hidden_effect = { country_event = { id = petrograd_commune.4 days = 3 } }
		}
		else_if = {
			limit = { has_country_flag = pcf_6 }
			hidden_effect = {
				KRN = {
					set_province_controller = 11541
				}
			}
			every_state = {
				limit = {
					state = 1367
				}
				if = {
					limit = {
						is_owned_by = RUS
					}
					create_unit = {
						division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
						owner = KRN
					}
					create_unit = {
						division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
						owner = KRN
					}
					create_unit = {
						division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
						owner = KRN
					}
				}
			}
			clr_country_flag = pcf_6
		}
	}
}

#Вопрос балтийского флота
country_event = {
	id = petrograd_commune.5
	title = petrograd_commune.5.t
	desc = petrograd_commune.5.desc
	picture = GFX_report_event_sov_demobilisation
	
	trigger = {
		has_country_leader = { name = "Pavel Dybenko" ruling_only = no }
	}

	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = petrograd_commune.5.a
		add_popularity = {
			ideology = national_syndicalism
			popularity = 0.05
		}
		add_popularity = {
			ideology = radical_socialism
			popularity = -0.05
		}
		add_stability = 0.05
		hidden_effect = { country_event = { id = petrograd_commune.6 days = 7 } }
		ai_chance = { factor = 1 }
	}
	option = {
		name = petrograd_commune.5.b
		add_popularity = {
			ideology = radical_socialism
			popularity = 0.05
		}
		add_popularity = {
			ideology = national_syndicalism
			popularity = -0.05
		}
		add_war_support = 0.05
		hidden_effect = { country_event = { id = petrograd_commune.6 days = 7 } }
		ai_chance = { factor = 1 }
	}
	option = {
		name = petrograd_commune.5.c
		add_popularity = { ideology = ROOT popularity = 0.05 }
		hidden_effect = { country_event = { id = petrograd_commune.6 days = 7 } }
		ai_chance = { factor = 1 }
	}
}

#Дыбенко меняет профессию
country_event = {
	id = petrograd_commune.6
	title = petrograd_commune.6.t
	desc = petrograd_commune.6.desc
	picture = GFX_report_event_rus_krondshtat_uprising

	is_triggered_only = yes
	
	trigger = {
		check_variable = { party_popularity@radical_socialism > party_popularity@national_syndicalism }
	}
	
	option = {
		name = petrograd_commune.6.a
		retire_ideology_leader = national_syndicalism
		if = {
			limit = { has_idea = KRN_savinkovtsy }
			create_country_leader = { name = "Boris Savinkov" desc = RUS_Boris_Savinkov_DESC picture = "gfx/leaders/RUS/Portrait_Boris_Savinkov.dds" ideology = national_syndicalism_ideology traits = { leader_of_dark_circles ideological_crusader political_activist political_dancer min_4_prince_of_terror eser_terrorist } }
		}
		set_country_flag = KRN_Dybenko_is_radsoc
		create_country_leader = {
			name = "Pavel Dybenko"
			desc = SOV_Pavel_Dybenko_DESC
			picture = "gfx/leaders/SOV/Portrait_Pavel_Dybenko_leader.dds"
			ideology = anarchist_communism
			traits = { batska }
		}
	}
}

#Вторая волна революции
country_event = {
	id = petrograd_commune.7
	title = petrograd_commune.7.t
	desc = petrograd_commune.7.desc
	picture = GFX_report_event_sov_cities_fights
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = petrograd_commune.7.a
		set_politics = { ruling_party = market_liberalism }
		add_popularity = {
			ideology = market_liberalism
			popularity = 0.05
		}
		add_stability = 0.05
		hidden_effect = { country_event = { id = petrograd_commune.68 days = 80 } }
	}
	option = {
		name = petrograd_commune.7.b
		add_stability = -0.05
		add_popularity = {
			ideology = radical_socialism
			popularity = 0.05
		}
		add_popularity = {
			ideology = communism
			popularity = 0.05
		}
		add_popularity = {
			ideology = national_syndicalism
			popularity = 0.05
		}
		#hidden_effect = {
			#random_list = {
				#50 = {
					#country_event = petrograd_commune.8
					#country_event = petrograd_commune.9
				#}
				#50 = {}
			#}
		#}
		set_country_flag = KRN_revolution_continues
	}
	option = {
		name = petrograd_commune.7.c
		trigger = { always = no }
		if = {
			limit = {}
			effect_tooltip = {
				set_politics = { ruling_party = radical_socialism }
				add_popularity = {
					ideology = radical_socialism
					popularity = 0.05
				}
			}
			hidden_effect = { country_event = petrograd_commune.69 }
		}
		else = {
			set_politics = { ruling_party = radical_socialism }
			add_popularity = {
				ideology = radical_socialism
				popularity = 0.05
			}
		}
	}
}

country_event = {
	id = petrograd_commune.8
	title = petrograd_commune.8.t
	desc = petrograd_commune.8.desc
	picture = GFX_report_event_rus_bronevik
	
	is_triggered_only = yes
	
	#trigger = {
		#tag = KRN
		#NOT = { has_government = communism }
		#communism > 0.25
	#}
	
	#mean_time_to_happen = {
		#days = 1
	#}
	
	fire_only_once = yes
	
	option = {
		name = petrograd_commune.8.a
		ai_chance = { factor = 33.3 }
		set_politics = {
			ruling_party = communism
			elections_allowed = no
		}
		add_stability = 0.05
		set_country_flag = dont_rise_party_pop_in_two_party_sys_law
		add_ideas = two_party_system_law
		remove_ideas = RUS_red_guards
		if = {
			limit = { NOT = { is_neighbor_of = GER } }
			every_country = {
				limit = { OR = { is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = TUR AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } OR = { is_faction_leader = yes tag = AUH } }
				ROOT = { white_peace = PREV }
			}
		}
	}
	option = {
		name = petrograd_commune.8.b
		add_popularity = {
			ideology = communism
			popularity = -0.1
		}
		add_popularity = {
			ideology = national_syndicalism
			popularity = 0.1
		}
		remove_ideas = RUS_red_guards
		ai_chance = { factor = 1 }
	}
}
country_event = {
	id = petrograd_commune.9
	title = petrograd_commune.9.t
	desc = petrograd_commune.9.desc
	picture = GFX_report_event_rus_krondshtat_marine
	
	is_triggered_only = yes
	
	#trigger = {
		#tag = KRN
		#NOT = { has_government = national_syndicalism }
		#national_syndicalism > 0.2
	#}
	
	#mean_time_to_happen = {
		#days = 1
	#}
	
	fire_only_once = yes
	
	option = {
		name = petrograd_commune.9.a
		ai_chance = { factor = 1 }
		set_politics = {
			ruling_party = national_syndicalism
			elections_allowed = no
		}
		add_popularity = {
			ideology = national_syndicalism
			popularity = 0.05
		}
	}
	option = {
		trigger = { NOT = { has_idea = RUS_red_guards } }
		name = petrograd_commune.9.b
		add_popularity = {
			ideology = national_syndicalism
			popularity = -0.15
		}
		add_ideas = RUS_red_guards
		ai_chance = { factor = 1 }
	}
	option = {
		name = petrograd_commune.9.c
		add_popularity = {
			ideology = national_syndicalism
			popularity = -0.15
		}
		add_timed_idea = { idea = mutiny_2 days = 7 }
		ai_chance = { factor = 1 }
	}
}

# Интро, большевики
country_event = {
	id = petrograd_commune.10
	title = petrograd_commune.10.t
	desc = petrograd_commune.10.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = petrograd_commune.10.a
		hidden_effect = { country_event = { id = petrograd_commune.11 days = 1 } }
		add_war_support = 0.05
		capital_scope = {
			create_unit = {
				division = "name = \"Petrogradskaya krasnaya gvardiya\" division_template = \"Petrogradskaya krasnaya gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
				owner = KRN
			}
		}
	}
}

# Интро, демократы
country_event = {
	id = petrograd_commune.11
	title = petrograd_commune.11.t
	desc = petrograd_commune.11.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = petrograd_commune.11.a
		hidden_effect = { country_event = { id = petrograd_commune.16 days = 1 } }
		add_stability = 0.05
	}
}

#Как нам обустроить армию?
country_event = {
	id = petrograd_commune.12
	title = petrograd_commune.12.t
	desc = petrograd_commune.12.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			remove_ideas = decentralization_of_army
		}
	}
	
	option = {
		name = petrograd_commune.12.a
		add_political_power = -50
		add_command_power = 200
		add_war_support = 0.03
		add_ideas = RGR_punitive_forces_idea
		add_popularity = {
			ideology = national_syndicalism
			popularity = 0.03
		}
		ai_chance = { factor = 1 }
	}
	option = {
		name = petrograd_commune.12.b
		add_political_power = -25
		add_ideas = RUS_military_commissars_idea
		if = {
			limit = { has_idea = KRN_Dybenko_vs_Kirpichnikov }
			remove_ideas = KRN_Dybenko_vs_Kirpichnikov
			add_ideas = KRN_regular_officer
		}
		add_popularity = {
			ideology = communism
			popularity = 0.03
		}
		ai_chance = { factor = 1 }
	}
	option = {
		name = petrograd_commune.12.c
		add_political_power = 50
		add_ideas = RGR_supply_bonus
		add_popularity = {
			ideology = radical_socialism
			popularity = 0.03
		}
		ai_chance = { factor = 1 }
	}
}

#К звёздам
country_event = {
	id = petrograd_commune.14
	title = petrograd_commune.14.t
	desc = petrograd_commune.14.desc
	picture = GFX_report_event_001

	is_triggered_only = yes
	
	option = {
		name = petrograd_commune.14.a
		add_ideas = soviet_republic_gov_form
		add_ideas = local_assembly_decisions_b_law
		add_ideas = ideological_expansion_law
		add_war_support = 0.1
		ai_chance = { factor = 1 }
	}
	option = {
		name = petrograd_commune.14.b
		add_political_power = 300
		add_war_support = 0.05
		ai_chance = { factor = 1 }
	}
}
#Через тернии
country_event = {
	id = petrograd_commune.15
	title = petrograd_commune.15.t
	desc = petrograd_commune.15.desc
	picture = GFX_report_event_001

	is_triggered_only = yes
	
	option = {
		name = petrograd_commune.15.a
		add_stability = 0.05
		add_ideas = federal_gov_terr
		add_ideas = allow_one_party_law
		ai_chance = { factor = 1 }
	}
	option = {
		name = petrograd_commune.15.b
		add_ideas = presidential_republic_gov_form
		add_ideas = allow_one_party_law
		ai_chance = { factor = 1 }
	}
	option = {
		name = petrograd_commune.15.c
		add_ideas = military_dictatorship_gov_form
		add_ideas = decrees_of_ruler_b_law
		ai_chance = { factor = 1 }
	}
}

# Интро, Кирпичников
country_event = {
	id = petrograd_commune.16
	title = petrograd_commune.16.t
	desc = petrograd_commune.16.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = petrograd_commune.16.a
		hidden_effect = { country_event = { id = petrograd_commune.17 days = 1 } }
		add_war_support = 0.05
		division_template = {
			name = "Gvardeyskaya Pekhotnaya Diviziya"		# Elite
			regiments = {
				infantry = { x = 0 y = 0 }
				infantry = { x = 0 y = 1 }
				infantry = { x = 0 y = 2 }
				infantry = { x = 1 y = 0 }
				infantry = { x = 1 y = 1 }
				infantry = { x = 1 y = 2 }
				infantry = { x = 2 y = 0 }
				artillery_brigade = { x = 2 y = 1 }
				artillery_brigade = { x = 2 y = 2 }
			}
			support = {
				recon = { x = 0 y = 0 }
				engineer = { x = 0 y = 1 }
				field_hospital = { x = 0 y = 2 }
				artillery = { x = 0 y = 3 }
			}
			is_locked = yes
			priority = 2
		}
		capital_scope = {
			create_unit = {
				division = "name = \"Petrogradskaya rezervnaya garnizonnaya diviziya\" division_template = \"Gvardeyskaya Pekhotnaya Diviziya\" start_experience_factor = 0.3 start_equipment_factor = 1"
				owner = KRN
			}
		}
	}
}

# Интро, Дыбенко
country_event = {
	id = petrograd_commune.17
	title = petrograd_commune.17.t
	desc = petrograd_commune.17.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = petrograd_commune.17.a
		hidden_effect = { country_event = { id = petrograd_commune.18 days = 1 } }
		add_war_support = 0.05
		capital_scope = {
			create_unit = {
				division = "name = \"Morskaya pekhota\" division_template = \"Morskaya pekhota\" start_experience_factor = 0.3 start_equipment_factor = 1"
				owner = KRN
			}
			create_unit = {
				division = "name = \"Morskaya pekhota\" division_template = \"Morskaya pekhota\" start_experience_factor = 0.3 start_equipment_factor = 1"
				owner = KRN
			}
			create_unit = {
				division = "name = \"Morskaya pekhota\" division_template = \"Morskaya pekhota\" start_experience_factor = 0.3 start_equipment_factor = 1"
				owner = KRN
			}
		}
	}
}

# Интро, Савинков
country_event = {
	id = petrograd_commune.18
	title = petrograd_commune.18.t
	desc = petrograd_commune.18.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = petrograd_commune.18.a
		hidden_effect = { country_event = { id = petrograd_commune.19 days = 1 } }
		add_war_support = 0.05	
		division_template = {
			name = "Letuchiy otryad"		# Cavalry
			regiments = {
				cavalry = { x = 0 y = 0 }
				cavalry = { x = 0 y = 1 }
			}
			support = {
				recon = { x = 0 y = 0 }
			}
		}
		capital_scope = {
			create_unit = {
				division = "name = \"Letuchiy otryad\" division_template = \"Letuchiy otryad\" start_experience_factor = 0.3 start_equipment_factor = 1"
				owner = KRN
			}
			create_unit = {
				division = "name = \"Letuchiy otryad\" division_template = \"Letuchiy otryad\" start_experience_factor = 0.3 start_equipment_factor = 1"
				owner = KRN
			}
			create_unit = {
				division = "name = \"Letuchiy otryad\" division_template = \"Letuchiy otryad\" start_experience_factor = 0.3 start_equipment_factor = 1"
				owner = KRN
			}
		}
	}
}

# Интро, Кирилловцы
country_event = {
	id = petrograd_commune.19
	title = petrograd_commune.19.t
	desc = petrograd_commune.19.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = petrograd_commune.19.a
		hidden_effect = { country_event = { id = petrograd_commune.27 days = 1 } }
		add_stability = 0.05
		capital_scope = {
			create_unit = {
				division = "name = \"Petrogradskaya rezervnaya garnizonnaya diviziya\" division_template = \"Garnizonnaya Diviziya\" start_experience_factor = 0.3 start_equipment_factor = 1"
				owner = KRN
			}
		}
	}
}

#Взятие Хельсинки за коммуну до фокуса
country_event = {
	id = petrograd_commune.20
	title = petrograd_commune.20.t
	desc = petrograd_commune.20.desc
	picture = GFX_report_event_cimmerman_telegramm
	
	trigger = {
		tag = KRN
		has_global_flag = RUS_monarchy_Petrograd_commune_civil_war
		NOT = { has_global_flag = RUS_civil_war_over }
		has_war_with = FIN
		FIN = { is_subject_of = RUS }
		controls_state = 111
	}
	
	fire_only_once = yes

	mean_time_to_happen = {
		days = 0
	}
	
	option = {
		name = petrograd_commune.20.a
		add_war_support = 0.05
		complete_national_focus	= KRN_support_finnish_seim
	}
}

# Красные в Финляндии поддерживают революцию, поэтому мы поставим военную диктатуру (Россия)
country_event = {
	id = petrograd_commune.21
	title = petrograd_commune.21.t
	desc = petrograd_commune.21.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	trigger = {
		tag = RUS
	}
	
	option = {
		name = petrograd_commune.21.a
		ai_chance = { factor = 0 }
		FIN = {
			add_ideas = {
				military_dictatorship_gov_form
				allow_one_party_law
				decrees_of_ruler_b_law
			}
			add_autonomy_ratio = {
				value = -0.2
				localization = FIN_commune_support
			}
			hidden_effect = {
				country_event = {
					id = petrograd_commune.22
					days = 1
				}
				country_event = {
					id = petrograd_commune.23
					days = 1
				}
			}
		}
	}
	option = {
		name = petrograd_commune.21.b
		ai_chance = { factor = 1 }
		FIN = {
			set_politics = {
				ruling_party = despotism
				elections_allowed = no
			}
			add_popularity = {
				ideology = authoritarism
				popularity = -1
			}
			add_popularity = {
				ideology = despotism
				popularity = 0.35
			}
			add_ideas = {
				military_dictatorship_gov_form
				allow_one_party_law
				decrees_of_ruler_b_law
			}
			add_autonomy_ratio = {
				value = 0.15
				localization = FIN_generals
			}
			add_political_power = 120
			load_oob = FIN_suojeluskunta
			hidden_effect = {
				country_event = {
					id = petrograd_commune.22
					days = 1
				}
				country_event = {
					id = petrograd_commune.23
					days = 1
				}
			}
			if = {
				limit = { NOT = { any_unit_leader = { has_id = 31001 } } }
				create_field_marshal = { name = "Carl Mannerheim" id = 31001 portrait_path = "gfx/leaders/FIN/Portrait_Carl_Mannerheim.dds" traits = { media_personality harsh_leader war_hero cavalry_officer } skill = 5 attack_skill = 5 defense_skill = 4 planning_skill = 5 logistics_skill = 4 }
			}
		}
	}
}

# Гражданская война в Финляндии
country_event = {
	id = petrograd_commune.22
	title = petrograd_commune.22.t
	desc = petrograd_commune.22.desc
	picture = GFX_report_event_fin_start_civilwar

	is_triggered_only = yes
	
	trigger = {
		tag = FIN
		country_exists = KRN
	}
	
	immediate = {
		hidden_effect = {
			set_political_party = {
				ideology = social_democracy
				popularity = 0
			}
			set_political_party = {
				ideology = communism
				popularity = 0
			}
			set_political_party = {
				ideology = social_conservatism
				popularity = 40
			}
			set_capital = { state = 149 }
			clr_country_flag = political_social_democrats_in_socialist_coalition
			
			clr_global_flag = FIN_civil_war_end
			set_global_flag = FIN_civil_war_begin
			create_dynamic_country = {
				original_tag = FIN
				set_temp_variable = { red_FIN = this }
				ROOT = {
					every_owned_state = {
						limit = { OR = { state = 111 state = 1049 state = 1050 state = 1051 state = 1053 state = 1055 state = 1056 } }
						
						var:red_FIN = {
							transfer_state = PREV
						}
					}
				}
				set_country_flag = political_social_democrats_in_socialist_coalition
				add_ideas = neutral_foreign_policy_law
				add_opinion_modifier = { target = KRN modifier = socialist_social_democracy }
				KRN = { add_opinion_modifier = { target = PREV modifier = socialist_social_democracy } }
				set_cosmetic_tag = FNR_red
				
				create_field_marshal = {
					name = "Kulervo Manner"
					id = 6748
					portrait_path = "gfx/leaders/FIN/Portrait_Kulervo_Manner.dds"
					traits = { media_personality }
					skill = 3 attack_skill = 2 defense_skill = 3 planning_skill = 2 logistics_skill = 3
				}

				create_corps_commander = {
					name = "Eero Haapalainen"
					id = 6747
					portrait_path = "gfx/leaders/FIN/Portrait_Eero_Haapalainen.dds"
					traits = { winter_specialist }
					skill = 1 attack_skill = 3 defense_skill = 3 planning_skill = 2 logistics_skill = 2
				}

				create_corps_commander = {
					name = "Adolf Taimi"
					id = 6746
					portrait_path = "gfx/leaders/FIN/Portrait_Adolf_Taimi.dds"
					traits = { ranger }
					skill = 1 attack_skill = 3 defense_skill = 3 planning_skill = 3 logistics_skill = 2
				}

				create_corps_commander = {
					name = "Eino Rahja"
					id = 6745
					portrait_path = "gfx/leaders/FIN/Portrait_Eino_Rahja.dds"
					traits = {  }
					skill = 1 attack_skill = 1 defense_skill = 2 planning_skill = 1 logistics_skill = 2
				}

				add_ideas = {
					Kullervo_Manner_1
					Yrjo_Sirola_2
					Jalo_Kohonen_3
					Eero_Haapalainen_4
					Matti_Turkia_5
					
					Ali_Aaltonen_hc
					
					workers_control_law
					planed_economy_law
					sisu
				}
					set_politics = {
						ruling_party = social_democracy
						election_frequency = 36
						elections_allowed = no
					}
					set_popularities = {
						social_democracy = 50
						communism = 50
					}
					create_country_leader = { name = "Yuryo Sirola" desc = FIN_Yuryo_Sirola_desc picture = "gfx/leaders/FIN/Portrait_Yuryo_Sirola.dds" expire = "1935.1.1" ideology = marxism traits = {  } }
					create_country_leader = { name = "Kulervo Manner" desc = FIN_Kulervo_Manner_desc picture = "gfx/leaders/FIN/Portrait_Kulervo_Manner.dds" expire = "1935.1.1" ideology = social_democracy_ideology traits = {  } }
				var:red_FIN = { save_global_event_target_as = red_FIN }
			}
			hidden_effect = { news_event = { id = news_n.16 hours = 12 } }
		}
	}
	
	#Играть за белых
	option = {
		name = petrograd_commune.22.a
		add_stability = -0.15
		hidden_effect = {
			remove_ideas = punakaarti
		}
		event_target:red_FIN = {
			declare_war_on = {
				target = ROOT
				type = annex_everything
			}
			add_civil_war_target = ROOT
			load_oob = "FNR_punakaarti"
		}
	}
	
	#Играть за красных
	option = {
		name = petrograd_commune.22.b
		add_stability = -0.15
		set_global_flag = FIN_civil_war_begin
		hidden_effect = {
			remove_ideas = punakaarti
		}
		event_target:red_FIN = {
			declare_war_on = {
				target = ROOT
				type = annex_everything
			}
			add_civil_war_target = ROOT
			load_oob = "FNR_punakaarti"
		}
		event_target:red_FIN = {
			change_tag_from = ROOT
		}
	}
}
country_event = {
	id = petrograd_commune.23
	title = petrograd_commune.23.t
	desc = petrograd_commune.23.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	trigger = {
		tag = FIN
		NOT = { country_exists = KRN }
	}
	
	option = {
		name = petrograd_commune.23.a
		remove_ideas = punakaarti
	}
}
country_event = {
	id = petrograd_commune.24
	title = petrograd_commune.24.t
	desc = petrograd_commune.24.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	hidden = yes
	
	option = {
		name = petrograd_commune.24.a
		remove_all_foreing_locked_templates_from_liberated_country = yes
		division_template = {
			name = "Krasnaya Gvardiya"
			regiments = {
				militia = { x = 0 y = 0 }
				militia = { x = 0 y = 1 }
				militia = { x = 1 y = 0 }
			}
			priority = 0
			is_locked = yes
		}
		every_state = {
			limit = { is_owned_by = ROOT }
			create_unit = {
				division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
				owner = ROOT
			}
			create_unit = {
				division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
				owner = ROOT
			}
			if = {
				limit = { OWNER = { NOT = { tag = CPG } } }
				create_unit = {
					division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
					owner = ROOT
				}
				create_unit = {
					division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
					owner = ROOT
				}
				create_unit = {
					division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
					owner = ROOT
				}
			}
			if = {
				limit = { OWNER = { tag = SIB } }
				create_unit = {
					division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
					owner = ROOT
				}
				create_unit = {
					division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
					owner = ROOT
				}
				create_unit = {
					division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
					owner = ROOT
				}
				create_unit = {
					division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
					owner = ROOT
				}
				create_unit = {
					division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
					owner = ROOT
				}
				create_unit = {
					division = "name = \"Krasnaya Gvardiya\" division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
					owner = ROOT
				}
			}
		}
		set_division_template_lock = {
			division_template = "Krasnaya Gvardiya"
			is_locked = no
		}
	}
}

# Блокада Петрограда
country_event = {
	id = petrograd_commune.25
	title = petrograd_commune.25.t
	desc = petrograd_commune.25.desc
	picture = GFX_report_event_sov_food_crisis
	
	trigger = {
		tag = KRN
		date > 1917.5.28
		has_global_flag = RUS_monarchy_Petrograd_commune_civil_war
		OR = {
			has_idea = foodstuffs_supply_crisis_1
			has_idea = foodstuffs_supply_crisis_2
			has_idea = foodstuffs_supply_crisis_3
			has_idea = foodstuffs_supply_crisis_4
			has_idea = foodstuffs_supply_crisis_5
		}
		NOT = {
			has_global_flag = RUS_civil_war_over
			has_country_flag = KRN_blockade_not_ability_to_fire
		}
		OR = {
			num_of_controlled_states < 30
			NOT = { any_owned_state = { has_state_category = town } }
		}
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 100
	}
	
	option = {
		name = petrograd_commune.25.a
		add_popularity = { ideology = ROOT popularity = -0.25 }
		remove_ideas = {
			foodstuffs_supply_crisis_1
			foodstuffs_supply_crisis_2
			foodstuffs_supply_crisis_3
			foodstuffs_supply_crisis_4
			foodstuffs_supply_crisis_5
		}
		add_ideas = foodstuffs_supply_crisis_5
		add_political_power = -300
		add_ideas = KRN_great_famine
		add_stability = -0.15
		add_war_support = -0.15
	}
}

# Альтернативный собор во главе с Кириллом
country_event = {
	id = petrograd_commune.26
	title = petrograd_commune.26.t
	desc = petrograd_commune.26.desc
	picture = GFX_report_event_long_feb_abdication
	
	trigger = {
		tag = KRN
		has_global_flag = RUS_monarchy_Petrograd_commune_civil_war
		RUS = { has_completed_focus = RUS_mon_on_w_Great_Zemsky_Sobor }
		NOT = { has_global_flag = RUS_civil_war_over }
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 0
	}
	
	option = {
		name = petrograd_commune.26.a
		add_popularity = {
			ideology = authoritarism
			popularity = 0.05
		}
	}
}

# Интро, анархисты
country_event = {
	id = petrograd_commune.27
	title = petrograd_commune.27.t
	desc = petrograd_commune.27.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = petrograd_commune.27.a
		hidden_effect = { country_event = { id = petrograd_commune.28 days = 1 } }
		add_war_support = 0.05
		capital_scope = {
			create_unit = {
				division = "name = \"Petrogradskaya krasnaya gvardiya\" division_template = \"Petrogradskaya krasnaya gvardiya\" start_experience_factor = 0.3 start_equipment_factor = 1"
				owner = KRN
			}
		}
	}
}

# Выбор главкома
country_event = {
	id = petrograd_commune.28
	title = petrograd_commune.28.t
	desc = petrograd_commune.28.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = petrograd_commune.28.a
		add_popularity = {
			ideology = authoritarism
			popularity = 0.05
		}
		add_ideas = KRN_Dybenko_vs_Kirpichnikov
	}
	
	option = {
		name = petrograd_commune.28.b
		add_popularity = {
			ideology = national_syndicalism
			popularity = 0.05
		}
		add_ideas = KRN_Dybenko
	}
	
	option = {
		name = petrograd_commune.28.c
		add_popularity = {
			ideology = despotism
			popularity = 0.05
		}
		add_ideas = KRN_Kirpichnikov
	}
	
	option = {
		name = petrograd_commune.28.d
		add_popularity = {
			ideology = radical_socialism
			popularity = 0.05
		}
		add_ideas = KRN_no_military_leader
	}
}

# Недовольство большевиков выборами
country_event = {
	id = petrograd_commune.29
	title = petrograd_commune.29.t
	desc = {
		text = petrograd_commune.29.desc_soc_dem
		trigger = { has_government = social_democracy }
	}
	desc = {
		text = petrograd_commune.29.desc_soc_lib
		trigger = { has_government = social_liberalism }
	}
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	
	option = {
		name = petrograd_commune.29.a
		add_stability = 0.05
		set_country_flag = KRN_unstable_stability
		set_country_flag = KRN_everyone
	}
	
	option = {
		trigger = {
			has_government = social_liberalism
			OR = {
				has_idea = KRN_Dybenko_vs_Kirpichnikov
				has_idea = KRN_no_military_leader
			}
			always = no
		}
		name = petrograd_commune.29.b
	}
}

# Недовольство большевиками
country_event = {
	id = petrograd_commune.30
	title = petrograd_commune.30.t
	desc = petrograd_commune.30.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	
	option = {
		name = petrograd_commune.30.a
		add_stability = 0.05
		country_event = petrograd_commune.29
		random_list = {
			50 = {
				set_politics = {
					ruling_party = social_liberalism
					elections_allowed = no
				}
			}
			50 = {
				set_politics = {
					ruling_party = social_democracy
					elections_allowed = no
				}
			}
		}
	}
	
	option = {
		name = petrograd_commune.30.b
		add_stability = -0.05
		hidden_effect = { country_event = { id = petrograd_commune.32 days = 1 } }
	}
}

country_event = {
	id = petrograd_commune.31
	title = petrograd_commune.31.t
	desc = petrograd_commune.31.desc
	picture = GFX_report_event_001

	trigger = {
		tag = KRN
		has_war_with = GER
		RUS = { NOT = { has_war_with = GER } }
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	fire_only_once = yes
	
	immediate = {
		hidden_effect = {
			if = {
				limit = { RUS = { NOT = { is_in_faction_with = ENG } } }
				every_country = {
					limit = { OR = { is_in_faction_with = ENG AND = { is_in_faction_with = FRA NOT = { is_in_faction_with = GER } } } is_faction_leader = yes }
					ROOT = { white_peace = PREV }
				}
			}
		}
	}
	
	option = {
		name = petrograd_commune.31.a
		every_country = {
			limit = { OR = { is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = TUR AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } OR = { is_faction_leader = yes tag = AUH } }
			ROOT = { white_peace = PREV }
		}
		ai_chance = { factor = 1 }
	}
	
	option = {
		trigger = {
			NOT = { has_government = communism }
		}
		name = petrograd_commune.31.b
		add_political_power = -25
		add_popularity = {
			ideology = communism
			popularity = 0.1
		}
		add_war_support = -0.1
		add_stability = -0.1
		ai_chance = { factor = 0 }
	}
}

# Поиск союзников
country_event = {
	id = petrograd_commune.32
	title = petrograd_commune.32.t
	desc = petrograd_commune.32.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.32.a
		country_event = petrograd_commune.33
	}
	
	option = {
		name = petrograd_commune.32.b
		hidden_effect = {
			country_event = petrograd_commune.38
		}
		effect_tooltip = {
			country_event = petrograd_commune.35
		}
	}
	
	option = {
		name = petrograd_commune.32.c
		set_country_flag = KRN_Kirill_is_more_powerful
		country_event = petrograd_commune.35
	}
	
	option = {
		name = petrograd_commune.32.d
		set_country_flag = KRN_Savinkov_is_more_powerful
		country_event = petrograd_commune.35
		if = {
			limit = { has_idea = KRN_Dybenko_vs_Kirpichnikov }
			country_event = petrograd_commune.34
		}
	}
}

# Дыбенко принудил к компромиссу
country_event = {
	id = petrograd_commune.33
	title = petrograd_commune.33.t
	desc = petrograd_commune.33.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.33.a
		if = {
			limit = { has_idea = KRN_no_military_leader }
			remove_ideas = KRN_no_military_leader
			add_ideas = KRN_Dybenko
		}
		add_stability = 0.05
		set_politics = {
			ruling_party = social_liberalism
			elections_allowed = no
		}
		set_country_flag = KRN_unstable_stability
		set_country_flag = KRN_everyone
		set_country_flag = KRN_Dybenko_is_more_powerful
	}
}

# Энгельгардт принудил к компромиссу
country_event = {
	id = petrograd_commune.34
	title = petrograd_commune.34.t
	desc = petrograd_commune.34.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.34.a
		if = {
			limit = { has_idea = KRN_no_military_leader }
			remove_ideas = KRN_no_military_leader
			add_ideas = KRN_Dybenko_vs_Kirpichnikov
		}
		add_stability = 0.05
		set_politics = {
			ruling_party = social_liberalism
			elections_allowed = no
		}
		set_country_flag = KRN_unstable_stability
		set_country_flag = KRN_everyone
		set_country_flag = KRN_Kirill_is_more_powerful
	}
}

# Противостояние большевиков и их шепиловых
country_event = {
	id = petrograd_commune.35
	title = petrograd_commune.35.t
	desc = petrograd_commune.35.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.35.a
		effect_tooltip = {
			add_stability = -0.01
			add_political_power = 25
		}
		hidden_effect = {
			random_list = {
				50 = {
					country_event = petrograd_commune.37
				}
				50 = {
					country_event = petrograd_commune.36
				}
			}
		}
	}
}

# Большевики проиграли
country_event = {
	id = petrograd_commune.36
	title = petrograd_commune.36.t
	desc = petrograd_commune.36.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.36.a
		add_popularity = {
			ideology = communism
			popularity = -0.05
		}
		remove_ideas = RUS_red_guards
		if = {
			limit = { has_country_flag = KRN_Savinkov_is_more_powerful }
			clr_country_flag = KRN_Savinkov_is_more_powerful
			add_popularity = {
				ideology = national_syndicalism
				popularity = -0.05
			}
			remove_ideas = KRN_savinkovtsy
			every_unit_leader = { limit = { OR = { has_id = 77438 } } set_nationality = REB }
		}
		else_if = {
			limit = { has_country_flag = KRN_Kirill_is_more_powerful }
			clr_country_flag = KRN_Kirill_is_more_powerful
			add_popularity = {
				ideology = authoritarism
				popularity = -1
			}
			remove_ideas = KRN_kirillovtsy
			every_unit_leader = { limit = { OR = { has_id = 77436 has_id = 77437 } } set_nationality = REB }
			if = {
				limit = { has_idea = KRN_Dybenko_vs_Kirpichnikov }
				remove_ideas = KRN_Dybenko_vs_Kirpichnikov
				add_ideas = KRN_Dybenko
			}
		}
		if = {
			limit = { has_idea = KRN_no_military_leader }
			remove_ideas = KRN_no_military_leader
			add_ideas = KRN_Dybenko
		}
		set_politics = {
			ruling_party = social_liberalism
			elections_allowed = no
		}
		set_country_flag = KRN_unstable_stability
		set_country_flag = KRN_everyone_expect_communist
	}
}

# Большевики выиграли
country_event = {
	id = petrograd_commune.37
	title = petrograd_commune.37.t
	desc = petrograd_commune.37.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.37.a
		remove_ideas = KRN_volyntsi
		if = {
			limit = { has_country_flag = KRN_Savinkov_is_more_powerful }
			add_popularity = {
				ideology = authoritarism
				popularity = -1
			}
			remove_ideas = KRN_kirillovtsy
			every_unit_leader = { limit = { OR = { has_id = 77436 has_id = 77437 } } set_nationality = REB }
			if = {
				limit = { OR = { has_idea = KRN_Dybenko_vs_Kirpichnikov has_idea = KRN_Kirpichnikov } }
				remove_ideas = {
					KRN_Dybenko_vs_Kirpichnikov
					KRN_Kirpichnikov
				}
				add_ideas = KRN_Dybenko
			}
		}
		else_if = {
			limit = { has_country_flag = KRN_Kirill_is_more_powerful }
			add_popularity = {
				ideology = national_syndicalism
				popularity = -0.05
			}
			remove_ideas = KRN_savinkovtsy
			every_unit_leader = { limit = { OR = { has_id = 77438 } } set_nationality = REB }
			if = {
				limit = { has_idea = KRN_Kirpichnikov }
				remove_ideas = KRN_Kirpichnikov
				add_ideas = KRN_Dybenko
			}
		}
		set_country_flag = KRN_unstable_stability
		set_country_flag = KRN_communist_Dybenko_and_Kirill_or_Savinkov
	}
}

# Кирпичников разгнал большевиков, но не победил
country_event = {
	id = petrograd_commune.38
	title = petrograd_commune.38.t
	desc = petrograd_commune.38.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.38.a
		set_politics = {
			ruling_party = social_liberalism
			elections_allowed = no
		}
		effect_tooltip = {
			add_stability = 0.15
		}
		hidden_effect = { country_event = petrograd_commune.39 }
	}
}

# Требование Кирпичникова
country_event = {
	id = petrograd_commune.39
	title = petrograd_commune.39.t
	desc = petrograd_commune.39.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.39.a
		set_politics = {
			ruling_party = despotism
			elections_allowed = no
		}
		random_list = {
			60 = {
				country_event = petrograd_commune.54
			}
			40 = {
				country_event = petrograd_commune.55
			}
		}
	}
	
	option = {
		name = petrograd_commune.39.b
		set_politics = {
			ruling_party = despotism
			elections_allowed = no
		}
		add_popularity = {
			ideology = social_democracy
			popularity = -0.05
		}
		add_popularity = {
			ideology = social_liberalism
			popularity = -0.05
		}
		set_politics = {
			ruling_party = despotism
			elections_allowed = no
		}
		effect_tooltip = {
			add_stability = 0.15
		}
		hidden_effect = { country_event = petrograd_commune.40 }
	}
}

# Дыбенко объявляет Кирпичникова врагом народа
country_event = {
	id = petrograd_commune.40
	title = petrograd_commune.40.t
	desc = petrograd_commune.40.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.40.a
		if = {
			limit = { OR = { has_idea = KRN_Dybenko has_idea = KRN_Dybenko_vs_Kirpichnikov has_idea = KRN_no_military_leader } }
			remove_ideas = KRN_Dybenko
			remove_ideas = KRN_Dybenko_vs_Kirpichnikov
			remove_ideas = KRN_no_military_leader
			add_ideas = KRN_Kirpichnikov
		}
		country_event = petrograd_commune.41
	}
}

# Выбор как разогнать красную гвардию
country_event = {
	id = petrograd_commune.41
	title = petrograd_commune.41.t
	desc = petrograd_commune.41.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.41.a
		country_event = petrograd_commune.47
	}
	
	option = {
		name = petrograd_commune.41.b
		random_list = {
			50 = {
				country_event = petrograd_commune.49
			}
			50 = {
				country_event = petrograd_commune.42
			}
		}
	}
}

# Разгон красной гвардии Кирпичников, успех
country_event = {
	id = petrograd_commune.42
	title = petrograd_commune.42.t
	desc = petrograd_commune.42.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.42.a
		remove_ideas = RUS_red_guards
		add_popularity = {
			ideology = communism
			popularity = -0.05
		}
		random_list = {
			50 ={
				country_event = petrograd_commune.43
			}
			50 = {
				random_list = {
					50 = {
						country_event = petrograd_commune.44
					}
					50 = {
						country_event = petrograd_commune.48
					}
				}
			}
		}
	}
}

# Победа Кирпичникова и Савинкова
country_event = {
	id = petrograd_commune.43
	title = petrograd_commune.43.t
	desc = petrograd_commune.43.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.43.a
		set_country_flag = KRN_unstable_stability
		set_country_flag = KRN_only_Savinkov
		add_popularity = {
			ideology = authoritarism
			popularity = -1
		}
		add_popularity = {
			ideology = despotism
			popularity = 0.05
		}
		add_popularity = {
			ideology = national_syndicalism
			popularity = 0.05
		}
		remove_ideas = {
			KRN_sailors
			KRN_kirillovtsy
		}
		retire_ideology_leader = authoritarism
		retire_ideology_leader = national_syndicalism
		create_country_leader = { name = "Boris Savinkov" desc = RUS_Boris_Savinkov_DESC picture = "gfx/leaders/RUS/Portrait_Boris_Savinkov.dds" ideology = national_syndicalism_ideology traits = { leader_of_dark_circles ideological_crusader political_activist political_dancer min_4_prince_of_terror eser_terrorist } }
		every_unit_leader = { limit = { OR = { has_id = 19173 has_id = 19194 has_id = 19194 } } set_nationality = REB }
	}
}

# Победа Кирилла и Савинкова
country_event = {
	id = petrograd_commune.44
	title = petrograd_commune.44.t
	desc = petrograd_commune.44.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.44.a
		country_event = petrograd_commune.45
		set_politics = {
			ruling_party = authoritarism
			elections_allowed = no
		}
		add_popularity = {
			ideology = despotism
			popularity = -1
		}
		add_popularity = {
			ideology = authoritarism
			popularity = 0.05
		}
		add_popularity = {
			ideology = national_syndicalism
			popularity = 0.05
		}
		remove_ideas = {
			KRN_sailors
			KRN_volyntsi
			KRN_Kirpichnikov
		}
		add_ideas = KRN_Dybenko_vs_Kirpichnikov
		retire_ideology_leader = despotism
		retire_ideology_leader = national_syndicalism
		create_country_leader = { name = "Boris Savinkov" desc = RUS_Boris_Savinkov_DESC picture = "gfx/leaders/RUS/Portrait_Boris_Savinkov.dds" ideology = national_syndicalism_ideology traits = { leader_of_dark_circles ideological_crusader political_activist political_dancer min_4_prince_of_terror eser_terrorist } }
		every_unit_leader = { limit = { OR = { has_id = 19173 has_id = 19194 has_id = 19194 } } set_nationality = REB }
	}
}

# Сделка Кирилла и Савинкова
country_event = {
	id = petrograd_commune.45
	title = petrograd_commune.45.t
	desc = petrograd_commune.45.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.45.a
		add_stability = 0.05
		set_country_flag = KRN_unstable_stability
		set_country_flag = KRN_only_Savinkov
	}
	
	option = {
		name = petrograd_commune.45.b
		effect_tooltip = {
			retire_ideology_leader = national_syndicalism
			remove_ideas = KRN_savinkovtsy
		}
		hidden_effect = {
			random_list = {
				50 = {
					retire_ideology_leader = national_syndicalism
					remove_ideas = KRN_savinkovtsy
					every_unit_leader = { limit = { OR = { has_id = 77438 } } set_nationality = REB }
					add_popularity = {
						ideology = national_syndicalism
						popularity = -1
					}
					set_country_flag = KRN_only_anarchy
				}
				50 = {
					country_event = petrograd_commune.46
				}
			}
		}
	}
}

# Савинков смог победить Кирилла
country_event = {
	id = petrograd_commune.46
	title = petrograd_commune.46.t
	desc = petrograd_commune.46.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.45.a
		retire_ideology_leader = authoritarism
		add_popularity = {
			ideology = authoritarism
			popularity = -1
		}
		remove_ideas = KRN_kirillovtsy
		every_unit_leader = { limit = { OR = { has_id = 77436 has_id = 77437 } } set_nationality = REB }
		remove_ideas = KRN_Dybenko_vs_Kirpichnikov
		set_country_flag = KRN_unstable_stability
		set_country_flag = KRN_only_anarchy
	}
}

# Кирпичников выбирает союзников
country_event = {
	id = petrograd_commune.47
	title = petrograd_commune.47.t
	desc = petrograd_commune.47.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.47.a
		effect_tooltip = { country_event = treaty_of_brest.4 }
		set_country_flag = KRN_Savinkov_is_more_powerful
		hidden_effect = { country_event = petrograd_commune.49 }
	}
	
	option = {
		name = petrograd_commune.47.b
		effect_tooltip = { country_event = treaty_of_brest.4 }
		set_country_flag = KRN_Kirill_is_more_powerful
		hidden_effect = { country_event = petrograd_commune.49 }
	}
}

# Дыбенко победил
country_event = {
	id = petrograd_commune.48
	title = petrograd_commune.48.t
	desc = petrograd_commune.48.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.48.a
		set_politics = {
			ruling_party = communism
			elections_allowed = no
		}
		retire_ideology_leader = authoritarism
		retire_ideology_leader = despotism
		add_popularity = {
			ideology = authoritarism
			popularity = -1
		}
		add_popularity = {
			ideology = despotism
			popularity = -1
		}
		add_popularity = {
			ideology = national_syndicalism
			popularity = 0.1
		}
		remove_ideas = {
			KRN_kirillovtsy
			KRN_savinkovtsy
			KRN_volyntsi
			KRN_Dybenko_vs_Kirpichnikov
			KRN_Kirpichnikov
			KRN_no_military_leader
		}
		every_unit_leader = { limit = { OR = { has_id = 77432 has_id = 77436 has_id = 77437 has_id = 77438 } } set_nationality = REB }
		if = {
			limit = { NOT = { has_idea = KRN_Dybenko } }
			add_ideas = KRN_Dybenko
		}
		if = {
			limit = { NOT = { has_idea = RUS_red_guards } }
			add_ideas = RUS_red_guards
		}
		set_country_flag = KRN_unstable_stability
		set_country_flag = KRN_Dybenko_and_bolsheviks
		set_country_flag = KRN_Dybenko_is_more_powerful
	}
}

# Кирпичников арестован
country_event = {
	id = petrograd_commune.49
	title = petrograd_commune.49.t
	desc = petrograd_commune.49.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.49.a
		country_event = petrograd_commune.50
		remove_ideas = {
			KRN_Kirpichnikov
			KRN_volyntsi
		}
		add_ideas = KRN_Dybenko_vs_Kirpichnikov
		if = {
			limit = { has_country_flag = KRN_Savinkov_is_more_powerful }
			add_popularity = {
				ideology = despotism
				popularity = -1
			}
			retire_ideology_leader = despotism
			retire_ideology_leader = national_syndicalism
			set_politics = {
				ruling_party = national_syndicalism
				elections_allowed = no
			}
			every_unit_leader = { limit = { OR = { has_id = 77432 } } remove_unit_leader = yes }
			create_country_leader = { name = "Boris Savinkov" desc = RUS_Boris_Savinkov_DESC picture = "gfx/leaders/RUS/Portrait_Boris_Savinkov.dds" ideology = national_syndicalism_ideology traits = { leader_of_dark_circles ideological_crusader political_activist political_dancer min_4_prince_of_terror eser_terrorist } }
		}
		else_if = {
			limit = { has_country_flag = KRN_Kirill_is_more_powerful }
			add_popularity = {
				ideology = despotism
				popularity = -1
			}
			retire_ideology_leader = despotism
			set_politics = {
				ruling_party = authoritarism
				elections_allowed = no
			}
			every_unit_leader = { limit = { OR = { has_id = 77432 } } remove_unit_leader = yes }
		}
		else = {
			random_list = {
				50 = {
					add_popularity = {
						ideology = despotism
						popularity = -1
					}
					retire_ideology_leader = despotism
					retire_ideology_leader = national_syndicalism
					set_politics = {
						ruling_party = national_syndicalism
						elections_allowed = no
					}
					set_country_flag = KRN_Savinkov_is_more_powerful
					every_unit_leader = { limit = { OR = { has_id = 77432 } } remove_unit_leader = yes }
					create_country_leader = { name = "Boris Savinkov" desc = RUS_Boris_Savinkov_DESC picture = "gfx/leaders/RUS/Portrait_Boris_Savinkov.dds" ideology = national_syndicalism_ideology traits = { leader_of_dark_circles ideological_crusader political_activist political_dancer min_4_prince_of_terror eser_terrorist } }
				}
				50 = {
					add_popularity = {
						ideology = despotism
						popularity = -1
					}
					retire_ideology_leader = despotism
					set_politics = {
						ruling_party = authoritarism
						elections_allowed = no
					}
					set_country_flag = KRN_Kirill_is_more_powerful
					every_unit_leader = { limit = { OR = { has_id = 77432 } } remove_unit_leader = yes }
				}
			}
		}
	}
}

# Дыбенко требует не трогать рабочих
country_event = {
	id = petrograd_commune.50
	title = petrograd_commune.50.t
	desc = petrograd_commune.50.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.50.a
		random_list = {
			50 = {
				if = {
				limit = { NOT = { has_government = social_liberalism } }
					if = {
						limit = { RUS = { has_country_flag = Alexandr_Kerensky_dead } }
						set_politics = {
							ruling_party = social_democracy
							elections_allowed = no
						}
					}
					else = {
						set_politics = {
							ruling_party = social_liberalism
							elections_allowed = no
						}
					}
				}
				add_ideas = RUS_red_guards
				set_country_flag = KRN_unstable_stability
				set_country_flag = KRN_everyone
				set_country_flag = KRN_Dybenko_is_more_powerful
			}
			50 = {
				country_event = petrograd_commune.51
			}
		}
	}
	
	option = {
		name = petrograd_commune.50.b
		country_event = petrograd_commune.51
	}
}

# Кирилл и Савинков против Дыбенко и больщевиков
country_event = {
	id = petrograd_commune.51
	title = petrograd_commune.51.t
	desc = petrograd_commune.51.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.51.a
		random_list = {
			50 = {
				country_event = petrograd_commune.52
			}
			50 = {
				country_event = petrograd_commune.53
			}
		}
	}
}

# Дыбенко победил
country_event = {
	id = petrograd_commune.52
	title = petrograd_commune.52.t
	desc = petrograd_commune.52.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.52.a
		set_politics = {
			ruling_party = communism
			elections_allowed = no
		}
		retire_ideology_leader = authoritarism
		add_popularity = {
			ideology = authoritarism
			popularity = -1
		}
		add_popularity = {
			ideology = national_syndicalism
			popularity = 0.1
		}
		remove_ideas = {
			KRN_kirillovtsy
			KRN_savinkovtsy
			KRN_volyntsi
			KRN_Dybenko_vs_Kirpichnikov
			KRN_Kirpichnikov
			KRN_no_military_leader
		}
		every_unit_leader = { limit = { OR = { has_id = 77432 has_id = 77436 has_id = 77437 has_id = 77438 } } set_nationality = REB }
		if = {
			limit = { NOT = { has_idea = KRN_Dybenko } }
			add_ideas = KRN_Dybenko
		}
		if = {
			limit = { NOT = { has_idea = RUS_red_guards } }
			add_ideas = RUS_red_guards
		}
		set_country_flag = KRN_unstable_stability
		set_country_flag = KRN_Dybenko_and_bolsheviks
		set_country_flag = KRN_Dybenko_is_more_powerful
	}
}

# Победа Кирилла и Савинкова
country_event = {
	id = petrograd_commune.53
	title = petrograd_commune.53.t
	desc = petrograd_commune.53.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.53.a
		country_event = petrograd_commune.45
		if = {
			limit = { has_government = social_liberalism }
			country_event = petrograd_commune.58
		}
		set_politics = {
			ruling_party = authoritarism
			elections_allowed = no
		}
		remove_ideas = {
			KRN_sailors
			KRN_Dybenko
			KRN_Kirpichnikov
			KRN_no_military_leader
			RUS_red_guards
		}
		if = {
			limit = { NOT = { has_idea = KRN_Dybenko_vs_Kirpichnikov } }
			add_ideas = KRN_Dybenko_vs_Kirpichnikov
		}
		retire_ideology_leader = national_syndicalism
		create_country_leader = { name = "Boris Savinkov" desc = RUS_Boris_Savinkov_DESC picture = "gfx/leaders/RUS/Portrait_Boris_Savinkov.dds" ideology = national_syndicalism_ideology traits = { leader_of_dark_circles ideological_crusader political_activist political_dancer min_4_prince_of_terror eser_terrorist } }
		every_unit_leader = { limit = { OR = { has_id = 19173 has_id = 19194 has_id = 19194 has_id = 77432 } } set_nationality = REB }
	}
}

# Керенский убит
country_event = {
	id = petrograd_commune.54
	title = petrograd_commune.54.t
	desc = petrograd_commune.54.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.54.a
		country_event = petrograd_commune.40
		add_popularity = {
			ideology = social_liberalism
			popularity = -1
		}
		retire_ideology_leader = social_liberalism
		RUS = { set_country_flag = Alexandr_Kerensky_dead }
	}
}

# Керенский ищет союзников
country_event = {
	id = petrograd_commune.55
	title = petrograd_commune.55.t
	desc = petrograd_commune.55.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.55.a
		country_event = petrograd_commune.56
	}
	
	option = {
		name = petrograd_commune.55.b
		random_list = {
			50 = { country_event = petrograd_commune.57 }
			50 = { country_event = petrograd_commune.59 }
		}
	}
}

# Дыбенко победил Кирпичникова по просьбе Керенского
country_event = {
	id = petrograd_commune.56
	title = petrograd_commune.56.t
	desc = petrograd_commune.56.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.56.a
		set_politics = {
			ruling_party = social_liberalism
			elections_allowed = no
		}
		retire_ideology_leader = despotism
		every_unit_leader = { limit = { OR = { has_id = 77432 } } remove_unit_leader = yes }
		add_popularity = {
			ideology = despotism
			popularity = -1
		}
		add_popularity = {
			ideology = national_syndicalism
			popularity = 0.1
		}
		remove_ideas = {
			KRN_volyntsi
			KRN_Dybenko_vs_Kirpichnikov
			KRN_Kirpichnikov
			KRN_no_military_leader
		}
		if = {
			limit = { NOT = { has_idea = KRN_Dybenko } }
			add_ideas = KRN_Dybenko
		}
		if = {
			limit = { NOT = { has_idea = RUS_red_guards } }
			add_ideas = RUS_red_guards
		}
		set_country_flag = KRN_unstable_stability
		set_country_flag = KRN_Dybenko_and_everyone
		set_country_flag = KRN_Dybenko_is_more_powerful
	}
}

# Кирпичников арестован, но главный Керенский
country_event = {
	id = petrograd_commune.57
	title = petrograd_commune.57.t
	desc = petrograd_commune.57.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.57.a
		country_event = petrograd_commune.50
		remove_ideas = KRN_Kirpichnikov
		add_ideas = KRN_Dybenko_vs_Kirpichnikov
		add_popularity = {
			ideology = despotism
			popularity = -1
		}
		retire_ideology_leader = despotism
		set_politics = {
			ruling_party = social_liberalism
			elections_allowed = no
		}
		every_unit_leader = { limit = { OR = { has_id = 77432 } } remove_unit_leader = yes }
	}
}

# Керенского кинули
country_event = {
	id = petrograd_commune.58
	title = petrograd_commune.58.t
	desc = petrograd_commune.58.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.58.a
	}
}

# Большевики оправились и что-то мутят
country_event = {
	id = petrograd_commune.59
	title = petrograd_commune.59.t
	desc = petrograd_commune.59.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.59.a
		country_event = petrograd_commune.60
	}
	
	option = {
		name = petrograd_commune.59.b
		custom_effect_tooltip = no_good_idea
		effect_tooltip = { country_event = petrograd_commune.42 }
		hidden_effect = {
			random_list = {
				50 = {
					country_event = petrograd_commune.66
				}
				50 = {
					country_event = petrograd_commune.67
				}
			}
		}
	}
}

# Волынцев побили
country_event = {
	id = petrograd_commune.60
	title = petrograd_commune.60.t
	desc = petrograd_commune.60.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.60.a
		remove_ideas = KRN_Kirpichnikov
		add_popularity = {
			ideology = despotism
			popularity = -1
		}
		retire_ideology_leader = despotism
		every_unit_leader = { limit = { OR = { has_id = 77432 } } remove_unit_leader = yes }
		country_event = petrograd_commune.62
	}
	
	option = {
		name = petrograd_commune.60.b
		remove_ideas = KRN_Kirpichnikov
		add_popularity = {
			ideology = despotism
			popularity = -1
		}
		retire_ideology_leader = despotism
		every_unit_leader = { limit = { OR = { has_id = 77432 } } remove_unit_leader = yes }
		custom_effect_tooltip = no_good_idea
		hidden_effect = {
			country_event = petrograd_commune.61
		}
	}
}

# Савинков перешёл на сторону большевиков
country_event = {
	id = petrograd_commune.61
	title = petrograd_commune.61.t
	desc = petrograd_commune.61.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.61.a
		set_politics = {
			ruling_party = communism
			elections_allowed = no
		}
		retire_ideology_leader = authoritarism
		add_popularity = {
			ideology = authoritarism
			popularity = -1
		}
		add_popularity = {
			ideology = national_syndicalism
			popularity = 0.1
		}
		remove_ideas = {
			KRN_kirillovtsy
			KRN_Dybenko_vs_Kirpichnikov
			KRN_Kirpichnikov
			KRN_no_military_leader
		}
		every_unit_leader = { limit = { OR = { has_id = 77436 has_id = 77437 } } set_nationality = REB }
		if = {
			limit = { NOT = { has_idea = KRN_Dybenko } }
			add_ideas = KRN_Dybenko
		}
		if = {
			limit = { NOT = { has_idea = RUS_red_guards } }
			add_ideas = RUS_red_guards
		}
		set_country_flag = KRN_unstable_stability
		set_country_flag = KRN_Dybenko_and_Savinkov
		set_country_flag = KRN_Savinkov_is_more_powerful
	}
}

# Победа над большевиками, но Кирилл и Керенский могут поссорится
country_event = {
	id = petrograd_commune.62
	title = petrograd_commune.62.t
	desc = petrograd_commune.62.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.62.a
		retire_ideology_leader = communism
		add_popularity = {
			ideology = communism
			popularity = -1
		}
		remove_ideas = {
			KRN_sailors
			KRN_Dybenko
			KRN_no_military_leader
			RUS_red_guards
		}
		if = {
			limit = { NOT = { has_idea = KRN_Dybenko_vs_Kirpichnikov } }
			add_ideas = KRN_Dybenko_vs_Kirpichnikov
		}
		retire_ideology_leader = national_syndicalism
		create_country_leader = { name = "Boris Savinkov" desc = RUS_Boris_Savinkov_DESC picture = "gfx/leaders/RUS/Portrait_Boris_Savinkov.dds" ideology = national_syndicalism_ideology traits = { leader_of_dark_circles ideological_crusader political_activist political_dancer min_4_prince_of_terror eser_terrorist } }
		every_unit_leader = { limit = { OR = { has_id = 19173 has_id = 19194 has_id = 19194 } } set_nationality = REB }
		country_event = petrograd_commune.63
	}
	
	option = {
		name = petrograd_commune.62.b
		retire_ideology_leader = communism
		add_popularity = {
			ideology = communism
			popularity = -1
		}
		remove_ideas = {
			KRN_sailors
			KRN_Dybenko
			KRN_no_military_leader
			RUS_red_guards
		}
		if = {
			limit = { NOT = { has_idea = KRN_Dybenko_vs_Kirpichnikov } }
			add_ideas = KRN_Dybenko_vs_Kirpichnikov
		}
		retire_ideology_leader = national_syndicalism
		create_country_leader = { name = "Boris Savinkov" desc = RUS_Boris_Savinkov_DESC picture = "gfx/leaders/RUS/Portrait_Boris_Savinkov.dds" ideology = national_syndicalism_ideology traits = { leader_of_dark_circles ideological_crusader political_activist political_dancer min_4_prince_of_terror eser_terrorist } }
		every_unit_leader = { limit = { OR = { has_id = 19173 has_id = 19194 has_id = 19194 } } set_nationality = REB }
		country_event = petrograd_commune.64
	}
}

# Керенский победил с Кириллом и Савинковым
country_event = {
	id = petrograd_commune.63
	title = petrograd_commune.63.t
	desc = petrograd_commune.63.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.63.a
		set_country_flag = KRN_unstable_stability
		set_country_flag = KRN_Kerensky_Savinkov_Kirill
		set_country_flag = KRN_Savinkov_is_more_powerful
	}
	
	option = {
		name = petrograd_commune.63.b
		effect_tooltip = {
			retire_ideology_leader = authoritarism
			remove_ideas = KRN_kirillovtsy
		}
		hidden_effect = {
			random_list = {
				50 = {
					retire_ideology_leader = authoritarism
					remove_ideas = KRN_kirillovtsy
					every_unit_leader = { limit = { OR = { has_id = 77436 has_id = 77437 } } set_nationality = REB }
					add_popularity = {
						ideology = authoritarism
						popularity = -1
					}
				}
				50 = {
					country_event = petrograd_commune.65
				}
			}
		}
	}
}

# Керенского кинули после победы
country_event = {
	id = petrograd_commune.64
	title = petrograd_commune.64.t
	desc = petrograd_commune.64.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.64.a
		set_politics = {
			ruling_party = authoritarism
			elections_allowed = no
		}
		add_popularity = {
			ideology = social_liberalism
			popularity = -1
		}
		retire_ideology_leader = social_liberalism
		RUS = { set_country_flag = Alexandr_Kerensky_dead }
		country_event = petrograd_commune.45
	}
}

# Кирилл победил Савинкова
country_event = {
	id = petrograd_commune.65
	title = petrograd_commune.65.t
	desc = petrograd_commune.65.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.65.a
		set_politics = {
			ruling_party = authoritarism
			elections_allowed = no
		}
		retire_ideology_leader = national_syndicalism
		add_popularity = {
			ideology = national_syndicalism
			popularity = -1
		}
		remove_ideas = {
			KRN_savinkovtsy
			KRN_no_military_leader
		}
		every_unit_leader = { limit = { OR = { has_id = 77438 } } set_nationality = REB }
		add_ideas = KRN_Dybenko_vs_Kirpichnikov
		set_country_flag = KRN_unstable_stability
		set_country_flag = KRN_only_anarchy
	}
}

# Кирпичников победил
country_event = {
	id = petrograd_commune.66
	title = petrograd_commune.66.t
	desc = petrograd_commune.66.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.66.a
		set_politics = {
			ruling_party = despotism
			elections_allowed = no
		}
		retire_ideology_leader = authoritarism
		retire_ideology_leader = national_syndicalism
		add_popularity = {
			ideology = authoritarism
			popularity = -1
		}
		add_popularity = {
			ideology = national_syndicalism
			popularity = -1
		}
		remove_ideas = {
			KRN_kirillovtsy
			KRN_savinkovtsy
			KRN_Dybenko_vs_Kirpichnikov
			KRN_Dybenko
			KRN_no_military_leader
			RUS_red_guards
		}
		every_unit_leader = { limit = { OR = { has_id = 19173 has_id = 19194 has_id = 77436 has_id = 77437 has_id = 77438 } } set_nationality = REB }
		if = {
			limit = { NOT = { has_idea = KRN_volyntsi } }
			add_ideas = KRN_volyntsi
		}
		if = {
			limit = { NOT = { has_idea = KRN_Kirpichnikov } }
			add_ideas = KRN_Kirpichnikov
		}
		set_country_flag = KRN_unstable_stability
		set_country_flag = KRN_only_anarchy
	}
}

# Анархия
country_event = {
	id = petrograd_commune.67
	title = petrograd_commune.67.t
	desc = petrograd_commune.67.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.67.a
		set_politics = {
			ruling_party = radical_socialism
			elections_allowed = no
		}
		retire_ideology_leader = authoritarism
		retire_ideology_leader = despotism
		retire_ideology_leader = national_syndicalism
		add_popularity = {
			ideology = authoritarism
			popularity = -1
		}
		add_popularity = {
			ideology = despotism
			popularity = -1
		}
		add_popularity = {
			ideology = national_syndicalism
			popularity = -1
		}
		remove_ideas = {
			KRN_kirillovtsy
			KRN_savinkovtsy
			KRN_volyntsi
			KRN_Dybenko_vs_Kirpichnikov
			KRN_Dybenko
			KRN_Kirpichnikov
			KRN_no_military_leader
			RUS_red_guards
		}
		every_unit_leader = { limit = { OR = { has_id = 19173 has_id = 19194 has_id = 77436 has_id = 77437 has_id = 77438 } } set_nationality = REB }
		if = {
			limit = { NOT = { has_country_leader = { name = "Pavel Dybenko" ruling_only = yes } } }
			create_country_leader = { name = "Joseph Bleikhman" desc = KRN_Joseph_Bleikhman_DESC picture = "gfx/leaders/Russia/Portrait_Russia_Generic_6.dds" ideology = anarchist_syndicalism traits = {  } }
		}
	}
}

#Подставной кандидат или военный лидер утратил кредит доверия
country_event = {
	id = petrograd_commune.68
	title = petrograd_commune.68.t
	desc = petrograd_commune.68.desc
	picture = GFX_report_event_cimmerman_telegramm
	
	trigger = {
		has_war_with = RUS
	}

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.68.a
		set_country_flag = KRN_revolution_continues
	}
}

#Военные лидеры заполняют вакуум власти
country_event = {
	id = petrograd_commune.69
	title = petrograd_commune.69.t
	desc = petrograd_commune.69.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.69.a
		
	}
}

# Дыбенко опрокинул большевиков
country_event = {
	id = petrograd_commune.70
	title = petrograd_commune.70.t
	desc = petrograd_commune.70.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.70.a
		if = {
			limit = { has_country_flag = KRN_Dybenko_is_radsoc }
			set_politics = {
				ruling_party = radical_socialism
				elections_allowed = no
			}
		}
		else = {
			set_politics = {
				ruling_party = national_syndicalism
				elections_allowed = no
			}
		}
		add_popularity = {
			ideology = communism
			popularity = -1
		}
		remove_ideas = {
			RUS_red_guards
		}
		every_unit_leader = { limit = { OR = { has_id = 19194 } } set_nationality = REB }
		if = {
			limit = { NOT = { has_idea = KRN_Dybenko } }
			add_ideas = KRN_Dybenko
		}
		clr_country_flag = KRN_revolution_continues
	}
}

# Анархия
country_event = {
	id = petrograd_commune.71
	title = petrograd_commune.71.t
	desc = petrograd_commune.71.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.71.a
		set_politics = {
			ruling_party = radical_socialism
			elections_allowed = no
		}
		retire_ideology_leader = authoritarism
		retire_ideology_leader = despotism
		retire_ideology_leader = national_syndicalism
		add_popularity = {
			ideology = authoritarism
			popularity = -1
		}
		add_popularity = {
			ideology = despotism
			popularity = -1
		}
		add_popularity = {
			ideology = national_syndicalism
			popularity = -1
		}
		remove_ideas = {
			KRN_kirillovtsy
			KRN_savinkovtsy
			KRN_volyntsi
			KRN_Dybenko_vs_Kirpichnikov
			KRN_Kirpichnikov
			KRN_no_military_leader
			RUS_red_guards
		}
		if = {
			limit = { NOT = { has_idea = KRN_Dybenko } has_country_leader = { name = "Pavel Dybenko" ruling_only = yes } }
			add_ideas = KRN_Dybenko
		}
		every_unit_leader = { limit = { OR = { has_id = 19173 has_id = 19194 has_id = 77436 has_id = 77437 has_id = 77438 } } set_nationality = REB }
		if = {
			limit = { NOT = { has_country_leader = { name = "Pavel Dybenko" ruling_only = yes } } }
			create_country_leader = { name = "Joseph Bleikhman" desc = KRN_Joseph_Bleikhman_DESC picture = "gfx/leaders/Russia/Portrait_Russia_Generic_6.dds" ideology = anarchist_syndicalism traits = {  } }
		}
	}
}

# Савинков опрокинул Кирпичникова
country_event = {
	id = petrograd_commune.72
	title = petrograd_commune.72.t
	desc = petrograd_commune.72.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.72.a
		set_politics = {
			ruling_party = national_syndicalism
			elections_allowed = no
		}
		retire_ideology_leader = despotism
		add_popularity = {
			ideology = despotism
			popularity = -1
		}
		remove_ideas = {
			KRN_volyntsi
			KRN_Kirpichnikov
			KRN_no_military_leader
		}
		every_unit_leader = { limit = { OR = { has_id = 77432 } } set_nationality = REB }
	}
}

# Противостояние Дыбенко и Савинкова (Кирила)
country_event = {
	id = petrograd_commune.73
	title = petrograd_commune.73.t
	desc = petrograd_commune.73.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.73.a
		random_list = {
			50 = {
				if = {
					limit = { has_country_flag = KRN_communist_Dybenko_and_Kirill_or_Savinkov has_country_flag = KRN_Kirill_is_more_powerful }
					country_event = petrograd_commune.77
				}
				else = {
					country_event = petrograd_commune.75
				}
			}
			50 = {
				country_event = petrograd_commune.74
			}
		}
		every_unit_leader = { limit = { OR = { has_id = 19173 has_id = 19194 has_id = 19194 } } set_nationality = REB }
	}
}

# Победа Дыбенко
country_event = {
	id = petrograd_commune.74
	title = petrograd_commune.74.t
	desc = petrograd_commune.74.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.74.a
		if = {
			limit = { has_country_flag = KRN_Dybenko_is_radsoc }
			set_politics = {
				ruling_party = radical_socialism
				elections_allowed = no
			}
		}
		else = {
			set_politics = {
				ruling_party = national_syndicalism
				elections_allowed = no
			}
		}
		remove_ideas = {
			KRN_savinkovtsy
			RUS_red_guards
			KRN_no_military_leader
		}
		every_unit_leader = { limit = { OR = { has_id = 77438 } } set_nationality = REB }
	}
}

# Победа Савинкова
country_event = {
	id = petrograd_commune.75
	title = petrograd_commune.75.t
	desc = petrograd_commune.75.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.75.a
		set_politics = {
			ruling_party = national_syndicalism
			elections_allowed = no
		}
		if = {
			limit = { has_country_flag = KRN_Dybenko_is_radsoc }
			retire_ideology_leader = radical_socialism
		}
		else = {
			retire_ideology_leader = national_syndicalism
			create_country_leader = { name = "Boris Savinkov" desc = RUS_Boris_Savinkov_DESC picture = "gfx/leaders/RUS/Portrait_Boris_Savinkov.dds" ideology = national_syndicalism_ideology traits = { leader_of_dark_circles ideological_crusader political_activist political_dancer min_4_prince_of_terror eser_terrorist } }
		}
		remove_ideas = {
			KRN_sailors
			KRN_Dybenko
			KRN_no_military_leader
		}
		every_unit_leader = { limit = { OR = { has_id = 19173 } } set_nationality = REB }
	}
}

# Керенский в сделку не входил
country_event = {
	id = petrograd_commune.76
	title = petrograd_commune.76.t
	desc = petrograd_commune.76.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.76.a
		set_politics = {
			ruling_party = authoritarism
			elections_allowed = no
		}
		set_country_flag = KRN_45_another_desc
		country_event = petrograd_commune.45
	}
}

# Победа Кирилла
country_event = {
	id = petrograd_commune.77
	title = petrograd_commune.77.t
	desc = petrograd_commune.77.desc
	picture = GFX_report_event_cimmerman_telegramm

	is_triggered_only = yes
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.77.a
		set_politics = {
			ruling_party = authoritarism
			elections_allowed = no
		}
		remove_ideas = {
			KRN_sailors
			KRN_Dybenko
			KRN_no_military_leader
			KRN_Dybenko_vs_Kirpichnikov
		}
		add_ideas = KRN_Dybenko_vs_Kirpichnikov
		every_unit_leader = { limit = { OR = { has_id = 19173 } } set_nationality = REB }
	}
}

# Антонов присоединяется к восстанию
country_event = {
	id = petrograd_commune.78
	title = petrograd_commune.78.t
	desc = petrograd_commune.78.desc
	picture = GFX_report_event_cimmerman_telegramm

	trigger = {
		NOT = { has_global_flag = RUS_civil_war_over }
		tag = KRN
		OR = {
			controls_state = 257
			257 = {
				any_neighbor_state = {
					is_controlled_by = KRN
				}
			}
		}
	}
	
	mean_time_to_happen = {
		days = 0
	}
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.78.a
		if = {
			limit = { NOT = { has_template = "Pekhotnaya brigada" } }
			division_template = {
				name = "Pekhotnaya brigada"
				regiments = {
					militia = { x = 0 y = 0 }
					militia = { x = 0 y = 1 }
				}
				is_locked = yes
			}
		}
		257 = {
			create_unit = {
				division = "name = \"Pekhotnaya brigada\" division_template = \"Pekhotnaya brigada\" start_experience_factor = 0.5 start_equipment_factor = 0.75"
				owner = KRN
			}
			create_unit = {
				division = "name = \"Pekhotnaya brigada\" division_template = \"Pekhotnaya brigada\" start_experience_factor = 0.5 start_equipment_factor = 0.75"
				owner = KRN
			}
			create_unit = {
				division = "name = \"Pekhotnaya brigada\" division_template = \"Pekhotnaya brigada\" start_experience_factor = 0.5 start_equipment_factor = 0.75"
				owner = KRN
			}
			create_unit = {
				division = "name = \"Pekhotnaya brigada\" division_template = \"Pekhotnaya brigada\" start_experience_factor = 0.5 start_equipment_factor = 0.75"
				owner = KRN
			}
			create_unit = {
				division = "name = \"Pekhotnaya brigada\" division_template = \"Pekhotnaya brigada\" start_experience_factor = 0.5 start_equipment_factor = 0.75"
				owner = KRN
			}
		}
		RGR = { every_unit_leader = { limit = { OR = { has_id = 19310 } } set_nationality = KRN } }
	}
}

# Долинин присоединяется к восстанию
country_event = {
	id = petrograd_commune.79
	title = petrograd_commune.79.t
	desc = petrograd_commune.79.desc
	picture = GFX_report_event_cimmerman_telegramm

	trigger = {
		NOT = { has_global_flag = RUS_civil_war_over }
		tag = KRN
		OR = {
			controls_state = 250
			250 = {
				any_neighbor_state = {
					is_controlled_by = KRN
				}
			}
		}
	}
	
	mean_time_to_happen = {
		days = 0
	}
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.79.a
		if = {
			limit = { NOT = { has_template = "Pekhotnaya brigada" } }
			division_template = {
				name = "Pekhotnaya brigada"
				regiments = {
					militia = { x = 0 y = 0 }
					militia = { x = 0 y = 1 }
				}
				is_locked = yes
			}
		}
		250 = {
			create_unit = {
				division = "name = \"Pekhotnaya brigada\" division_template = \"Pekhotnaya brigada\" start_experience_factor = 0.5 start_equipment_factor = 0.75"
				owner = KRN
			}
			create_unit = {
				division = "name = \"Pekhotnaya brigada\" division_template = \"Pekhotnaya brigada\" start_experience_factor = 0.5 start_equipment_factor = 0.75"
				owner = KRN
			}
			create_unit = {
				division = "name = \"Pekhotnaya brigada\" division_template = \"Pekhotnaya brigada\" start_experience_factor = 0.5 start_equipment_factor = 0.75"
				owner = KRN
			}
			create_unit = {
				division = "name = \"Pekhotnaya brigada\" division_template = \"Pekhotnaya brigada\" start_experience_factor = 0.5 start_equipment_factor = 0.75"
				owner = KRN
			}
			create_unit = {
				division = "name = \"Pekhotnaya brigada\" division_template = \"Pekhotnaya brigada\" start_experience_factor = 0.5 start_equipment_factor = 0.75"
				owner = KRN
			}
		}
		RGR = { every_unit_leader = { limit = { OR = { has_id = 19318 } } set_nationality = KRN } }
	}
}

# Токмаков присоединяется к восстанию
country_event = {
	id = petrograd_commune.80
	title = petrograd_commune.80.t
	desc = petrograd_commune.80.desc
	picture = GFX_report_event_cimmerman_telegramm

	trigger = {
		NOT = { has_global_flag = RUS_civil_war_over }
		tag = KRN
		OR = {
			controls_state = 260
			260 = {
				any_neighbor_state = {
					is_controlled_by = KRN
				}
			}
		}
	}
	
	mean_time_to_happen = {
		days = 0
	}
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.80.a
		if = {
			limit = { NOT = { has_template = "Pekhotnaya brigada" } }
			division_template = {
				name = "Pekhotnaya brigada"
				regiments = {
					militia = { x = 0 y = 0 }
					militia = { x = 0 y = 1 }
				}
				is_locked = yes
			}
		}
		260 = {
			create_unit = {
				division = "name = \"Pekhotnaya brigada\" division_template = \"Pekhotnaya brigada\" start_experience_factor = 0.5 start_equipment_factor = 0.75"
				owner = KRN
			}
			create_unit = {
				division = "name = \"Pekhotnaya brigada\" division_template = \"Pekhotnaya brigada\" start_experience_factor = 0.5 start_equipment_factor = 0.75"
				owner = KRN
			}
			create_unit = {
				division = "name = \"Pekhotnaya brigada\" division_template = \"Pekhotnaya brigada\" start_experience_factor = 0.5 start_equipment_factor = 0.75"
				owner = KRN
			}
			create_unit = {
				division = "name = \"Pekhotnaya brigada\" division_template = \"Pekhotnaya brigada\" start_experience_factor = 0.5 start_equipment_factor = 0.75"
				owner = KRN
			}
			create_unit = {
				division = "name = \"Pekhotnaya brigada\" division_template = \"Pekhotnaya brigada\" start_experience_factor = 0.5 start_equipment_factor = 0.75"
				owner = KRN
			}
		}
		RGR = { every_unit_leader = { limit = { OR = { has_id = 19311 } } set_nationality = KRN } }
	}
}

# Украинские атаманы присоединяется к восстанию
country_event = {
	id = petrograd_commune.81
	title = petrograd_commune.81.t
	desc = petrograd_commune.81.desc
	picture = GFX_report_event_cimmerman_telegramm

	trigger = {
		NOT = { has_global_flag = RUS_civil_war_over }
		tag = KRN
		221 = {
			is_owned_by = RUS
			OR = {
				any_neighbor_state = { is_controlled_by = KRN }
				is_controlled_by = KRN
			}
		}
	}
	
	mean_time_to_happen = {
		days = 0
	}
	
	fire_only_once = yes
	
	hidden = yes

	option = {
		name = petrograd_commune.81.a
		load_oob = FRT_1918
		load_oob = GRG_1918
		if = {
			limit = { NOT = { has_template = "Pekhotnaya brigada" } }
			division_template = {
				name = "Pekhotnaya brigada"
				regiments = {
					militia = { x = 0 y = 0 }
					militia = { x = 0 y = 1 }
				}
				is_locked = yes
			}
		}
		random_state = {
			limit = { region = 1 OR = { is_controlled_by = RUS is_controlled_by = KRN } }
			create_unit = {
				division = "name = \"Pekhotnaya brigada\" division_template = \"Pekhotnaya brigada\" start_experience_factor = 0.5 start_equipment_factor = 0.75"
				owner = KRN
			}
			create_unit = {
				division = "name = \"Pekhotnaya brigada\" division_template = \"Pekhotnaya brigada\" start_experience_factor = 0.5 start_equipment_factor = 0.75"
				owner = KRN
			}
			create_unit = {
				division = "name = \"Pekhotnaya brigada\" division_template = \"Pekhotnaya brigada\" start_experience_factor = 0.5 start_equipment_factor = 0.75"
				owner = KRN
			}
			create_unit = {
				division = "name = \"Pekhotnaya brigada\" division_template = \"Pekhotnaya brigada\" start_experience_factor = 0.5 start_equipment_factor = 0.75"
				owner = KRN
			}
			create_unit = {
				division = "name = \"Pekhotnaya brigada\" division_template = \"Pekhotnaya brigada\" start_experience_factor = 0.5 start_equipment_factor = 0.75"
				owner = KRN
			}
		}
		RGR = { every_unit_leader = { limit = { OR = { has_id = 77487 has_id = 19317 has_id = 19316 has_id = 19314 has_id = 19313 } } set_nationality = KRN } }
		FRT = { every_unit_leader = { limit = { OR = { has_id = 77418 has_id = 77419 has_id = 77420 has_id = 77421 has_id = 77422 } } set_nationality = KRN } }
	}
}

# Украинские атаманы удаляются, если потеряна Украины
country_event = {
	id = petrograd_commune.82
	title = petrograd_commune.82.t
	desc = petrograd_commune.82.desc
	picture = GFX_report_event_cimmerman_telegramm

	trigger = {
		NOT = { has_global_flag = RUS_civil_war_over }
		tag = KRN
		any_unit_leader = { OR = { has_id = 77487 has_id = 19317 has_id = 19316 has_id = 19314 has_id = 19313 has_id = 77418 has_id = 77419 has_id = 77420 has_id = 77421 has_id = 77422 } }
		221 = {
			NOT = {
				is_owned_by = RUS
				is_owned_by = KRN
			}
		}
	}
	
	mean_time_to_happen = {
		days = 0
	}
	
	fire_only_once = yes

	option = {
		name = petrograd_commune.82.a
		every_unit_leader = { limit = { OR = { has_id = 77487 has_id = 19317 has_id = 19316 has_id = 19314 has_id = 19313 } } set_nationality = RGR }
		every_unit_leader = { limit = { OR = { has_id = 77418 has_id = 77419 has_id = 77420 has_id = 77421 has_id = 77422 } } set_nationality = FRT }
	}
}

# Переговоры о мире с Коммуной (Россия)
country_event = {
	id = petrograd_commune.91
	title = petrograd_commune.91.t
	desc = petrograd_commune.91.desc
	picture = GFX_report_event_februrary_revolution

	trigger = {
		tag = RUS
		has_global_flag = RUS_monarchy_Petrograd_commune_civil_war
		has_war_with = KRN
		NOT = {
			has_government = authoritarism
			has_government = despotism
			has_government = fascism
		}
		KRN = {
			NOT = {
				has_government = radical_socialism
				has_government = communism
				AND = {
					has_government = national_syndicalism
					has_country_leader = { name = "Pavel Dybenko" ruling_only = yes }
				}
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	fire_only_once = yes
	
	option = {
		name = petrograd_commune.91.a
		KRN = { country_event = { id = petrograd_commune.92 days = 1 } }
		ai_chance = { factor = 1 }
	}
	option = {
		name = petrograd_commune.91.b
		add_war_support = -0.03
		add_stability = -0.03
		ai_chance = { factor = 0 }
	}
}

# Предложение России (Коммуна)
country_event = {
	id = petrograd_commune.92
	title = petrograd_commune.92.t
	desc = {
		text = petrograd_commune.92.desc
		trigger = {
			RUS = { NOT = { has_completed_focus = RUS_mon_on_w_Great_Zemsky_Sobor } }
		}
	}
	desc = {
		text = petrograd_commune.92.desc_1
		trigger = {
			RUS = { has_completed_focus = RUS_mon_on_w_Great_Zemsky_Sobor }
		}
	}
	picture = GFX_report_event_februrary_revolution

	trigger = {
		NOT = {
			has_government = radical_socialism
			has_government = communism
			has_government = despotism
		}
	}
	
	is_triggered_only = yes
	
	# Выдвинуть умеренные требования (коалиционное правительство как после Апреля)
	option = {
		name = petrograd_commune.92.a
		KRN = { country_event = { id = petrograd_commune.93 days = 1 } }
		ai_chance = { factor = 1 }
	}
	# Выдвинуть более жёсткие требования, то есть Керенский станет председателем Временного правительства (как после Июля)
	option = {
		trigger = { has_government = social_liberalism }
		name = petrograd_commune.92.b
		KRN = { country_event = { id = petrograd_commune.94 days = 1 } }
		ai_chance = { factor = 1 }
	}
	# Отказаться
	option = {
		name = petrograd_commune.92.c
		KRN = { country_event = { id = petrograd_commune.95 days = 1 } }
		ai_chance = { factor = 0 }
	}
}

country_event = {
	id = petrograd_commune.93
	title = petrograd_commune.93.t
	desc = petrograd_commune.93.desc
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes

	option = {
		name = petrograd_commune.93.a
		hidden_effect = {
			KRN = {
				retire_ideology_leader = radical_socialism
				retire_ideology_leader = communism
				retire_ideology_leader = social_democracy
				retire_ideology_leader = social_liberalism
				retire_ideology_leader = market_liberalism
				retire_ideology_leader = authoritarism
				retire_ideology_leader = despotism
				retire_ideology_leader = national_syndicalism
				remove_ideas = {
					RUS_red_guards
					RGR_punitive_forces_idea
					RUS_military_commissars_idea
					RGR_supply_bonus
					KRN_food_rationing_idea
					KRN_red_terror_idea
					KRN_militants_of_revolution_idea
				}
				drop_cosmetic_tag = yes
				every_state = {
					limit = { is_core_of = KRN }
					remove_core_of = KRN
				}
			}
		}
		RUS = {
			add_popularity = {
				ideology = radical_socialism
				popularity = 0.05
			}
			add_popularity = {
				ideology = communism
				popularity = 0.05
			}
			add_popularity = {
				ideology = social_liberalism
				popularity = 0.1
			}
			annex_country = { target = KRN transfer_troops = yes }
			annex_country = { target = SIB transfer_troops = yes }
			annex_country = { target = PRM transfer_troops = yes }
			annex_country = { target = TRK transfer_troops = yes }
			annex_country = { target = CPG transfer_troops = yes }
			drop_cosmetic_tag = yes
			event_target:red_FIN = { annex_country = { target = FIN transfer_troops = yes } }
			clr_global_flag = RUS_monarchy_Petrograd_commune_civil_war
			clr_country_flag = new_temp_capital
			clr_country_flag = RUS_Order_N_1
			if = {
				limit = { has_idea = neutral_foreign_policy_law }
				add_ideas = realpolitic_policy_law
			}
			
			add_popularity = { ideology = authoritarism popularity = -1 }
			add_popularity = { ideology = fascism popularity = -0.05 }
			add_popularity = { ideology = market_liberalism popularity = 0.05 }
			add_stability = 0.05
			add_political_power = 150
			remove_tsar_regime_unit_leaders = yes
			monarchy_fall = yes
			hidden_effect = {
				end_puppet = KHI
				end_puppet = BUK
				KHI = { leave_faction = yes }
				BUK = { leave_faction = yes }
				if = {
					limit = { KHI = { has_war = yes } }
					every_country = {
						limit = { OR = { tag = GER tag = AUH tag = SNS tag = TRG tag = TUR is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = SNS tag = SNS is_in_faction_with = TRG tag = TRG is_in_faction_with = OAF tag = OAF is_in_faction_with = TUR AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
						white_peace = KHI
					}
				}
				if = {
					limit = { BUK = { has_war = yes } }
					every_country = {
						limit = { OR = { tag = GER tag = AUH tag = SNS tag = TRG tag = TUR is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = SNS tag = SNS is_in_faction_with = TRG tag = TRG is_in_faction_with = OAF tag = OAF is_in_faction_with = TUR AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
						white_peace = BUK
					}
				}
			}
			set_country_flag = RUS_provisional_government_created
			load_focus_tree = Russia_Provisional_government_focus
			add_ideas = RUS_dvoevlastie_1
			RUS_Order_N_1_fall_not_0 = yes
			remove_ideas = draft_dodging_2
			remove_ideas = draft_dodging_3
			remove_ideas = strikes_1
			remove_ideas = strikes_2
			remove_ideas = strikes_3
			remove_ideas = mutiny_1
			remove_ideas = mutiny_2
			remove_ideas = mutiny_3
			clr_country_flag = crisis_in_progress
			clr_country_flag = crisis_solution_in_progress
		}
		hidden_effect = { news_event = { id = news_n.43 hours = 12 } }
		if = {
			limit = { KRN = { is_ai = no } }
			RUS = { change_tag_from = KRN }
		}
	}
}

country_event = {
	id = petrograd_commune.94
	title = petrograd_commune.94.t
	desc = petrograd_commune.94.desc
	picture = GFX_report_event_rus_chinovniki
	
	is_triggered_only = yes

	option = {
		name = petrograd_commune.94.a
		hidden_effect = {
			KRN = {
				retire_ideology_leader = radical_socialism
				retire_ideology_leader = communism
				retire_ideology_leader = social_democracy
				retire_ideology_leader = social_liberalism
				retire_ideology_leader = market_liberalism
				retire_ideology_leader = authoritarism
				retire_ideology_leader = despotism
				retire_ideology_leader = national_syndicalism
				remove_ideas = {
					RUS_red_guards
					RGR_punitive_forces_idea
					RUS_military_commissars_idea
					RGR_supply_bonus
					KRN_food_rationing_idea
					KRN_red_terror_idea
					KRN_militants_of_revolution_idea
				}
				drop_cosmetic_tag = yes
				every_state = {
					limit = { is_core_of = KRN }
					remove_core_of = KRN
				}
			}
		}
		RUS = {
			add_popularity = {
				ideology = radical_socialism
				popularity = 0.05
			}
			add_popularity = {
				ideology = communism
				popularity = 0.05
			}
			add_popularity = {
				ideology = social_liberalism
				popularity = 0.1
			}
			annex_country = { target = KRN transfer_troops = yes }
			annex_country = { target = SIB transfer_troops = yes }
			annex_country = { target = PRM transfer_troops = yes }
			annex_country = { target = TRK transfer_troops = yes }
			annex_country = { target = CPG transfer_troops = yes }
			drop_cosmetic_tag = yes
			event_target:red_FIN = { annex_country = { target = FIN transfer_troops = yes } }
			clr_global_flag = RUS_monarchy_Petrograd_commune_civil_war
			clr_country_flag = new_temp_capital
			clr_country_flag = RUS_Order_N_1
			if = {
				limit = { has_idea = neutral_foreign_policy_law }
				add_ideas = realpolitic_policy_law
			}
			
			add_popularity = { ideology = authoritarism popularity = -1 }
			add_popularity = { ideology = fascism popularity = -0.05 }
			add_popularity = { ideology = market_liberalism popularity = 0.05 }
			add_stability = 0.05
			add_political_power = 150
			remove_tsar_regime_unit_leaders = yes
			monarchy_fall = yes
			hidden_effect = {
				end_puppet = KHI
				end_puppet = BUK
				KHI = { leave_faction = yes }
				BUK = { leave_faction = yes }
				if = {
					limit = { KHI = { has_war = yes } }
					every_country = {
						limit = { OR = { tag = GER tag = AUH tag = SNS tag = TRG tag = TUR is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = SNS tag = SNS is_in_faction_with = TRG tag = TRG is_in_faction_with = OAF tag = OAF is_in_faction_with = TUR AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
						white_peace = KHI
					}
				}
				if = {
					limit = { BUK = { has_war = yes } }
					every_country = {
						limit = { OR = { tag = GER tag = AUH tag = SNS tag = TRG tag = TUR is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = SNS tag = SNS is_in_faction_with = TRG tag = TRG is_in_faction_with = OAF tag = OAF is_in_faction_with = TUR AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
						white_peace = BUK
					}
				}
			}
			set_country_flag = RUS_provisional_government_created
			load_focus_tree = Russia_Provisional_government_focus
			RUS_Order_N_1_fall_not_0 = yes
			remove_ideas = draft_dodging_2
			remove_ideas = draft_dodging_3
			remove_ideas = strikes_1
			remove_ideas = strikes_2
			remove_ideas = strikes_3
			remove_ideas = mutiny_1
			remove_ideas = mutiny_2
			remove_ideas = mutiny_3
			clr_country_flag = crisis_in_progress
			clr_country_flag = crisis_solution_in_progress
			
			set_politics = {
				ruling_party = social_liberalism
				elections_allowed = no
			}
			add_popularity = {
				ideology = social_liberalism
				popularity = 0.2
			}
			add_popularity = {
				ideology = social_conservatism
				popularity = -0.1
			}
			add_popularity = {
				ideology = market_liberalism
				popularity = -0.1
			}
			create_country_leader = {
				name = "Alexandr Kerensky"
				desc = RUS_Alexandr_Kerensky_DESC
				picture = "gfx/leaders/RUS/Portrait_Alexandr_Kerensky.dds"
				ideology = social_liberalism_ideology
				traits = { political_dancer }
			}
			remove_ideas_with_trait = head_of_government_trait
			remove_ideas_with_trait = economy_minister_trait
			remove_ideas_with_trait = security_minister_trait
			remove_ideas_with_trait = head_of_intel_trait
			add_ideas = {
				Alexandr_Kerensky_1
				Sergey_Prokopovich_3
				Nikolay_Avksentiev_4
				Alexandr_Zarudny_5
			}
		}
		hidden_effect = { news_event = { id = news_n.43 hours = 12 } }
		if = {
			limit = { KRN = { is_ai = no } }
			RUS = { change_tag_from = KRN }
		}
	}
	#Отказ
	option = {
		name = petrograd_commune.94.b
		add_war_support = -0.03
		add_stability = -0.03
		KRN = { country_event = { id = petrograd_commune.96 days = 1 } }
	}
}

# Отказ Коммуны (Россия)
country_event = {
	id = petrograd_commune.95
	title = petrograd_commune.95.t
	desc = petrograd_commune.95.desc
	picture = GFX_report_event_rus_bronevik
	
	is_triggered_only = yes

	option = {
		name = petrograd_commune.95.a
		add_stability = 0.03
		add_war_support = 0.03
	}
}

# Отказ России (Коммуна)
country_event = {
	id = petrograd_commune.96
	title = petrograd_commune.96.t
	desc = petrograd_commune.96.desc
	picture = GFX_report_event_rus_bronevik
	
	is_triggered_only = yes

	option = {
		name = petrograd_commune.96.a
		add_stability = 0.03
		add_war_support = 0.03
	}
}


# Победа России над Коммуной (Россия)
country_event = {
	id = petrograd_commune.101
	title = petrograd_commune.101.t
	desc = petrograd_commune.101.desc
	picture = GFX_report_event_rus_fevral
	
	trigger = {
		tag = RUS
		has_global_flag = RUS_monarchy_Petrograd_commune_civil_war
		OR = {
			AND = {
				KRN = { has_capitulated = yes }
				has_war_with = KRN
			}
			KRN = { exists = no }
			AND = {
				NOT = { has_war_with = KRN }
				KRN = { is_subject = no }
			}
			KRN = { is_subject = yes }
		}
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	immediate = {
		hidden_effect = {
			clr_global_flag = RUS_monarchy_Petrograd_commune_civil_war
			KRN = {
				retire_ideology_leader = radical_socialism
				retire_ideology_leader = communism
				retire_ideology_leader = social_democracy
				retire_ideology_leader = social_liberalism
				retire_ideology_leader = market_liberalism
				retire_ideology_leader = authoritarism
				retire_ideology_leader = despotism
				retire_ideology_leader = national_syndicalism
				remove_ideas = {
					RUS_red_guards
					RGR_punitive_forces_idea
					RUS_military_commissars_idea
					RGR_supply_bonus
					KRN_food_rationing_idea
					KRN_red_terror_idea
					KRN_militants_of_revolution_idea
				}
				drop_cosmetic_tag = yes
				every_state = {
					limit = { is_core_of = KRN }
					remove_core_of = KRN
					RUS = { transfer_state = PREV }
				}
			}
			annex_country = { target = KRN transfer_troops = no }
			clr_country_flag = new_temp_capital
			clr_country_flag = RUS_Order_N_1
		}
	}
	
	option = {
		name = petrograd_commune.101.a
		if = {
			limit = { has_country_leader = { name = "Alexandra Romanova" ruling_only = yes } }
			add_country_leader_trait = valkyrie_of_the_counterrevolution
			else = { add_country_leader_trait = executioner_of_revolutionaries }
		}
		if = {
			limit = { has_idea = neutral_foreign_policy_law }
			add_ideas = realpolitic_policy_law
		}
		if = {
			limit = { has_country_flag = new_temp_capital }
			set_capital = { state = 195 remember_old_capital = no }
		}
	}
}

# Победа Коммуны
country_event = {
	id = petrograd_commune.102
	title = petrograd_commune.102.t
	desc = petrograd_commune.102.desc
	picture = GFX_report_event_rus_fevral
	
	trigger = {
		tag = KRN
		has_global_flag = RUS_monarchy_Petrograd_commune_civil_war
		RUS = {
			OR = {
				exists = no
				has_capitulated = yes
				AND = {
					is_subject = yes
					NOT = { has_war_with = KRN }
				}
			}
		}
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = petrograd_commune.102.a
		hidden_effect = {
			clr_global_flag = RUS_monarchy_Petrograd_commune_civil_war
			KRN = {
			 	retire_ideology_leader = radical_socialism
				retire_ideology_leader = communism
				retire_ideology_leader = social_democracy
				retire_ideology_leader = social_liberalism
				retire_ideology_leader = market_liberalism
				retire_ideology_leader = authoritarism
				retire_ideology_leader = despotism
				retire_ideology_leader = national_syndicalism
				remove_ideas = {
					RUS_red_guards
					RGR_punitive_forces_idea
					RUS_military_commissars_idea
					RGR_supply_bonus
					KRN_food_rationing_idea
					KRN_red_terror_idea
					KRN_militants_of_revolution_idea
				}
				drop_cosmetic_tag = yes
				every_state = {
					limit = { is_core_of = KRN }
					remove_core_of = KRN
					RUS = { transfer_state = PREV }
				}
			}
			RUS = {
				every_country = {
					limit = { OR = { tag = DON tag = BKL tag = KUB tag = OCH tag = NRR tag = RVA } has_war_with = KRN }
					declare_war_on = { target = RUS type = annex_everything }
				}
			}
		}
		RUS = {
			hidden_effect = { OVERLORD = { end_puppet = PREV } }
			add_popularity = {
				ideology = radical_socialism
				popularity = 0.15
			}
			add_popularity = {
				ideology = communism
				popularity = 0.15
			}
			add_popularity = {
				ideology = social_liberalism
				popularity = 0.3
			}
			if = {
				limit = { has_country_flag = RUS_monarchy_not_fall }
				monarchy_fall = yes
				remove_tsar_regime_unit_leaders = yes
			}
			annex_country = { target = KRN transfer_troops = yes }
			annex_country = { target = SIB transfer_troops = yes }
			annex_country = { target = PRM transfer_troops = yes }
			annex_country = { target = TRK transfer_troops = yes }
			annex_country = { target = CPG transfer_troops = yes }
			drop_cosmetic_tag = yes
			event_target:red_FIN = { annex_country = { target = FIN transfer_troops = yes } }
			clr_global_flag = RUS_monarchy_Petrograd_commune_civil_war
			clr_country_flag = new_temp_capital
			clr_country_flag = RUS_Order_N_1
			if = {
				limit = { has_idea = neutral_foreign_policy_law }
				add_ideas = realpolitic_policy_law
			}
			
			add_popularity = {
				ideology = social_conservatism
				popularity = -1
			}
			add_popularity = {
				ideology = fascism
				popularity = -1
			}
			add_popularity = {
				ideology = market_liberalism
				popularity = -0.1
			}
			add_popularity = {
				ideology = despotism
				popularity = -0.2
			}
			add_popularity = { ideology = authoritarism popularity = -1 }
			add_popularity = { ideology = fascism popularity = -0.05 }
			add_stability = 0.05
			add_political_power = 150
			remove_tsar_regime_unit_leaders = yes
			monarchy_fall = yes
			hidden_effect = {
				end_puppet = KHI
				end_puppet = BUK
				KHI = { leave_faction = yes }
				BUK = { leave_faction = yes }
				if = {
					limit = { KHI = { has_war = yes } }
					every_country = {
						limit = { OR = { tag = GER tag = AUH tag = SNS tag = TRG tag = TUR is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = SNS tag = SNS is_in_faction_with = TRG tag = TRG is_in_faction_with = OAF tag = OAF is_in_faction_with = TUR AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
						white_peace = KHI
					}
				}
				if = {
					limit = { BUK = { has_war = yes } }
					every_country = {
						limit = { OR = { tag = GER tag = AUH tag = SNS tag = TRG tag = TUR is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = SNS tag = SNS is_in_faction_with = TRG tag = TRG is_in_faction_with = OAF tag = OAF is_in_faction_with = TUR AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
						white_peace = BUK
					}
				}
			}
			RUS_Order_N_1_fall_not_0 = yes
			clr_country_flag = RUS_Order_N_1
			remove_ideas = draft_dodging_2
			remove_ideas = draft_dodging_3
			remove_ideas = strikes_1
			remove_ideas = strikes_2
			remove_ideas = strikes_3
			remove_ideas = mutiny_1
			remove_ideas = mutiny_2
			remove_ideas = mutiny_3
			clr_country_flag = crisis_in_progress
			clr_country_flag = crisis_solution_in_progress
			
			set_country_flag = RUS_cossacks_were_disbanded
			if = {
				limit = { KRN = { has_government = social_liberalism } }
				create_country_leader = {
					name = "Alexandr Kerensky"
					desc = RUS_Alexandr_Kerensky_DESC
					picture = "gfx/leaders/RUS/Portrait_Alexandr_Kerensky.dds"
					ideology = social_liberalism_ideology
					traits = { political_dancer }
				}
				set_politics = {
					ruling_party = social_liberalism
					elections_allowed = no
				}
				remove_ideas_with_trait = head_of_government_trait
				remove_ideas_with_trait = economy_minister_trait
				remove_ideas_with_trait = security_minister_trait
				remove_ideas_with_trait = head_of_intel_trait
				add_ideas = {
					Alexandr_Kerensky_1
					Sergey_Prokopovich_3
					Nikolay_Avksentiev_4
					Alexandr_Zarudny_5
				}
				set_country_flag = RUS_provisional_government_created
				load_focus_tree = Russia_Provisional_government_focus
			}
			else_if = {
				limit = { KRN = { has_government = radical_socialism } }
				set_country_flag = legitimized_bolsheviks
				bolsheviks_victory = yes
				add_red_unit_leaders = yes
				set_politics = {
					ruling_party = radical_socialism
					elections_allowed = no
				}
				add_popularity = {
					ideology = communism
					popularity = 0.1
				}
				add_popularity = {
					ideology = radical_socialism
					popularity = 0.2
				}
			}
			else_if = {
				limit = { KRN = { has_government = communism } }
				set_country_flag = legitimized_bolsheviks
				bolsheviks_victory = yes
				add_red_unit_leaders = yes
				create_country_leader = {
					name = "Alexandr Shlyapnikov"
					desc = RUS_Alexandr_Shlyapnikov_DESC
					picture="gfx/leaders/SOV/Portrait_Alexandr_Shlyapnikov.dds"
					expire="1935.1.1"
					ideology = leninism
					traits={ }
				}
				set_politics = {
					ruling_party = communism
					elections_allowed = no
				}
				add_popularity = {
					ideology = communism
					popularity = 0.2
				}
			}
			else_if = {
				limit = { KRN = { has_government = national_syndicalism has_country_leader = { name = "Pavel Dybenko" ruling_only = yes } } }
				set_country_flag = legitimized_bolsheviks
				bolsheviks_victory = yes
				add_red_unit_leaders = yes
				create_country_leader = {
					name = "Pavel Dybenko"
					desc = SOV_Pavel_Dybenko_DESC
					picture = "gfx/leaders/SOV/Portrait_Pavel_Dybenko.dds"
					expire = "1935.1.1"
					ideology = national_bolshevism_ideology
					traits = { dictator father_to_the_sailors }
				}
				set_politics = {
					ruling_party = national_syndicalism
					elections_allowed = no
				}
				add_popularity = {
					ideology = communism
					popularity = 0.2
				}
				add_popularity = {
					ideology = national_syndicalism
					popularity = 0.3
				}
			}
			else_if = {
				limit = { KRN = { has_government = national_syndicalism has_country_leader = { name = "Boris Savinkov" ruling_only = yes } } }
				create_country_leader = { name = "Boris Savinkov" desc = RUS_Boris_Savinkov_DESC picture = "gfx/leaders/RUS/Portrait_Boris_Savinkov.dds" ideology = national_syndicalism_ideology traits = { leader_of_dark_circles ideological_crusader political_activist political_dancer min_4_prince_of_terror eser_terrorist } }
				set_politics = {
					ruling_party = national_syndicalism
					elections_allowed = no
				}
				set_party_name = { ideology = social_democracy long_name = KRN_market_liberalism_party_long name = KRN_market_liberalism_party }
				remove_ideas_with_trait = head_of_government_trait
				remove_ideas_with_trait = economy_minister_trait
				remove_ideas_with_trait = security_minister_trait
				remove_ideas_with_trait = head_of_intel_trait
				add_ideas = {
					Alexandr_Kerensky_1
					Sergey_Prokopovich_3
					Nikolay_Avksentiev_4
					Alexandr_Zarudny_5
				}
				set_country_flag = RUS_provisional_government_created
				load_focus_tree = Russia_Provisional_government_focus
			}
			else_if = {
				limit = { KRN = { has_government = despotism } }
				create_country_leader = {
					name = "Timofey Kirpichnikov"
					desc = SOV_Timofey_Kirpichnikov_DESC
					picture = "gfx/leaders/RUS/Portrait_Timofey_Kirpichnikov.dds"
					expire = "1935.1.1"
					ideology = despotism_ideology
					traits = { dictator }
				}
				set_politics = {
					ruling_party = despotism
					elections_allowed = no
				}
				set_party_name = { ideology = social_democracy long_name = KRN_market_liberalism_party_long name = KRN_market_liberalism_party }
				remove_ideas_with_trait = head_of_government_trait
				remove_ideas_with_trait = economy_minister_trait
				remove_ideas_with_trait = security_minister_trait
				remove_ideas_with_trait = head_of_intel_trait
				add_ideas = {
					Alexandr_Kerensky_1
					Sergey_Prokopovich_3
					Nikolay_Avksentiev_4
					Alexandr_Zarudny_5
				}
				set_country_flag = RUS_provisional_government_created
				load_focus_tree = Russia_Provisional_government_focus
			}
			else_if = {
				limit = { KRN = { has_government = market_liberalism } }
				create_country_leader = {
					name = "Nikolay Chaikovsky"
					desc = RUS_Nikolay_Chaikovsky_DESC
					picture = "gfx/leaders/RUS/Portrait_Nikolay_Chaikovsky.dds"
					expire="1935.1.1"
					ideology = social_democracy_ideology
					traits = {  }
				}
				set_politics = {
					ruling_party = social_democracy
					elections_allowed = no
				}
				add_popularity = {
					ideology = social_democracy
					popularity = 0.2
				}
				set_party_name = { ideology = social_democracy long_name = KRN_market_liberalism_party_long name = KRN_market_liberalism_party }
				remove_ideas_with_trait = head_of_government_trait
				remove_ideas_with_trait = economy_minister_trait
				remove_ideas_with_trait = security_minister_trait
				remove_ideas_with_trait = head_of_intel_trait
				add_ideas = {
					Alexandr_Kerensky_1
					Sergey_Prokopovich_3
					Nikolay_Avksentiev_4
					Alexandr_Zarudny_5
				}
				set_country_flag = RUS_provisional_government_created
				load_focus_tree = Russia_Provisional_government_focus
			}
			else_if = {
				limit = { KRN = { has_government = social_democracy } }
				create_country_leader = {
					name = "Nikolay Chkheidze"
					desc = GEO_Nikolay_Chkheidze_DESC
					picture = "gfx/leaders/GEO/Portrait_Nikolay_Chkheidze.dds"
					expire = "1935.1.1"
					ideology = social_democracy_ideology
					traits = {  }
				}
				set_politics = {
					ruling_party = social_democracy
					elections_allowed = no
				}
				add_popularity = {
					ideology = social_democracy
					popularity = 0.2
				}
				remove_ideas_with_trait = head_of_government_trait
				remove_ideas_with_trait = economy_minister_trait
				remove_ideas_with_trait = security_minister_trait
				remove_ideas_with_trait = head_of_intel_trait
				add_ideas = {
					Alexandr_Kerensky_1
					Sergey_Prokopovich_3
					Nikolay_Avksentiev_4
					Alexandr_Zarudny_5
				}
				set_country_flag = RUS_provisional_government_created
				load_focus_tree = Russia_Provisional_government_focus
			}
			else_if = {
				limit = { KRN = { has_government = authoritarism } }
				create_country_leader = {
					name = "Kirill Vladimirovich Romanov"
					desc = SOV_Kirill_Vladimirovich_DESC
					picture = "gfx/leaders/RUS/Portrait_Kirill_Vladimirovich.dds"
					ideology = monarchism
					traits = { rouge_pretender inexperienced_imperialist red_prince }
				}
				set_politics = {
					ruling_party = authoritarism
					elections_allowed = no
				}
				add_popularity = {
					ideology = authoritarism
					popularity = 0.3
				}
				remove_ideas_with_trait = head_of_government_trait
				remove_ideas_with_trait = economy_minister_trait
				remove_ideas_with_trait = security_minister_trait
				remove_ideas_with_trait = head_of_intel_trait
				add_ideas = {
					Alexandr_Kerensky_1
					Sergey_Prokopovich_3
					Nikolay_Avksentiev_4
					Alexandr_Zarudny_5
				}
				set_country_flag = RUS_provisional_government_created
				load_focus_tree = Russia_Provisional_government_focus
			}
			else = {
				set_politics = {
					ruling_party = social_democracy
					elections_allowed = no
				}
				add_popularity = {
					ideology = social_democracy
					popularity = 0.2
				}
				remove_ideas_with_trait = head_of_government_trait
				remove_ideas_with_trait = economy_minister_trait
				remove_ideas_with_trait = security_minister_trait
				remove_ideas_with_trait = head_of_intel_trait
				add_ideas = {
					Alexandr_Kerensky_1
					Sergey_Prokopovich_3
					Nikolay_Avksentiev_4
					Alexandr_Zarudny_5
				}
				set_country_flag = RUS_provisional_government_created
				load_focus_tree = Russia_Provisional_government_focus
			}
		}
		if = {
			limit = { KRN = { is_ai = no } }
			RUS = { change_tag_from = KRN }
		}
	}
}

country_event = {
	id = petrograd_commune.103
	title = petrograd_commune.103.t
	desc = {
		text = petrograd_commune.103.desc
		trigger = { tag = KRN }
	}
	desc = {
		text = petrograd_commune.103.desc_1
		trigger = { NOT = { tag = KRN } }
	}
	picture = GFX_report_event_rus_chinovniki
	
	is_triggered_only = yes
	
	trigger = {
		RUS = { NOT = { controls_state = 219 } }
	}

	option = {
		name = petrograd_commune.103.a
		if = {
			limit = { NOT = { tag = KRN } }
			hidden_effect = {
				KRN = {
					retire_ideology_leader = radical_socialism
					retire_ideology_leader = communism
					retire_ideology_leader = social_democracy
					retire_ideology_leader = social_liberalism
					retire_ideology_leader = market_liberalism
					retire_ideology_leader = authoritarism
					retire_ideology_leader = despotism
					retire_ideology_leader = national_syndicalism
					remove_ideas = {
						RUS_red_guards
						RGR_punitive_forces_idea
						RUS_military_commissars_idea
						RGR_supply_bonus
						KRN_food_rationing_idea
						KRN_red_terror_idea
						KRN_militants_of_revolution_idea
					}
					drop_cosmetic_tag = yes
					every_state = {
						limit = { is_core_of = KRN }
						remove_core_of = KRN
					}
				}
			}
			RUS = {
				add_popularity = {
					ideology = radical_socialism
					popularity = 0.05
				}
				add_popularity = {
					ideology = communism
					popularity = 0.05
				}
				add_popularity = {
					ideology = social_liberalism
					popularity = 0.1
				}
				annex_country = { target = KRN transfer_troops = yes }
				annex_country = { target = SIB transfer_troops = yes }
				annex_country = { target = PRM transfer_troops = yes }
				annex_country = { target = TRK transfer_troops = yes }
				annex_country = { target = CPG transfer_troops = yes }
				event_target:red_FIN = { annex_country = { target = FIN transfer_troops = yes } }
				clr_global_flag = RUS_monarchy_Petrograd_commune_civil_war
				if = {
					limit = { has_idea = neutral_foreign_policy_law }
					add_ideas = realpolitic_policy_law
				}
				
				add_popularity = { ideology = authoritarism popularity = -0.2 }
				add_popularity = { ideology = fascism popularity = -0.05 }
				add_popularity = { ideology = market_liberalism popularity = 0.05 }
				add_stability = 0.05
				add_political_power = 150
				remove_tsar_regime_unit_leaders = yes
				monarchy_fall = yes
				hidden_effect = {
					end_puppet = KHI
					end_puppet = BUK
					KHI = { leave_faction = yes }
					BUK = { leave_faction = yes }
					if = {
						limit = { KHI = { has_war = yes } }
						every_country = {
							limit = { OR = { tag = GER tag = AUH tag = SNS tag = TRG tag = TUR is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = SNS tag = SNS is_in_faction_with = TRG tag = TRG is_in_faction_with = OAF tag = OAF is_in_faction_with = TUR AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
							white_peace = KHI
						}
					}
					if = {
						limit = { BUK = { has_war = yes } }
						every_country = {
							limit = { OR = { tag = GER tag = AUH tag = SNS tag = TRG tag = TUR is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = SNS tag = SNS is_in_faction_with = TRG tag = TRG is_in_faction_with = OAF tag = OAF is_in_faction_with = TUR AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
							white_peace = BUK
						}
					}
				}
				set_country_flag = RUS_provisional_government_created
				load_focus_tree = Russia_Provisional_government_focus
				RUS_Order_N_1_fall_not_0 = yes
				remove_ideas = draft_dodging_2
				remove_ideas = draft_dodging_3
				remove_ideas = strikes_1
				remove_ideas = strikes_2
				remove_ideas = strikes_3
				remove_ideas = mutiny_1
				remove_ideas = mutiny_2
				remove_ideas = mutiny_3
				clr_country_flag = crisis_in_progress
				clr_country_flag = crisis_solution_in_progress
				
				set_politics = {
					ruling_party = social_liberalism
					elections_allowed = no
				}
				add_popularity = {
					ideology = social_liberalism
					popularity = 0.2
				}
				add_popularity = {
					ideology = social_conservatism
					popularity = -0.1
				}
				add_popularity = {
					ideology = market_liberalism
					popularity = -0.1
				}
				create_country_leader = {
					name = "Alexandr Kerensky"
					desc = RUS_Alexandr_Kerensky_DESC
					picture = "gfx/leaders/RUS/Portrait_Alexandr_Kerensky.dds"
					ideology = social_liberalism_ideology
					traits = { political_dancer }
				}
				remove_ideas_with_trait = head_of_government_trait
				remove_ideas_with_trait = economy_minister_trait
				remove_ideas_with_trait = security_minister_trait
				remove_ideas_with_trait = head_of_intel_trait
				add_ideas = {
					Alexandr_Kerensky_1
					Sergey_Prokopovich_3
					Nikolay_Avksentiev_4
					Alexandr_Zarudny_5
				}
			}
			hidden_effect = { news_event = { id = news_n.43 hours = 12 } }
			if = {
				limit = { KRN = { is_ai = no } }
				RUS = { change_tag_from = KRN }
			}
			else = {
				FROM = { country_event = petrograd_commune.103 }
			}
		}
	}
}

