###########################
# Russian Civil War Events
###########################

add_namespace = rcw_nc

# Отделение горской республики
country_event = {
	id = rcw_nc.1
	title = rcw_nc.1.t
	desc = rcw_nc.1.desc
	picture = GFX_report_event_sov_redarmy
	
	trigger = {
		has_start_date < 1917.11.7
		NOT = { has_global_flag = RUS_civil_war_over }
		tag = RUS
		OR = {
			MRC = { exists = no }
			MRC = { is_subject_of = ROOT }
		}
		has_country_flag = RUS_Oktober_revolution_fired
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	fire_only_once = yes
	
	option = {
		name = rcw_nc.1.a
		every_state = {
			limit = {
				OR = {
					is_core_of = DAG
					is_core_of = CHC
					is_core_of = OSE
					is_core_of = CBR
					is_core_of = BLK
				}
			}
			add_core_of = MRC
		}
		every_state = {
			limit = {
				OR = {
					state = 821
					state = 1232
					state = 1311
					state = 1315
					state = 1316
					state = 1317
					state = 1278
					state = 827
					state = 828
					state = 921
				}
				is_owned_by = RUS
			}
			MRC = { transfer_state = PREV }
		}
		MRC = {
			add_ideas = neutral_foreign_policy_law
			hidden_effect = {
				every_country = {
					limit = {
						NOT = {
							tag = PREV
							is_any_former_russian_empire_country = yes
							former_russian_empire_baltic_states_country = yes tag = HRB
						}
					}
					set_THIS_country_non_recognize_PREV = yes
				}
			}
			country_event = { id = rcw_nc.2 days = 33 }
			load_oob = MRC_1917
		}
	}
	option = {
		trigger = {
			is_ai = no
		}
		name = rcw_nc.1.b
		every_state = {
			limit = {
				OR = {
					is_core_of = DAG
					is_core_of = CHC
					is_core_of = OSE
					is_core_of = CBR
					is_core_of = BLK
				}
			}
			add_core_of = MRC
		}
		every_state = {
			limit = {
				OR = {
					state = 821
					state = 1232
					state = 1311
					state = 1315
					state = 1316
					state = 1317
					state = 1278
					state = 827
					state = 828
					state = 921
				}
				is_owned_by = RUS
			}
			MRC = { transfer_state = PREV }
		}
		MRC = {
			add_ideas = neutral_foreign_policy_law
			hidden_effect = {
				every_country = {
					limit = {
						NOT = {
							tag = PREV
							is_any_former_russian_empire_country = yes
							former_russian_empire_baltic_states_country = yes tag = HRB
						}
					}
					set_THIS_country_non_recognize_PREV = yes
				}
			}
			country_event = { id = rcw_nc.2 days = 33 }
			load_oob = MRC_1917
		}
		MRC = { change_tag_from = ROOT }
	}
}

# Комиссар-атаман (прибытие Караулова)
country_event = {
	id = rcw_nc.2
	title = rcw_nc.2.t
	desc = rcw_nc.2.desc
	picture = GFX_report_event_sov_redarmy
	
	is_triggered_only = yes
	
	option = {
		name = rcw_nc.2.a
		if = {
			limit = { owns_state = 232 }
			set_capital = { state = 232 }
			else = {
				set_capital = { state = 821 }
			}
		}
		every_owned_state = {
			limit = {
				OR = {
					is_core_of = TCH
					is_core_of = CBR
					is_core_of = BLK
				}
				is_capital = no
			}
			TCH = { transfer_state = PREV }
		}
		TCH = {
			set_capital = { state = 828 }
			add_ideas = neutral_foreign_policy_law
			add_ideas = TCH_vladikavkazian_soviet
			add_ideas = TCH_dvoevlastie
			add_timed_idea = { idea = TCH_soldiers_from_Caucasian_front days = 100 }
			hidden_effect = {
				division_template = {
					name = "Kazachyya brigada"
					regiments = {
						irregular_cavalry = { x = 0 y = 0 }
						irregular_cavalry = { x = 0 y = 1 }
						irregular_cavalry = { x = 0 y = 2 }
					}
				}
			}
			capital_scope = {
				create_unit = {
					division = "name = \"Kazachyya brigada\" division_template = \"Kazachyya brigada\" start_experience_factor = 0.1 start_equipment_factor = 1"
					owner = TCH
				}
				create_unit = {
					division = "name = \"Kazachyya brigada\" division_template = \"Kazachyya brigada\" start_experience_factor = 0.1 start_equipment_factor = 1"
					owner = TCH
				}
				create_unit = {
					division = "name = \"Kazachyya brigada\" division_template = \"Kazachyya brigada\" start_experience_factor = 0.1 start_equipment_factor = 1"
					owner = TCH
				}
			}
			hidden_effect = {
				every_country = {
					limit = {
						NOT = {
							tag = PREV
							is_any_former_russian_empire_country = yes
							former_russian_empire_baltic_states_country = yes tag = HRB
						}
					}
					set_THIS_country_non_recognize_PREV = yes
				}
			}
		}
	}
	option = {
		trigger = {
			is_ai = no
		}
		name = rcw_nc.2.b
		if = {
			limit = { owns_state = 232 }
			set_capital = { state = 232 }
			else = {
				set_capital = { state = 821 }
			}
		}
		every_owned_state = {
			limit = {
				OR = {
					is_core_of = TCH
					is_core_of = CBR
					is_core_of = BLK
				}
			}
			TCH = { transfer_state = PREV }
		}
		TCH = {
			set_capital = { state = 828 }
			add_ideas = neutral_foreign_policy_law
			add_ideas = TCH_vladikavkazian_soviet
			add_ideas = TCH_dvoevlastie
			add_timed_idea = { idea = TCH_soldiers_from_Caucasian_front days = 100 }
			hidden_effect = {
				division_template = {
					name = "Kazachyya brigada"
					regiments = {
						irregular_cavalry = { x = 0 y = 0 }
						irregular_cavalry = { x = 0 y = 1 }
						irregular_cavalry = { x = 0 y = 2 }
					}
				}
			}
			capital_scope = {
				create_unit = {
					division = "name = \"Kazachyya brigada\" division_template = \"Kazachyya brigada\" start_experience_factor = 0.1 start_equipment_factor = 1"
					owner = TCH
				}
				create_unit = {
					division = "name = \"Kazachyya brigada\" division_template = \"Kazachyya brigada\" start_experience_factor = 0.1 start_equipment_factor = 1"
					owner = TCH
				}
				create_unit = {
					division = "name = \"Kazachyya brigada\" division_template = \"Kazachyya brigada\" start_experience_factor = 0.1 start_equipment_factor = 1"
					owner = TCH
				}
				create_unit = {
					division = "name = \"Kazachyya brigada\" division_template = \"Kazachyya brigada\" start_experience_factor = 0.1 start_equipment_factor = 1"
					owner = TCH
				}
				create_unit = {
					division = "name = \"Kazachyya brigada\" division_template = \"Kazachyya brigada\" start_experience_factor = 0.1 start_equipment_factor = 1"
					owner = TCH
				}
			}
			hidden_effect = {
				every_country = {
					limit = {
						NOT = {
							tag = PREV
							is_any_former_russian_empire_country = yes
							former_russian_empire_baltic_states_country = yes tag = HRB
						}
					}
					set_THIS_country_non_recognize_PREV = yes
				}
			}
		}
		TCH = { change_tag_from = ROOT }
	}
}

# Военное положение
country_event = {
	id = rcw_nc.3
	title = rcw_nc.3.t
	desc = rcw_nc.3.desc
	picture = GFX_report_event_sov_redarmy
	
	is_triggered_only = yes
	
	option = {
		name = rcw_nc.3.a
	}
}

# Победа в битве за Грозный
country_event = {
	id = rcw_nc.4
	title = rcw_nc.4.t
	desc = {
		text = rcw_nc.4.desc
		trigger = { tag = MRC }
	}
	desc = {
		text = rcw_nc.4.desc_1
		trigger = { tag = RSR }
	}
	picture = GFX_report_event_sov_redarmy
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			tag = MRC
		}
		name = rcw_nc.4.a
		transfer_state = 232
	}
	option = {
		trigger = {
			tag = RSR
		}
		name = rcw_nc.4.b
	}
}
# Поражение в битве за Грозный
country_event = {
	id = rcw_nc.5
	title = rcw_nc.5.t
	desc = {
		text = rcw_nc.5.desc
		trigger = { tag = MRC }
	}
	desc = {
		text = rcw_nc.5.desc_1
		trigger = { tag = RSR }
	}
	picture = GFX_report_event_sov_redarmy
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			tag = MRC
		}
		name = rcw_nc.5.a
	}
	option = {
		trigger = {
			tag = RSR
		}
		name = rcw_nc.5.b
	}
}
# Народы гор
country_event = {
	id = rcw_nc.6
	title = rcw_nc.6.t
	desc = rcw_nc.6.desc
	picture = GFX_report_event_sov_redarmy
	
	is_triggered_only = yes
	
	option = {
		name = rcw_nc.6.a
		add_ideas = TCH_unpunished_bandit_raids
	}
}
# Прибытие Фронтовиков
country_event = {
	id = rcw_nc.7
	title = rcw_nc.7.t
	desc = {
		text = rcw_nc.7.desc
		trigger = { has_country_flag = TCH_karaulov_will_die }
	}
	desc = {
		text = rcw_nc.7.desc_1
		trigger = { NOT = { has_country_flag = TCH_karaulov_will_die } }
	}
	picture = GFX_report_event_sov_redarmy
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		trigger = {
			has_country_flag = TCH_karaulov_will_die
		}
		name = rcw_nc.7.a
		hidden_effect = {
			division_template = {
				name = "Kazachiy polk"
				regiments = {
					cavalry = { x = 0 y = 0 }
					cavalry = { x = 0 y = 1 }
					cavalry = { x = 0 y = 2 }
				}
			}
		}
		capital_scope = {
			create_unit = {
				division = "name = \"1-y Volgskiy polk Terskogo kazachyego voyska\" division_template = \"Kazachiy polk\" start_experience_factor = 0.1 start_equipment_factor = 1"
				owner = ROOT
			}
		}
		custom_effect_tooltip = rcw_nc_7_tt
		
		clr_country_flag = TCH_karaulov_will_die
		kill_country_leader = yes
		every_unit_leader = { limit = { has_id = 13550 } remove_unit_leader = yes }
		add_ideas = TCH_dysfunctional_government
		country_event = { id = rcw_nc.8 days = 5 }
	}
	option = {
		trigger = {
			NOT = { has_country_flag = TCH_karaulov_will_die }
		}
		name = rcw_nc.7.b
		hidden_effect = {
			division_template = {
				name = "Kazachiy polk"
				regiments = {
					cavalry = { x = 0 y = 0 }
					cavalry = { x = 0 y = 1 }
					cavalry = { x = 0 y = 2 }
				}
			}
		}
		capital_scope = {
			create_unit = {
				division = "name = \"1-y Volgskiy polk Terskogo kazachyego voyska\" division_template = \"Kazachiy polk\" start_experience_factor = 0.1 start_equipment_factor = 1"
				owner = ROOT
			}
		}
		custom_effect_tooltip = rcw_nc_7_tt
	}
}
# Владикавказский погром
country_event = {
	id = rcw_nc.8
	title = rcw_nc.8.t
	desc = rcw_nc.8.desc
	picture = GFX_report_event_sov_redarmy
	
	is_triggered_only = yes
	
	option = {
		name = rcw_nc.8.a
		remove_ideas = TCH_vladikavkazian_soviet
	}
}
# 1-й Съезд трудовых народов Терека
country_event = {
	id = rcw_nc.9
	title = rcw_nc.9.t
	desc = rcw_nc.9.desc
	picture = GFX_report_event_sov_redarmy
	
	is_triggered_only = yes
	
	option = {
		name = rcw_nc.9.a
		add_popularity = {
			ideology = radical_socialism
			popularity = 0.12
		}
		add_popularity = {
			ideology = communism
			popularity = 0.12
		}
		hidden_effect = { country_event = { id = rcw_nc.10 days = 21 } }
	}
}
# 2-й Съезд трудовых народов Терека
country_event = {
	id = rcw_nc.10
	title = rcw_nc.10.t
	desc = {
		text = rcw_nc.10.desc
		trigger = {
			OR = {
				has_idea = TCH_dysfunctional_government
				has_idea = TCH_vladikavkazian_soviet
			}
		}
	}
	desc = {
		text = rcw_nc.10.desc_1
		trigger = {
			NOT = {
				has_idea = TCH_dysfunctional_government
				has_idea = TCH_vladikavkazian_soviet
			}
		}
	}
	picture = GFX_report_event_sov_redarmy
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_idea = TCH_dysfunctional_government
						has_idea = TCH_vladikavkazian_soviet
					}
				}
				create_dynamic_country = {
					original_tag = TCH
					set_temp_variable = { red_TCH = this }
					every_state = {
						limit = {
							OR = {
								is_core_of = TCH
								is_core_of = ISH
								is_core_of = CHC
								is_core_of = CBR
								is_core_of = BLK
							}
							OWNER = {
								OR = {
									tag = RSR
									is_subject_of = RSR
								}
							}
						}
						var:red_TCH = {
							transfer_state = PREV
						}
					}
					hidden_effect = {
						create_template_Krasnaya_Gvardiya = yes
					}
					hidden_effect = {
						set_politics = {
							ruling_party = communism
							elections_allowed = no
						}
						set_popularities = {
							radical_socialism = 35
							communism = 65
						}
						load_focus_tree = Terek_reds_focus
						add_random_ministers = yes
						add_random_ministers = yes
						add_ideas = neutral_foreign_policy_law
						if = {
							limit = { ROOT = { has_idea = TCH_soldiers_from_Caucasian_front } }
							add_timed_idea = { idea = TCH_soldiers_from_Caucasian_front days = 100 }
						}
						if = {
							limit = { ROOT = { has_idea = TCH_unpunished_bandit_raids } }
							add_ideas = TCH_unpunished_bandit_raids
						}
						if = {
							limit = { ROOT = { has_idea = TCH_bandit_raids } }
							add_ideas = TCH_bandit_raids
						}
						ROOT = { PREV = { transfer_foodstuffs_supply_crisis_idea_to_THIS_from_PREV = yes } }
						ROOT = { PREV = { transfer_hyper_inflation_idea_to_THIS_from_PREV = yes } }
						ROOT = { PREV = { transfer_collapse_of_railway_system_idea_to_THIS_from_PREV = yes } }
					}
					RSR = { var:red_TCH = { subjecting_script_with_transfer_parties_dominion = yes } }
					var:red_TCH = { save_global_event_target_as = red_TCH }
					every_country = {
						limit = {
							is_in_array = {
								array = unrecognized_states
								value = ROOT.id
							}
						}
						set_THIS_country_non_recognize_PREV = yes
					}
				}
			}
		}
	}
	
	option = {
		trigger = {
			OR = {
				has_idea = TCH_dysfunctional_government
				has_idea = TCH_vladikavkazian_soviet
			}
		}
		name = rcw_nc.10.a
		remove_ideas = TCH_dysfunctional_government
		remove_ideas = TCH_vladikavkazian_soviet
		remove_ideas = TCH_dvoevlastie
		set_politics = { ruling_party = communism }
		add_popularity = {
			ideology = communism
			popularity = 0.15
		}
		if = {
			limit = { RSR = { has_war_with = ROOT } }
			white_peace = RSR
		}
		hidden_effect = {
			create_template_Krasnaya_Gvardiya = yes
		}
		every_state = {
			limit = {
				OR = {
					is_core_of = TCH
					is_core_of = ISH
					is_core_of = CHC
					is_core_of = CBR
					is_core_of = BLK
				}
				OWNER = {
					OR = {
						tag = RSR
						is_subject_of = RSR
					}
				}
			}
			ROOT = { transfer_state = PREV }
			spawn_red_guard_in_state_CONTROLLER = yes
			spawn_red_guard_in_state_CONTROLLER = yes
		}
		capital_scope = {
			spawn_red_guard_in_state_CONTROLLER = yes
			spawn_red_guard_in_state_CONTROLLER = yes
		}
		custom_effect_tooltip = lack_of_officers_rise_2_tt
		hidden_effect = { lack_of_officers_rise = yes lack_of_officers_rise = yes }
		if = {
			limit = { RSR = { NOT = { has_war_with = ROOT } } }
			RSR = { add_to_war = { targeted_alliance = PREV enemy = ROOT } }
		}
		RSR = { ROOT = { subjecting_script_with_transfer_parties_dominion = yes } }
		load_focus_tree = Terek_reds_focus
	}
	option = {
		trigger = {
			NOT = {
				has_idea = TCH_dysfunctional_government
				has_idea = TCH_vladikavkazian_soviet
			}
		}
		name = rcw_nc.10.b
		remove_ideas = TCH_dysfunctional_government
		remove_ideas = TCH_vladikavkazian_soviet
		remove_ideas = TCH_dvoevlastie
		event_target:red_TCH = {
			every_owned_state = {
				spawn_red_guard_in_state_CONTROLLER = yes
				spawn_red_guard_in_state_CONTROLLER = yes
			}
			capital_scope = {
				spawn_red_guard_in_state_CONTROLLER = yes
				spawn_red_guard_in_state_CONTROLLER = yes
			}
			custom_effect_tooltip = lack_of_officers_rise_2_tt
			hidden_effect = { lack_of_officers_rise = yes lack_of_officers_rise = yes }
			declare_war_on = {
				target = ROOT
				type = annex_everything
			}
			add_civil_war_target = ROOT
			if = {
				limit = { RSR = { NOT = { has_war_with = ROOT } } }
				RSR = { add_to_war = { targeted_alliance = PREV enemy = ROOT } }
			}
		}
		clear_global_event_target = red_TCH
	}
	option = {
		trigger = {
			NOT = {
				has_idea = TCH_dysfunctional_government
				has_idea = TCH_vladikavkazian_soviet
			}
		}
		name = rcw_nc.10.c
		remove_ideas = TCH_dysfunctional_government
		remove_ideas = TCH_vladikavkazian_soviet
		remove_ideas = TCH_dvoevlastie
		event_target:red_TCH = {
			every_owned_state = {
				spawn_red_guard_in_state_CONTROLLER = yes
				spawn_red_guard_in_state_CONTROLLER = yes
			}
			capital_scope = {
				spawn_red_guard_in_state_CONTROLLER = yes
				spawn_red_guard_in_state_CONTROLLER = yes
			}
			custom_effect_tooltip = lack_of_officers_rise_2_tt
			hidden_effect = { lack_of_officers_rise = yes lack_of_officers_rise = yes }
			declare_war_on = {
				target = ROOT
				type = annex_everything
			}
			add_civil_war_target = ROOT
			if = {
				limit = { RSR = { NOT = { has_war_with = ROOT } } }
				RSR = { add_to_war = { targeted_alliance = PREV enemy = ROOT } }
			}
		}
		event_target:red_TCH = { change_tag_from = ROOT }
		clear_global_event_target = red_TCH
	}
}
# Почётный караул
country_event = {
	id = rcw_nc.11
	title = rcw_nc.11.t
	desc = rcw_nc.11.desc
	picture = GFX_report_event_sov_redarmy
	
	is_triggered_only = yes
	
	option = {
		name = rcw_nc.11.a
		add_stability = 0.1
		add_political_power = 30
		add_popularity = {
			ideology = despotism
			popularity = 0.07
		}
	}
}
# Оборона нефтепромыслов
country_event = {
	id = rcw_nc.12
	title = rcw_nc.12.t
	desc = rcw_nc.12.desc
	picture = GFX_report_event_sov_redarmy
	
	is_triggered_only = yes
	
	option = {
		name = rcw_nc.12.a
		add_political_power = 20
		add_war_support = 0.05
	}
}
# Поиски покровителя
country_event = {
	id = rcw_nc.13
	title = rcw_nc.13.t
	desc = rcw_nc.13.desc
	picture = GFX_report_event_sov_redarmy
	
	trigger = {
		tag = TCH
		has_focus_tree = Terek_white_cossaks_focus
		has_war_with = RSR
		NOT = { has_idea = TCH_dvoevlastie }
		NOT = { has_idea = TCH_dysfunctional_government }
		any_other_country = {
			OR = {
				original_tag = CCA
				original_tag = RVA
			}
			NOT = { has_war_with = ROOT }
			has_war_with = RSR
		}
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = rcw_nc.13.a
		random_other_country = {
			limit = {
				OR = {
					original_tag = CCA
					original_tag = RVA
				}
				NOT = { has_war_with = ROOT }
				has_war_with = RSR
			}
			annex_country = {
				target = ROOT
				transfer_troops = yes
			}
			if = {
				limit = { is_ai = yes ROOT = { is_ai = no } }
				change_tag_from = ROOT
			}
		}
	}
}

# Победа в битве за Грозный
country_event = {
	id = rcw_nc.14
	title = rcw_nc.14.t
	desc = {
		text = rcw_nc.14.desc
		trigger = { tag = TCH }
	}
	desc = {
		text = rcw_nc.14.desc_1
		trigger = { tag = MRC }
	}
	picture = GFX_report_event_sov_redarmy
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			tag = TCH
		}
		name = rcw_nc.14.a
		transfer_state = 232
	}
	option = {
		trigger = {
			tag = MRC
		}
		name = rcw_nc.14.b
	}
}
# Поражение в битве за Грозный
country_event = {
	id = rcw_nc.15
	title = rcw_nc.15.t
	desc = {
		text = rcw_nc.15.desc
		trigger = { tag = TCH }
	}
	desc = {
		text = rcw_nc.15.desc_1
		trigger = { tag = MRC }
	}
	picture = GFX_report_event_sov_redarmy
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			tag = TCH
		}
		name = rcw_nc.15.a
	}
	option = {
		trigger = {
			tag = MRC
		}
		name = rcw_nc.15.b
	}
}

# Победа в битве за Петровск
country_event = {
	id = rcw_nc.16
	title = rcw_nc.16.t
	desc = {
		text = rcw_nc.16.desc
		trigger = { tag = MRC }
	}
	desc = {
		text = rcw_nc.16.desc_1
		trigger = { tag = RSR }
	}
	picture = GFX_report_event_sov_redarmy
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			tag = MRC
		}
		name = rcw_nc.16.a
		transfer_state = 971
		transfer_state = 1314
	}
	option = {
		trigger = {
			tag = RSR
		}
		name = rcw_nc.16.b
	}
}
# Поражение в битве за Петровск
country_event = {
	id = rcw_nc.17
	title = rcw_nc.17.t
	desc = {
		text = rcw_nc.17.desc
		trigger = { tag = MRC }
	}
	desc = {
		text = rcw_nc.17.desc_1
		trigger = { tag = RSR }
	}
	picture = GFX_report_event_sov_redarmy
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			tag = MRC
		}
		name = rcw_nc.17.a
	}
	option = {
		trigger = {
			tag = RSR
		}
		name = rcw_nc.17.b
	}
}





###########################
# Russian Civil War Events
###########################

# Единство армии
country_event = {
	id = rcw_nc.47
	title = rcw_nc.47.t
	desc = rcw_nc.47.desc
	picture = GFX_report_event_rcw_rva
	
	trigger = {
		has_start_date < 1918.7.2
		#NOT = { has_global_flag = RUS_civil_war_over }
		#NOT = { has_global_flag = RCW_Allrussian_national_assembly }
		tag = KUB
		has_idea = DON_Volunteer_army_presence_idea
		OR = {
			has_completed_focus = KUB_Armed_Forces_of_the_South_of_Russia
			has_completed_focus = KUB_democratic_government
			has_completed_focus = KUB_constitutional_declaration
			has_country_leader = { name = "Victor Pokrovsky" ruling_only = yes }
		}
	}
	
	mean_time_to_happen = {
		days = 35
		modifier = {
			factor = 0.1
			OR = {
				has_completed_focus = KUB_Armed_Forces_of_the_South_of_Russia
				has_completed_focus = KUB_federal_part_of_Russia
			}
		}
		modifier = {
			factor = 0.9
			surrender_progress > 0.1
		}
		modifier = {
			factor = 0.8
			surrender_progress > 0.2
		}
		modifier = {
			factor = 0.7
			surrender_progress > 0.3
		}
		modifier = {
			factor = 0.6
			surrender_progress > 0.4
		}
		modifier = {
			factor = 0.5
			surrender_progress > 0.5
		}
		modifier = {
			factor = 0.4
			surrender_progress > 0.6
		}
		modifier = {
			factor = 0.3
			surrender_progress > 0.7
		}
		modifier = {
			factor = 0.2
			surrender_progress > 0.8
		}
		modifier = {
			factor = 0.1
			surrender_progress > 0.9
		}
	}
	
	fire_only_once = yes
	
	option = {
		trigger = { OR = { has_completed_focus = KUB_Armed_Forces_of_the_South_of_Russia has_country_leader = { name = "Victor Pokrovsky" ruling_only = yes } } }
		name = rcw_nc.47.a
		every_unit_leader = { set_nationality = RVA }
		remove_ideas = DON_volunteer_recruitment_network_idea
		remove_ideas = DON_Volunteer_army_presence_idea
		RVA = { transfer_state = 996 }
		every_country = {
			limit = {
				OR = {
					AND = { DON = { NOT = { has_government = radical_socialism has_government = communism has_government = national_syndicalism is_subject_of = RUS } } has_war_with = DON }
					AND = { KUB = { NOT = { has_government = radical_socialism has_government = communism has_government = national_syndicalism is_subject_of = RUS } } has_war_with = KUB }
					AND = { OR = { original_tag = KUB original_tag = DON } OR = { has_government = radical_socialism has_government = communism has_government = national_syndicalism is_subject_of = RUS } }
					AND = { OR = { tag = IZH tag = RGR } has_government = radical_socialism has_war_with = RUS }
				}
				NOT = { OVERLORD = { OR = { tag = GER is_in_faction_with = GER } } }
			}
			RVA = {
				if = {
					limit = { NOT = { has_war_with = RVA } }
					declare_war_on = {
						target = PREV
						type = annex_everything
					}
				}
			}
		}
		hidden_effect = {
			set_division_template_lock = {
				division_template = "Dobrovol'cheskiy batal'yon"
				is_locked = no
			}
			set_division_template_lock = {
				division_template = "Dobrovol'cheskiy pekhotnyy polk"
				is_locked = no
			}
			set_division_template_lock = {
				division_template = "Dobrovol'cheskiy kavaleristskiy polk"
				is_locked = no
			}
			set_division_template_lock = {
				division_template = "Udarniy polk"
				is_locked = no
			}
			set_division_template_lock = {
				division_template = "Konnyy division"
				is_locked = no
			}
		}
		every_state = {
			limit = {
				OR = {
					state = 234
					state = 235
					state = 1282
					state = 1283
					state = 1045
					state = 1349
					state = 1173
					state = 917
					state = 233
					state = 902
					state = 1342
					state = 996
				}
			}
			add_core_of = RVA
		}
		RVA = {
			add_ideas = RVA_kubanskiy_pohod add_manpower = 10000
			#add_ideas = RVA_monarchist_organizations_idea
			annex_country = { target = KUB transfer_troops = yes }
			set_capital = { state = 234 }
		}
		RVA = {
			hidden_effect = {
				every_country = {
					limit = {
						is_in_array = {
							array = unrecognized_states
							value = ROOT.id
						}
					}
					set_THIS_country_non_recognize_PREV = yes
				}
			}
			add_ideas = RVA_KUB_rada
		}
		RVA = {
			change_tag_from = KUB
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		trigger = { NOT = { has_completed_focus = KUB_Armed_Forces_of_the_South_of_Russia } }
		name = rcw_nc.47.b
		delete_unit_template_and_units = { division_template = "Dobrovol'cheskiy batal'yon" }
		delete_unit_template_and_units = { division_template = "Dobrovol'cheskiy pekhotnyy polk" }
		delete_unit_template_and_units = { division_template = "Dobrovol'cheskiy kavaleristskiy polk" }
		remove_ideas = DON_volunteer_recruitment_network_idea
		remove_ideas = DON_Volunteer_army_presence_idea
		remove_ideas = SIB_right_oficers
				REB = { every_unit_leader = { limit = { OR = { has_id = 76428 has_id = 76547 has_id = 76321 has_id = 77652 has_id = 77654 has_id = 77659 has_id = 77649 has_id = 78649 has_id = 78650 has_id = 78651 has_id = 78652 has_id = 78653 } } set_nationality = RVA } }
				DON = { every_unit_leader = { limit = { OR = { has_id = 76428 has_id = 76547 has_id = 76321 has_id = 77652 has_id = 77654 has_id = 77659 has_id = 77649 has_id = 78649 has_id = 78650 has_id = 78651 has_id = 78652 has_id = 78653 } } set_nationality = RVA } }
				KUB = { every_unit_leader = { limit = { OR = { has_id = 76428 has_id = 76547 has_id = 76321 has_id = 77652 has_id = 77654 has_id = 77659 has_id = 77649 has_id = 78649 has_id = 78650 has_id = 78651 has_id = 78652 has_id = 78653 } } set_nationality = RVA } }
				RVA = { transfer_state = 235 set_capital = { state = 235 } }
				
				every_state = {
					limit = {
						OR = {
							state = 234
							state = 235
							state = 1282
							state = 1283
							state = 1045
							state = 1349
							state = 1173
							state = 917
							state = 233
							state = 902
							state = 1342
							state = 996
						}
					}
					add_core_of = RVA
				}
				hidden_effect = {
					RVA = {
						add_ideas = RVA_kubanskiy_pohod add_manpower = 10000
						#add_ideas = RVA_monarchist_organizations_idea
						every_country = {
							limit = {
								OR = {
									AND = { DON = { NOT = { has_government = radical_socialism has_government = communism has_government = national_syndicalism is_subject_of = RUS } } has_war_with = DON }
									AND = { KUB = { NOT = { has_government = radical_socialism has_government = communism has_government = national_syndicalism is_subject_of = RUS } } has_war_with = KUB }
									AND = { OR = { original_tag = KUB original_tag = DON } OR = { has_government = radical_socialism has_government = communism has_government = national_syndicalism is_subject_of = RUS } }
									AND = { OR = { tag = IZH tag = RGR } has_government = radical_socialism has_war_with = RUS }
								}
								NOT = { OVERLORD = { OR = { tag = GER is_in_faction_with = GER } } }
							}
							RVA = {
								if = {
									limit = { NOT = { has_war_with = RVA } }
									declare_war_on = {
										target = PREV
										type = annex_everything
									}
								}
							}
						}
						inherit_technology = RUS
						add_equipment_to_stockpile = {
							type = infantry_equipment_great_war
							amount = 5000
							producer = RUS
						}
						add_equipment_to_stockpile = {
							type = support_equipment_1
							amount = 300
							producer = RUS
						}
						remove_all_foreing_locked_templates_from_liberated_country = yes
						division_template = {
							name = "Dobrovol'cheskiy pekhotnyy polk"
							regiments = {
								infantry = { x = 0 y = 0 }
							}
							support = {
								recon = { x = 0 y = 0 }
								engineer = { x = 0 y = 1 }
							}
							priority = 1
						}
						division_template = {
							name = "Dobrovol'cheskiy kavaleristskiy polk"		# Cavalry
							regiments = {
								cavalry = { x = 0 y = 0 }
							}
							support = {
								recon = { x = 0 y = 0 }
							}
							priority = 1
						}
					}
					235 = {
						create_unit = {
							division = "name = \"Georgievskiy polk\" division_template = \"Dobrovol'cheskiy pekhotnyy polk\" start_experience_factor = 1 start_equipment_factor = 1"
							owner = RVA
						}
						create_unit = {
							division = "name = \"Kornilovskiy polk\" division_template = \"Dobrovol'cheskiy pekhotnyy polk\" start_experience_factor = 1 start_equipment_factor = 1"
							owner = RVA
						}
						create_unit = {
							division = "name = \"Rostovskiy dobrovol'cheskiy polk\" division_template = \"Dobrovol'cheskiy pekhotnyy polk\" start_experience_factor = 1 start_equipment_factor = 1"
							owner = RVA
						}
						create_unit = {
							division = "name = \"Oficerskiy kavaleristskiy polk\" division_template = \"Dobrovol'cheskiy kavaleristskiy polk\" start_experience_factor = 1 start_equipment_factor = 1"
							owner = RVA
						}
						create_unit = {
							division = "name = \"Oficerskiy batal'yon\" division_template = \"Dobrovol'cheskiy pekhotnyy polk\" start_experience_factor = 1 start_equipment_factor = 1"
							owner = RVA
						}
						create_unit = {
							division = "name = \"Yunkerskiy batal'yon\" division_template = \"Dobrovol'cheskiy pekhotnyy polk\" start_experience_factor = 1 start_equipment_factor = 1"
							owner = RVA
						}
					}
					if = {
						limit = { ROOT = { has_country_flag = Drozdovsky_troops } }
						ROOT = { delete_unit_template_and_units = { division_template = "Udarniy polk" }
						delete_unit_template_and_units = { division_template = "Konnyy division" } clr_country_flag = Drozdovsky_troops }
						RVA = {
							division_template = {
								name = "Udarniy polk"		# Elite
								regiments = {
									infantry = { x = 0 y = 0 }
									infantry = { x = 0 y = 1 }
								}
								support = {
									recon = { x = 0 y = 0 }
									engineer = { x = 0 y = 1 }
								}
								priority = 2
							}
							division_template = {
								name = "Konnyy division"		# Cavalry
								regiments = {
									cavalry = { x = 0 y = 0 }
								}
								support = {
									recon = { x = 0 y = 0 }
									engineer = { x = 0 y = 1 }
								}
								priority = 2
							}
						}
						235 = {
							create_unit = {
								division = "name = \"2-y Oficerskiy strelkovyy polk\" division_template = \"Udarniy polk\" start_experience_factor = 0.7 start_equipment_factor = 1"
								owner = RVA
							}
							create_unit = {
								division = "name = \"2-y Oficerskiy konnyy polk\" division_template = \"Konnyy division\" start_experience_factor = 0.7 start_equipment_factor = 1"
								owner = RVA
							}
						}
					}
				}
				RVA = {
					hidden_effect = {
						every_country = {
							limit = {
								NOT = {
									tag = PREV
									is_any_former_russian_empire_country = yes
									former_russian_empire_baltic_states_country = yes tag = HRB
								}
							}
							set_THIS_country_non_recognize_PREV = yes
						}
					}
				}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
	option = {
		trigger = { NOT = { has_completed_focus = KUB_Armed_Forces_of_the_South_of_Russia } is_ai = no }
		name = rcw_nc.47.c
		delete_unit_template_and_units = { division_template = "Dobrovol'cheskiy batal'yon" }
		delete_unit_template_and_units = { division_template = "Dobrovol'cheskiy pekhotnyy polk" }
		delete_unit_template_and_units = { division_template = "Dobrovol'cheskiy kavaleristskiy polk" }
		remove_ideas = DON_volunteer_recruitment_network_idea
		remove_ideas = DON_Volunteer_army_presence_idea
		remove_ideas = SIB_right_oficers
				REB = { every_unit_leader = { limit = { OR = { has_id = 76428 has_id = 76547 has_id = 76321 has_id = 77652 has_id = 77654 has_id = 77659 has_id = 77649 has_id = 78649 has_id = 78650 has_id = 78651 has_id = 78652 has_id = 78653 } } set_nationality = RVA } }
				DON = { every_unit_leader = { limit = { OR = { has_id = 76428 has_id = 76547 has_id = 76321 has_id = 77652 has_id = 77654 has_id = 77659 has_id = 77649 has_id = 78649 has_id = 78650 has_id = 78651 has_id = 78652 has_id = 78653 } } set_nationality = RVA } }
				KUB = { every_unit_leader = { limit = { OR = { has_id = 76428 has_id = 76547 has_id = 76321 has_id = 77652 has_id = 77654 has_id = 77659 has_id = 77649 has_id = 78649 has_id = 78650 has_id = 78651 has_id = 78652 has_id = 78653 } } set_nationality = RVA } }
				RVA = { transfer_state = 235 set_capital = { state = 235 } }
				
				every_state = {
					limit = {
						OR = {
							state = 234
							state = 235
							state = 1282
							state = 1283
							state = 1045
							state = 1349
							state = 1173
							state = 917
							state = 233
							state = 902
							state = 1342
							state = 996
						}
					}
					add_core_of = RVA
				}
				hidden_effect = {
					RVA = {
						add_ideas = RVA_kubanskiy_pohod add_manpower = 10000
						#add_ideas = RVA_monarchist_organizations_idea
						every_country = {
							limit = {
								OR = {
									AND = { DON = { NOT = { has_government = radical_socialism has_government = communism has_government = national_syndicalism is_subject_of = RUS } } has_war_with = DON }
									AND = { KUB = { NOT = { has_government = radical_socialism has_government = communism has_government = national_syndicalism is_subject_of = RUS } } has_war_with = KUB }
									AND = { OR = { original_tag = KUB original_tag = DON } OR = { has_government = radical_socialism has_government = communism has_government = national_syndicalism is_subject_of = RUS } }
									AND = { OR = { tag = IZH tag = RGR } has_government = radical_socialism has_war_with = RUS }
								}
								NOT = { OVERLORD = { OR = { tag = GER is_in_faction_with = GER } } }
							}
							RVA = {
								if = {
									limit = { NOT = { has_war_with = RVA } }
									declare_war_on = {
										target = PREV
										type = annex_everything
									}
								}
							}
						}
						inherit_technology = RUS
						add_equipment_to_stockpile = {
							type = infantry_equipment_great_war
							amount = 5000
							producer = RUS
						}
						add_equipment_to_stockpile = {
							type = support_equipment_1
							amount = 300
							producer = RUS
						}
						remove_all_foreing_locked_templates_from_liberated_country = yes
						division_template = {
							name = "Dobrovol'cheskiy pekhotnyy polk"
							regiments = {
								infantry = { x = 0 y = 0 }
							}
							support = {
								recon = { x = 0 y = 0 }
								engineer = { x = 0 y = 1 }
							}
							priority = 1
						}
						division_template = {
							name = "Dobrovol'cheskiy kavaleristskiy polk"		# Cavalry
							regiments = {
								cavalry = { x = 0 y = 0 }
							}
							support = {
								recon = { x = 0 y = 0 }
							}
							priority = 1
						}
					}
					235 = {
						create_unit = {
							division = "name = \"Georgievskiy polk\" division_template = \"Dobrovol'cheskiy pekhotnyy polk\" start_experience_factor = 1 start_equipment_factor = 1"
							owner = RVA
						}
						create_unit = {
							division = "name = \"Kornilovskiy polk\" division_template = \"Dobrovol'cheskiy pekhotnyy polk\" start_experience_factor = 1 start_equipment_factor = 1"
							owner = RVA
						}
						create_unit = {
							division = "name = \"Rostovskiy dobrovol'cheskiy polk\" division_template = \"Dobrovol'cheskiy pekhotnyy polk\" start_experience_factor = 1 start_equipment_factor = 1"
							owner = RVA
						}
						create_unit = {
							division = "name = \"Oficerskiy kavaleristskiy polk\" division_template = \"Dobrovol'cheskiy kavaleristskiy polk\" start_experience_factor = 1 start_equipment_factor = 1"
							owner = RVA
						}
						create_unit = {
							division = "name = \"Oficerskiy batal'yon\" division_template = \"Dobrovol'cheskiy pekhotnyy polk\" start_experience_factor = 1 start_equipment_factor = 1"
							owner = RVA
						}
						create_unit = {
							division = "name = \"Yunkerskiy batal'yon\" division_template = \"Dobrovol'cheskiy pekhotnyy polk\" start_experience_factor = 1 start_equipment_factor = 1"
							owner = RVA
						}
					}
					if = {
						limit = { ROOT = { has_country_flag = Drozdovsky_troops } }
						ROOT = { delete_unit_template_and_units = { division_template = "Udarniy polk" }
						delete_unit_template_and_units = { division_template = "Konnyy division" } clr_country_flag = Drozdovsky_troops }
						RVA = {
							division_template = {
								name = "Udarniy polk"		# Elite
								regiments = {
									infantry = { x = 0 y = 0 }
									infantry = { x = 0 y = 1 }
								}
								support = {
									recon = { x = 0 y = 0 }
									engineer = { x = 0 y = 1 }
								}
								priority = 2
							}
							division_template = {
								name = "Konnyy division"		# Cavalry
								regiments = {
									cavalry = { x = 0 y = 0 }
								}
								support = {
									recon = { x = 0 y = 0 }
									engineer = { x = 0 y = 1 }
								}
								priority = 2
							}
						}
						235 = {
							create_unit = {
								division = "name = \"2-y Oficerskiy strelkovyy polk\" division_template = \"Udarniy polk\" start_experience_factor = 0.7 start_equipment_factor = 1"
								owner = RVA
							}
							create_unit = {
								division = "name = \"2-y Oficerskiy konnyy polk\" division_template = \"Konnyy division\" start_experience_factor = 0.7 start_equipment_factor = 1"
								owner = RVA
							}
						}
					}
				}
				RVA = {
					hidden_effect = {
						every_country = {
							limit = {
								NOT = {
									tag = PREV
									is_any_former_russian_empire_country = yes
									former_russian_empire_baltic_states_country = yes tag = HRB
								}
							}
							set_THIS_country_non_recognize_PREV = yes
						}
					}
				}
		RVA = {
			change_tag_from = KUB
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

# Выделение Кубани
country_event = {
	id = rcw_nc.48
	title = rcw_nc.48.t
	desc = rcw_nc.48.desc
	picture = GFX_report_event_KUB_separation_of_Kuban
	
	is_triggered_only = yes
	
	option = {
		name = rcw_nc.48.a
		every_state = {
			limit = {
				OWNER = { OR = { tag = ROOT is_subject_of = ROOT } }
				OR = {
					state = 234
					state = 917
					state = 1045
					state = 1349
				}
			}
			KUB = { transfer_state = PREV }
		}
		KUB = {
			add_ideas = neutral_foreign_policy_law
			hidden_effect = {
				remove_ideas = {
					lack_of_officers_1
					lack_of_officers_2
					lack_of_officers_3
					lack_of_officers_4
					lack_of_officers_5
					lack_of_officers_6
					lack_of_officers_8
					lack_of_officers_9
					lack_of_officers_10
				}
			}
			add_ideas = lack_of_officers_7
			remove_all_foreing_locked_templates_from_liberated_country = yes
			load_oob = KUB_1917
			set_country_flag = KUB_near_reds_CW
		}
		hidden_effect = {
			KUB = { inherit_technology = ROOT }
			KUB = { country_event = { id = rcw_nc.81 days = 7 } }
			KUB = {
				every_country = {
					limit = {
						NOT = {
							tag = PREV
							is_any_former_russian_empire_country = yes
							former_russian_empire_baltic_states_country = yes tag = HRB
						}
					}
					set_THIS_country_non_recognize_PREV = yes
				}
			}
		}
	}
	
	option = {
		name = rcw_nc.48.b
		trigger = {
			is_ai = no
		}
		every_state = {
			limit = {
				OWNER = { OR = { tag = ROOT is_subject_of = ROOT } }
				OR = {
					state = 234
					state = 917
					state = 1045
					state = 1349
				}
			}
			KUB = { transfer_state = PREV }
		}
		KUB = {
			add_ideas = neutral_foreign_policy_law
			hidden_effect = {
				remove_ideas = {
					lack_of_officers_1
					lack_of_officers_2
					lack_of_officers_3
					lack_of_officers_4
					lack_of_officers_5
					lack_of_officers_6
					lack_of_officers_8
					lack_of_officers_9
					lack_of_officers_10
				}
			}
			add_ideas = lack_of_officers_7
			remove_all_foreing_locked_templates_from_liberated_country = yes
			load_oob = KUB_1917
			set_country_flag = KUB_near_reds_CW
		}
		hidden_effect = {
			KUB = { inherit_technology = RUS }
			KUB = { country_event = { id = rcw_nc.81 days = 7 } }
			KUB = {
				every_country = {
					limit = {
						NOT = {
							tag = PREV
							is_any_former_russian_empire_country = yes
							former_russian_empire_baltic_states_country = yes tag = HRB
						}
					}
					set_THIS_country_non_recognize_PREV = yes
				}
			}
		}
		KUB = { change_tag_from = RUS }
	}
}


# Гражданская война на Кубани
country_event = {
	id = rcw_nc.49
	title = rcw_nc.49.t
	desc = rcw_nc.49.desc
	picture = GFX_report_event_KUB_civilwar
	
	is_triggered_only = yes
	
	trigger = {
		has_start_date < 1918.7.2
		NOT = { has_government = radical_socialism has_government = communism }
		has_country_flag = KUB_near_reds_CW
	}
	
	immediate = { clr_country_flag = KUB_near_reds_CW }
	
	option = {
		name = rcw_nc.49.a #подавить выступление
		#set_politics = {
		#	ruling_party = despotism
		#	elections_allowed = no
		#}
		create_dynamic_country = {
				original_tag = KUB
				set_cosmetic_tag = KUB_Black
				set_politics = {
					ruling_party = communism
					election_frequency = 36
					elections_allowed = no
				}
				set_country_flag = KUB_reds_CW
				hidden_effect = {
					if = {
						limit = { KUB = { has_idea = peasant_and_land_and_bread_question_0_25 } }
						add_ideas = peasant_and_land_and_bread_question_0_25
					}
					else_if = {
						limit = { KUB = { has_idea = peasant_and_land_and_bread_question_0_5 } }
						add_ideas = peasant_and_land_and_bread_question_0_5
					}
					else_if = {
						limit = { KUB = { has_idea = peasant_and_land_and_bread_question } }
						add_ideas = peasant_and_land_and_bread_question
					}
					set_popularities = {
						radical_socialism = 30
						communism = 70
					}
					set_capital = { state = 218 }
					add_random_ministers = yes
					add_random_ministers = yes
					create_country_leader = { name = "Alexey Avtonomov" desc = KUB_Alexey_Avtonomov_DESC picture = "gfx/leaders/KUB/Portrait_Alexey_Avtonomov.dds" expire = "1935.1.1" ideology = democratic_socialism traits = { political_dancer min_1_local_tyrant prince_of_terror } }
					create_country_leader = { name = "Yan Poluyan" desc = KUB_Yan_Poluyan_DESC picture = "gfx/leaders/KUB/Portrait_Yan_Poluyan.dds" expire = "1935.1.1" ideology = leninism traits = { min_1_totalist_chairman } }
					set_temp_variable = { red_KUB = this }
					save_global_event_target_as = KUB_CW
					every_state = {
						limit = {
							OR = {
								OWNER = { tag = RSR }
								CONTROLLER = { tag = RSR }
							}
							NOT = { is_capital = yes }
							OR = { state = 233 state = 1173 state = 902 state = 1342 state = 826 state = 917 }
						}
						event_target:KUB_CW = {
							set_state_owner = PREV
						}
					}
					set_country_flag = dont_rise_party_pop_in_two_party_sys_law
					add_ideas = {
						soviet_republic_gov_form
						federal_gov_terr
						local_assembly_decisions_b_law
						two_party_system_law
						neutral_foreign_policy_law
					}
					create_template_Krasnaya_Gvardiya = yes
					division_template = {
						name = "Kubanskiy revolutsyonniy polk"
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
						}
						support = {
							recon = { x = 0 y = 0 }
							engineer = { x = 0 y = 1 }
						}
						priority = 1
					}
					division_template = {
						name = "Kubanskay konnaya diviziya"		# Cavalry
						regiments = {
							cavalry = { x = 0 y = 0 }
						}
						support = {
							recon = { x = 0 y = 0 }
						}
					}
					ROOT = { every_unit_leader = { limit = { OR = { has_id = 19199 has_id = 19200 } } set_nationality = PREV } }
					declare_war_on = { target = ROOT type = annex_everything }
					add_civil_war_target = ROOT
					every_state = {
						limit = {
							OR = { state = 233 state = 1173 state = 902 state = 1342 state = 826 state = 917 state = 1045 state = 1349 state = 234 }
						}
						set_state_province_controller = {
							controller = event_target:KUB_CW
							limit = {
								OR = {
									tag = RSR
									is_subject_of = RSR
									is_in_faction_with = RSR
								}
							}
						}
					}
					if = { limit = { DON = { exists = yes NOT = { has_war_with = PREV } is_socialist_country = no } } declare_war_on = { target = DON type = annex_everything } }
					if = { limit = { RVA = { exists = yes NOT = { has_war_with = PREV } is_socialist_country = no } } declare_war_on = { target = RVA type = annex_everything } }
				}
		}
		hidden_effect = {
			if = {
				limit = { RSR = { has_war_with = ROOT } }
				RSR = { event_target:KUB_CW = { subjecting_script_with_transfer_parties_dominion = yes } }
			}
			RSR = { every_unit_leader = { limit = { OR = { has_id = 19199 has_id = 19200 } } set_nationality = event_target:KUB_CW } }
			event_target:KUB_CW = {
				every_country = {
					limit = {
						is_in_array = {
							array = unrecognized_states
							value = ROOT.id
						}
					}
					set_THIS_country_non_recognize_PREV = yes
				}
			}
			event_target:KUB_CW = {
				diplomatic_relation = {
					country = RSR
					relation = military_access
					active = yes
				}
				diplomatic_relation = {
					country = RSR
					relation = docking_rights
					active = yes
				}
			}
			event_target:KUB_CW = { set_state_controller = 233 }
			233 = {
				spawn_red_guard_in_state_CONTROLLER = yes
				spawn_red_guard_in_state_CONTROLLER = yes
				spawn_red_guard_in_state_CONTROLLER = yes
				create_unit = {
					division = "name = \"39-y revolutsyonniy polk\" division_template = \"Kubanskiy revolutsyonniy polk\" start_experience_factor = 0.5 start_equipment_factor = 1 start_manpower_factor = 1"
					owner = CONTROLLER
				}
				create_unit = {
					division = "name = \"1-ya konnaya diviziya\" division_template = \"Kubanskay konnaya diviziya\" start_experience_factor = 0.5 start_equipment_factor = 1 start_manpower_factor = 1"
					owner = CONTROLLER
				}
			}
			event_target:KUB_CW = {
				set_province_controller = 735
				set_state_owner = 1349
				1349 = {
					spawn_red_guard_in_state_CONTROLLER = yes
				}
			}
		}
		hidden_effect = { clear_global_event_target = KUB_CW }
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = rcw_nc.49.b
		trigger = { is_ai = no }
		#set_politics = {
		#	ruling_party = despotism
		#	elections_allowed = no
		#}
		create_dynamic_country = {
				original_tag = KUB
				set_cosmetic_tag = KUB_Black
				set_politics = {
					ruling_party = communism
					election_frequency = 36
					elections_allowed = no
				}
				set_country_flag = KUB_reds_CW
				hidden_effect = {
					if = {
						limit = { KUB = { has_idea = peasant_and_land_and_bread_question_0_25 } }
						add_ideas = peasant_and_land_and_bread_question_0_25
					}
					else_if = {
						limit = { KUB = { has_idea = peasant_and_land_and_bread_question_0_5 } }
						add_ideas = peasant_and_land_and_bread_question_0_5
					}
					else_if = {
						limit = { KUB = { has_idea = peasant_and_land_and_bread_question } }
						add_ideas = peasant_and_land_and_bread_question
					}
					set_popularities = {
						radical_socialism = 30
						communism = 70
					}
					set_capital = { state = 218 }
					add_random_ministers = yes
					add_random_ministers = yes
					create_country_leader = { name = "Alexey Avtonomov" desc = KUB_Alexey_Avtonomov_DESC picture = "gfx/leaders/KUB/Portrait_Alexey_Avtonomov.dds" expire = "1935.1.1" ideology = democratic_socialism traits = { political_dancer min_1_local_tyrant prince_of_terror } }
					create_country_leader = { name = "Yan Poluyan" desc = KUB_Yan_Poluyan_DESC picture = "gfx/leaders/KUB/Portrait_Yan_Poluyan.dds" expire = "1935.1.1" ideology = leninism traits = { min_1_totalist_chairman } }
					set_temp_variable = { red_KUB = this }
					save_global_event_target_as = KUB_CW
					every_state = {
						limit = {
							OR = {
								OWNER = { tag = RSR }
								CONTROLLER = { tag = RSR }
							}
							NOT = { is_capital = yes }
							OR = { state = 233 state = 1173 state = 902 state = 1342 state = 826 state = 917 }
						}
						event_target:KUB_CW = {
							set_state_owner = PREV
						}
					}
					set_country_flag = dont_rise_party_pop_in_two_party_sys_law
					add_ideas = {
						soviet_republic_gov_form
						federal_gov_terr
						local_assembly_decisions_b_law
						two_party_system_law
						neutral_foreign_policy_law
					}
					create_template_Krasnaya_Gvardiya = yes
					division_template = {
						name = "Kubanskiy revolutsyonniy polk"
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
						}
						support = {
							recon = { x = 0 y = 0 }
							engineer = { x = 0 y = 1 }
						}
						priority = 1
					}
					division_template = {
						name = "Kubanskay konnaya diviziya"		# Cavalry
						regiments = {
							cavalry = { x = 0 y = 0 }
						}
						support = {
							recon = { x = 0 y = 0 }
						}
					}
					ROOT = { every_unit_leader = { limit = { OR = { has_id = 19199 has_id = 19200 } } set_nationality = PREV } }
					declare_war_on = { target = ROOT type = annex_everything }
					add_civil_war_target = ROOT
					every_state = {
						limit = {
							OR = { state = 233 state = 1173 state = 902 state = 1342 state = 826 state = 917 state = 1045 state = 1349 state = 234 }
						}
						set_state_province_controller = {
							controller = event_target:KUB_CW
							limit = {
								OR = {
									tag = RSR
									is_subject_of = RSR
									is_in_faction_with = RSR
								}
							}
						}
					}
					if = { limit = { DON = { exists = yes NOT = { has_war_with = PREV } is_socialist_country = no } } declare_war_on = { target = DON type = annex_everything } }
					if = { limit = { RVA = { exists = yes NOT = { has_war_with = PREV } is_socialist_country = no } } declare_war_on = { target = RVA type = annex_everything } }
				}
		}
		hidden_effect = {
			if = {
				limit = { RSR = { has_war_with = ROOT } }
				RSR = { event_target:KUB_CW = { subjecting_script_with_transfer_parties_dominion = yes } }
			}
			RSR = { every_unit_leader = { limit = { OR = { has_id = 19199 has_id = 19200 } } set_nationality = event_target:KUB_CW } }
			event_target:KUB_CW = {
				every_country = {
					limit = {
						is_in_array = {
							array = unrecognized_states
							value = ROOT.id
						}
					}
					set_THIS_country_non_recognize_PREV = yes
				}
			}
			event_target:KUB_CW = {
				diplomatic_relation = {
					country = RSR
					relation = military_access
					active = yes
				}
				diplomatic_relation = {
					country = RSR
					relation = docking_rights
					active = yes
				}
			}
			event_target:KUB_CW = { set_state_controller = 233 }
			233 = {
				spawn_red_guard_in_state_CONTROLLER = yes
				spawn_red_guard_in_state_CONTROLLER = yes
				spawn_red_guard_in_state_CONTROLLER = yes
				create_unit = {
					division = "name = \"39-y revolutsyonniy polk\" division_template = \"Kubanskiy revolutsyonniy polk\" start_experience_factor = 0.5 start_equipment_factor = 1 start_manpower_factor = 1"
					owner = CONTROLLER
				}
				create_unit = {
					division = "name = \"1-ya konnaya diviziya\" division_template = \"Kubanskay konnaya diviziya\" start_experience_factor = 0.5 start_equipment_factor = 1 start_manpower_factor = 1"
					owner = CONTROLLER
				}
			}
			event_target:KUB_CW = {
				set_province_controller = 735
				set_state_owner = 1349
				1349 = {
					spawn_red_guard_in_state_CONTROLLER = yes
				}
			}
		}
		hidden_effect = { clear_global_event_target = KUB_CW }
		random_other_country = {
			limit = { original_tag = KUB has_government = communism }
			change_tag_from = KUB
		}
		ai_chance = {
			factor = 0
		}
	}
}











# Военное положение на Кубани
country_event = {
	id = rcw_nc.50
	title = rcw_nc.50.t
	desc = rcw_nc.50.desc
	picture = GFX_report_event_KUB_martial_law
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = rcw_nc.50.a
		add_stability = 0.02
	}
}

# Тактика правительства перед съездом иногородних
country_event = {
	id = rcw_nc.51
	title = rcw_nc.51.t
	desc = rcw_nc.51.desc
	picture = GFX_report_event_KUB_separation_of_Kuban
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = rcw_nc.51.a
		custom_effect_tooltip = KUB_parity_government_tooltip
		add_political_power = -25
		set_country_flag = KUB_parity_government_flag
		ai_chance = {
			factor = 1
		}
	}
	
	option = {
		name = rcw_nc.51.b
		custom_effect_tooltip = KUB_dominance_of_the_cossacks_tooltip
		add_political_power = 25
		set_country_flag = KUB_dominance_of_the_cossacks_flag
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
	}
}

# Начало 2-го съезда иногородних
country_event = {
	id = rcw_nc.52
	title = rcw_nc.52.t
	desc = rcw_nc.52.desc
	picture = GFX_report_event_KUB_congress_nonresident
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = rcw_nc.52.a
		trigger = { has_country_flag = KUB_parity_government_flag }
	}
	
	option = {
		name = rcw_nc.52.b
		trigger = { has_country_flag = KUB_dominance_of_the_cossacks_flag }
	}
}

# 2-го съезд иногородних (неудачная попытка раскола)
country_event = {
	id = rcw_nc.53
	title = rcw_nc.53.t
	desc = rcw_nc.53.desc
	picture = GFX_report_event_KUB_congress_nonresident
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = rcw_nc.53.a
		add_popularity = {
			ideology = communism
			popularity = 0.05
		}
		add_stability = -0.02
	}
}

# 2-го съезд иногородних (разгон)
country_event = {
	id = rcw_nc.54
	title = rcw_nc.54.t
	desc = rcw_nc.54.desc
	picture = GFX_report_event_KUB_congress_nonresident
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = rcw_nc.54.a
		add_stability = 0.03
		add_popularity = { ideology = ROOT popularity = -0.02 }
		if = {
			limit = { OR = { has_government = despotism has_government = market_liberalism } }
			custom_effect_tooltip = KUB_cannot_cooperate_with_petty_bourgeois_tooltip
			set_country_flag = KUB_cannot_cooperate_with_petty_bourgeois
		}
	}
}

# Земельная "программа" (Декларация по аграрному вопросу)
country_event = {
	id = rcw_nc.55
	title = rcw_nc.55.t
	desc = rcw_nc.55.desc
	picture = GFX_report_event_KUB_agrarian_question
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = rcw_nc.55.a
		if = {
			limit = { has_civil_war = no }
			add_popularity = { ideology = radical_socialism popularity = 0.1 }
			add_popularity = { ideology = communism popularity = 0.1 }
		}
		low_cossack_unrest = yes
		add_popularity = { ideology = fascism popularity = 0.1 }
	}
}

# Конституционная декларация
country_event = {
	id = rcw_nc.56
	title = rcw_nc.56.t
	desc = rcw_nc.56.desc
	picture = GFX_report_event_KUB_separation_of_Kuban
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = rcw_nc.56.a
		add_stability = 0.01
		add_political_power = 10
	}
}

# Просьба кубанского правительства
country_event = {
	id = rcw_nc.57
	title = rcw_nc.57.t
	desc = rcw_nc.57.desc
	picture = GFX_report_event_KUB_Kuban_request
	
	trigger = {
		FROM = {
			exists = yes
			NOT = { has_war_with = ROOT }
		}
	}
	
	is_triggered_only = yes
	
	option = {
		name = rcw_nc.57.a
		add_political_power = -25
		FROM = { country_event = rcw_nc.58 }
	}
	
	option = {
		name = rcw_nc.57.b
		add_political_power = 10
		clr_country_flag = KUB_ask_for_233
		clr_country_flag = KUB_ask_for_902
		clr_country_flag = KUB_ask_for_1342
		FROM = { country_event = rcw_nc.59 }
	}
}

# Передача региона
country_event = {
	id = rcw_nc.58
	title = rcw_nc.58.t
	desc = rcw_nc.58.desc
	picture = GFX_report_event_KUB_Kuban_request
	
	trigger = {
		FROM = {
			exists = yes
			NOT = { has_war_with = ROOT }
		}
	}
	
	is_triggered_only = yes
	
	option = {
		name = rcw_nc.58.a
		if = {
			limit = {
				FROM = {
					has_country_flag = KUB_ask_for_233
				}
			}
			233 = {
				transfer_state_to = KUB
			}
			FROM = { clr_country_flag = KUB_ask_for_233 }
		}
		else_if = {
			limit = {
				FROM = {
					has_country_flag = KUB_ask_for_902
				}
			}
			902 = {
				transfer_state_to = KUB
			}
			FROM = { clr_country_flag = KUB_ask_for_902 }
		}
		else_if = {
			limit = {
				FROM = {
					has_country_flag = KUB_ask_for_1342
				}
			}
			1342 = {
				transfer_state_to = KUB
			}
			FROM = { clr_country_flag = KUB_ask_for_1342 }
		}
		add_stability = 0.01
		add_political_power = 10
	}
}

# Отказ в передаче региона (Высокомерный отказ)
country_event = {
	id = rcw_nc.59
	title = rcw_nc.59.t
	desc = rcw_nc.59.desc
	picture = GFX_report_event_KUB_georgia_requirement
	
	is_triggered_only = yes
	
	option = {
		name = rcw_nc.59.a
		add_stability = -0.01
		add_political_power = -10
	}
}

# Последний женский батальон смерти
country_event = {
	id = rcw_nc.60
	title = rcw_nc.60.t
	desc = rcw_nc.60.desc
	picture = GFX_report_event_KUB_womens_battalion
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = rcw_nc.60.a
		add_political_power = -20
		add_war_support = 0.03
		add_ideas = woman_combat_roles
		if = {
			limit = { NOT = { has_template = "Udarniy polk" } }
			hidden_effect = {
				division_template = {
					name = "Udarniy polk"		# Elite
					regiments = {
						stormtroopers = { x = 0 y = 0 }
						stormtroopers = { x = 0 y = 1 }
					}
					support = {
						recon = { x = 0 y = 0 }
						engineer = { x = 0 y = 1 }
					}
					priority = 2
				}
			}
		}
		capital_scope = {
			create_unit = {
				division = "name = \"Yekaterinodarskiy zhenskiy batal'on\" division_template = \"Udarniy polk\" start_experience_factor = 0.65 start_equipment_factor = 1"
				owner = ROOT
			}
		}
	}
	
	option = {
		name = rcw_nc.60.b
		add_stability = 0.02
	}
}

# Съезд промышленников Кубани
country_event = {
	id = rcw_nc.61
	title = rcw_nc.61.t
	desc = rcw_nc.61.desc
	picture = GFX_report_event_KUB_congress_industrialists
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = rcw_nc.61.a
		add_popularity = {
			ideology = market_liberalism
			popularity = 0.05
		}
		add_stability = 0.01
		add_political_power = 10
	}
}

# Состояние кубанского образования
country_event = {
	id = rcw_nc.62
	title = rcw_nc.62.t
	desc = rcw_nc.62.desc
	picture = GFX_report_event_KUB_state_education
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = rcw_nc.62.a
	}
}

# Выбор атамана
country_event = {
	id = rcw_nc.63
	title = rcw_nc.63.t
	desc = rcw_nc.63.desc
	picture = GFX_report_event_KUB_ataman_elections
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = rcw_nc.63.a
		trigger = { has_country_leader = { name = "Kondrat Bardij" ruling_only = no } }
		if = {
			limit = { has_government = market_liberalism }
			add_stability = 0.05
		}
		set_politics = { ruling_party = market_liberalism elections_allowed = no }
		add_popularity = { ideology = market_liberalism popularity = 0.05 }
	}
	
	option = {
		name = rcw_nc.63.b
		trigger = { has_country_leader = { name = "Luka Bych" ruling_only = no } }
		if = {
			limit = { has_government = conservatism }
			add_stability = 0.05
		}
		set_politics = { ruling_party = conservatism elections_allowed = no }
		add_popularity = { ideology = conservatism popularity = 0.05 }
	}
	
	option = {
		name = rcw_nc.63.c
		if = {
			limit = { has_government = despotism }
			add_stability = 0.05
		}
		set_politics = { ruling_party = despotism elections_allowed = no }
		add_popularity = { ideology = despotism popularity = 0.05 }
		if = {
			limit = { NOT = { has_country_leader = { name = "Alexandr Filimonov" ruling_only = no } } }
			create_country_leader = { name = "Alexandr Filimonov" desc = KUB_Alexandr_Filimonov_DESC picture = "gfx/leaders/KUB/Portrait_Alexandr_Filimonov.dds" expire = "1935.1.1" ideology = despotism_ideology traits = { min_1_traditionalist anti_democrat } }
		}
	}
	
	option = {
		name = rcw_nc.63.d
		set_politics = { ruling_party = fascism elections_allowed = no }
		add_popularity = { ideology = fascism popularity = 0.05 }
		add_war_support = 0.1
		add_stability = -0.01
	}
	
	option = {
		name = rcw_nc.63.e
		trigger = { has_country_leader = { name = "Victor Pokrovsky" ruling_only = yes } }
		if = {
			limit = { has_government = despotism }
			add_stability = 0.05
		}
		set_politics = { ruling_party = despotism elections_allowed = no }
		add_popularity = { ideology = despotism popularity = 0.05 }
	}
}

# Декларация по рабочему вопросу
country_event = {
	id = rcw_nc.64
	title = rcw_nc.64.t
	desc = rcw_nc.64.desc
	picture = GFX_report_event_KUB_labor_question
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = rcw_nc.64.a
		add_stability = -0.01
		add_popularity = { ideology = ROOT popularity = -0.05 }
	}
}

# Кубанское учредительное собрание
country_event = {
	id = rcw_nc.65
	title = rcw_nc.65.t
	desc = rcw_nc.65.desc
	picture = GFX_report_event_KUB_kuban_constituent_assembly
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = rcw_nc.65.a
		trigger = {
			OR = {
				has_completed_focus = KUB_collaboration_with_revolutionary_democracy
				has_government = social_liberalism
			}
		}
		if = {
			limit = { has_government = social_liberalism }
			add_stability = 0.05
		}
		set_politics = { ruling_party = social_liberalism elections_allowed = yes }
		rise_cossack_unrest = yes
		add_popularity = { ideology = social_liberalism popularity = 0.05 }
	}
	
	option = {
		name = rcw_nc.65.b
		if = {
			limit = { has_government = conservatism }
			add_stability = 0.05
		}
		set_politics = { ruling_party = conservatism elections_allowed = yes }
		add_popularity = { ideology = conservatism popularity = 0.05 }
	}
	
	option = {
		name = rcw_nc.65.c
		trigger = {
			OR = {
				has_completed_focus = KUB_commercial_and_industrial_congress
				has_government = market_liberalism
			}
		}
		if = {
			limit = { has_government = market_liberalism }
			add_stability = 0.05
		}
		set_politics = { ruling_party = market_liberalism elections_allowed = yes }
		add_ideas = {
			federal_gov_terr
			laissez_faire_law
		}
		add_popularity = { ideology = market_liberalism popularity = 0.05 }
		if = {
			limit = { has_country_leader = { name = "Kondrat Bardij" ruling_only = no } }
			hidden_effect = { kill_ideology_leader = market_liberalism }
		}
	}
	
	option = {
		name = rcw_nc.65.d
		if = {
			limit = { has_government = despotism }
			add_stability = 0.05
		}
		set_politics = { ruling_party = despotism elections_allowed = yes }
		add_popularity = { ideology = despotism popularity = 0.05 }
		low_cossack_unrest = yes
		add_ideas = presidential_republic_gov_form
	}
	
	option = {
		name = rcw_nc.65.e
		trigger = { has_government = conservatism always = no }
		if = {
			limit = { has_government = conservatism }
			add_stability = 0.05
		}
		hidden_effect = { kill_ideology_leader = conservatism }
		create_country_leader = { name = "Nikolay Ryabovol" desc = KUB_Nikolay_Ryabovol_DESC picture = "gfx/leaders/KUB/Portrait_Nikolay_Ryabovol.dds" expire = "1935.1.1" ideology = conservatism_ideology traits = { like_UKR autonomist min_1_popular_figurehead } }
		set_politics = { ruling_party = conservatism elections_allowed = yes }
		add_popularity = { ideology = conservatism popularity = 0.05 }
		rise_cossack_unrest = yes
	}
}

# Переговоры о статусе Сочи (Грузия)
country_event = {
	id = rcw_nc.66
	title = rcw_nc.66.t
	desc = rcw_nc.66.desc
	picture = GFX_report_event_KUB_sochi
	
	trigger = {
		FROM = {
			exists = yes
			NOT = { has_war_with = ROOT }
		}
	}
	
	is_triggered_only = yes
	
	option = {
		name = rcw_nc.66.a
		trigger = { is_ai = no }
		add_political_power = -25
		FROM = { country_event = rcw_nc.67 }
	}
	
	option = {
		name = rcw_nc.66.b
		FROM = { country_event = rcw_nc.68 }
	}
	
	option = {
		name = rcw_nc.66.c
		add_political_power = 10
		FROM = { country_event = rcw_nc.71 }
	}
}

# Передача Сочи без уступок для Грузии
country_event = {
	id = rcw_nc.67
	title = rcw_nc.67.t
	desc = rcw_nc.67.desc
	picture = GFX_report_event_KUB_sochi
	
	trigger = {
		FROM = {
			exists = yes
			NOT = { has_war_with = ROOT }
		}
	}
	
	is_triggered_only = yes
	
	option = {
		name = rcw_nc.67.a
		if = {
			limit = { 1342 = { is_owned_by = GEO } }
			1342 = {
				transfer_state_to = KUB
			}
		}
		if = {
			limit = { 902 = { is_owned_by = GEO } }
			902 = {
				transfer_state_to = KUB
			}
		}
		add_stability = 0.01
		add_political_power = 10
	}
}

# Требования Грузии
country_event = {
	id = rcw_nc.68
	title = rcw_nc.68.t
	desc = rcw_nc.68.desc
	picture = GFX_report_event_KUB_georgia_requirement
	
	trigger = {
		FROM = {
			exists = yes
			NOT = { has_war_with = ROOT }
		}
	}
	
	is_triggered_only = yes
	
	option = {
		name = rcw_nc.68.a
		FROM = { country_event = rcw_nc.69 }
		if = {
			limit = { 1342 = { is_owned_by = GEO } }
			1342 = {
				transfer_state_to = KUB
			}
		}
		if = {
			limit = { 902 = { is_owned_by = GEO } }
			902 = {
				transfer_state_to = KUB
			}
		}
		add_political_power = -15
		add_ideas = KUB_georgian_concessions
		#902 = {
			#add_dynamic_modifier = { modifier = georgian_concessions }
		#}
	}
	
	option = {
		name = rcw_nc.68.b
		FROM = { country_event = rcw_nc.70 }
		country_event = rcw_nc.70
	}
}

# Успех переговоров
country_event = {
	id = rcw_nc.69
	title = rcw_nc.69.t
	desc = rcw_nc.69.desc
	picture = GFX_report_event_KUB_sochi
	
	trigger = {
		FROM = {
			exists = yes
			NOT = { has_war_with = ROOT }
		}
	}
	
	is_triggered_only = yes
	
	option = {
		name = rcw_nc.69.a
		add_political_power = 10
	}
}

# Срыв переговоров
country_event = {
	id = rcw_nc.70
	title = rcw_nc.70.t
	desc = rcw_nc.70.desc
	picture = GFX_report_event_KUB_georgia_requirement
	
	trigger = {
		FROM = {
			exists = yes
			NOT = { has_war_with = ROOT }
		}
	}
	
	is_triggered_only = yes
	
	option = {
		name = rcw_nc.70.a
		add_political_power = -10
	}
}

# Отказ Грузии от переговоров
country_event = {
	id = rcw_nc.71
	title = rcw_nc.71.t
	desc = rcw_nc.71.desc
	picture = GFX_report_event_KUB_georgia_requirement
	
	trigger = {
		FROM = {
			exists = yes
			NOT = { has_war_with = ROOT }
		}
	}
	
	is_triggered_only = yes
	
	option = {
		name = rcw_nc.71.a
		add_stability = -0.01
		add_political_power = -10
	}
	
	option = {
		name = rcw_nc.71.b
		trigger = { is_ai = no }
		#news_event
		declare_war_on = {
			target = GEO
			type = annex_everything
		}
	}
}

# Выбор атамана (Казачий круг) ("Перебаллотировка")
country_event = {
	id = rcw_nc.72
	title = rcw_nc.72.t
	desc = rcw_nc.72.desc
	picture = GFX_report_event_KUB_ataman_elections
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	immediate = {
		if = {
			limit = { has_country_leader = { name = "Kondrat Bardij" ruling_only = no } }
			custom_effect_tooltip = rcw_nc.72.desc_1
		}
		if = {
			limit = { has_country_leader = { name = "Victor Pokrovsky" ruling_only = yes } }
			custom_effect_tooltip = rcw_nc.72.desc_2
		}
	}
	
	option = {
		name = rcw_nc.72.a
		trigger = { has_country_leader = { name = "Kondrat Bardij" ruling_only = no } }
		set_party_name = {
			ideology = market_liberalism
			long_name = military_circle_long
			name = military_circle
		}
		if = {
			limit = { has_government = market_liberalism }
			add_stability = 0.05
		}
		set_politics = { ruling_party = market_liberalism elections_allowed = no }
		add_popularity = { ideology = market_liberalism popularity = 0.05 }
	}
	
	option = {
		name = rcw_nc.72.b
		hidden_effect = { kill_ideology_leader = conservatism }
		if = {
			limit = { has_government = conservatism }
			add_stability = 0.05
		}
		create_country_leader = { name = "Pavel Kurgansky" desc = KUB_Pavel_Kurgansky_DESC picture = "gfx/leaders/KUB/Portrait_Pavel_Kurgansky.dds" expire = "1935.1.1" ideology = conservatism_ideology traits = { } }
		set_politics = { ruling_party = conservatism elections_allowed = no }
		add_popularity = { ideology = conservatism popularity = 0.05 }
	}
	
	option = {
		name = rcw_nc.72.c
		if = {
			limit = { has_government = despotism }
			add_stability = 0.05
		}
		set_politics = { ruling_party = despotism elections_allowed = no }
		add_popularity = { ideology = despotism popularity = 0.05 }
	}
	
	option = {
		name = rcw_nc.72.d
		set_politics = { ruling_party = fascism elections_allowed = no }
		add_popularity = { ideology = fascism popularity = 0.05 }
		add_war_support = 0.1
		add_stability = -0.01
	}
	
	option = {
		name = rcw_nc.72.e
		trigger = { has_country_leader = { name = "Victor Pokrovsky" ruling_only = yes } }
		if = {
			limit = { has_government = despotism }
			add_stability = 0.05
		}
		set_politics = { ruling_party = despotism elections_allowed = no }
		add_popularity = { ideology = despotism popularity = 0.05 }
	}
}

# Казачий переворот
country_event = {
	id = rcw_nc.73
	title = rcw_nc.73.t
	desc = rcw_nc.73.desc
	picture = GFX_report_event_KUB_cossack_coup
	
	trigger = {
		tag = KUB
		has_idea = DON_cossack_unrest_5
		NOT = {
			has_country_leader = { name = "Kondrat Bardij" ruling_only = no }
			has_government = despotism
			has_government = fascism
		}
	}
	
	mean_time_to_happen = {
		days = 50
	}
	
	option = {
		name = rcw_nc.73.a
		set_politics = { ruling_party = fascism elections_allowed = no }
		add_popularity = { ideology = fascism popularity = 0.05 }
		add_ideas = {
			military_dictatorship_gov_form
			unitary_gov_terr
			emergency_laws_b_law
		}
		add_war_support = 0.1
		add_stability = -0.01
		swap_ideas = {
			remove_idea = DON_cossack_unrest_5
			add_idea = DON_cossack_unrest_1
		}
		add_to_variable = {
			var = global.RCW_green_var_CoMotCA
			value = -2
		}
	}
}

# Вопрос хлебной торговли
country_event = {
	id = rcw_nc.74
	title = rcw_nc.74.t
	desc = rcw_nc.74.desc
	picture = GFX_report_event_KUB_agrarian_question
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = rcw_nc.74.a
		add_ideas = CCA_bread_free
		add_stability = 0.1
	}
	
	option = {
		name = rcw_nc.74.b
		add_ideas = CCA_bread_state
		add_stability = -0.1
	}
}

# Проблема восточных территорий
country_event = {
	id = rcw_nc.75
	title = rcw_nc.75.t
	desc = rcw_nc.75.desc
	picture = GFX_report_event_KUB_eastern_territories_problem
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = rcw_nc.75.a
		add_stability = 0.03
	}
	
	option = {
		name = rcw_nc.75.b
		trigger = { has_government = market_liberalism }
		add_stability = -0.07
		add_war_support = -0.1
		set_country_flag = SEU_can_core_east_Ukraine
		custom_effect_tooltip = SEU_can_core_east_Ukraine_tooltip
	}
}

# Мир с большевиками ("Мирное предложение казачьего союза")
country_event = {
	id = rcw_nc.76
	title = rcw_nc.76.t
	desc = rcw_nc.76.desc
	picture = GFX_report_event_KUB_separation_of_Kuban
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = rcw_nc.76.a
		FROM = { country_event = rcw_nc.77 }
		add_war_support = -0.3
		add_political_power = -50
	}
	
	option = {
		name = rcw_nc.76.b
		set_global_flag = RUS_civil_war_reds_n_Kuban_peace
		if = {
			limit = { KUB = { is_in_faction = yes is_faction_leader = no } }
			every_country = {
				limit = { OR = { tag = KUB is_subject_of = KUB } }
				leave_faction = yes
			}
		}
	}
}

# Отказ от переговоров
country_event = {
	id = rcw_nc.77
	title = rcw_nc.77.t
	desc = rcw_nc.77.desc
	picture = GFX_report_event_KUB_refusal_negotiate
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = rcw_nc.77.a
		add_political_power = -50
	}
}

# Статус правительстве Харламова
country_event = {
	id = rcw_nc.78
	title = rcw_nc.78.t
	desc = rcw_nc.78.desc
	picture = GFX_report_event_KUB_harlamov
	
	trigger = {
		has_idea = KUB_seat_of_the_southeastern_union_government
	}
	
	is_triggered_only = yes
	
	fire_only_once = yes
	
	option = {
		name = rcw_nc.78.a
		trigger = { NOT = { has_completed_focus = KUB_dominance_of_the_cossacks } }
		set_politics = {
			ruling_party = market_liberalism
			elections_allowed = no
		}
		hidden_effect = {
			every_possible_country = {
				limit = { original_tag = DON has_country_leader = { name = "Vasiliy Kharlamov" ruling_only = no } }
				kill_ideology_leader = market_liberalism
			}
		}
		if = {
			limit = { NOT = { has_country_leader = { name = "Vasiliy Kharlamov" ruling_only = no } } }
			create_country_leader = { name = "Vasiliy Kharlamov" desc = DON_Vasiliy_Kharlamov_DESC picture = "gfx/leaders/DON/Portrait_Vasiliy_Kharlamov.dds" expire = "1935.1.1" ideology = market_liberalism_ideology traits = { min_2_great_compromiser political_dancer liberal_journalist } }
		}
		add_popularity = { ideology = market_liberalism popularity = 0.05 }
	}
	
	option = {
		name = rcw_nc.78.b
		add_popularity = { ideology = market_liberalism popularity = -0.1 }
		add_political_power = -50
	}
}

# Отряд полковника Покровского
country_event = {
	id = rcw_nc.79
	title = rcw_nc.79.t
	desc = rcw_nc.79.desc
	picture = GFX_report_event_KUB_pokrovskiy
	
	trigger = {
		tag = KUB
		234 = {
			CONTROLLER = {
				has_war_with = ROOT
				OR = {
					has_government = communism
					has_government = radical_socialism
					has_government = national_syndicalism
				}
			}
		}
		NOT = {
			has_completed_focus = KUB_southeastern_union
			has_completed_focus = KUB_south_russian_union
			has_completed_focus = KUB_kubanskiy_kray
		}
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 0
	}
	
	immediate = {
		hidden_effect = {
			add_political_power = -150
			add_stability = -0.1
			add_war_support = 0.1
			set_politics = {
				ruling_party = despotism
				elections_allowed = no
			}
			add_ideas = marching_army_idea
			if = {
				limit = { NOT = { has_country_leader = { name = "Victor Pokrovsky" ruling_only = yes } } }
				kill_ideology_leader = despotism
			}
			country_event = { id = rcw_nc.47 days = 7 }
		}
	}
	
	option = {
		name = rcw_nc.79.a
		effect_tooltip = {
			add_political_power = -150
			add_stability = -0.1
			add_war_support = 0.1
			set_politics = {
				ruling_party = despotism
				elections_allowed = no
			}
			add_ideas = marching_army_idea
		}
	}
}

# Снятие (скрыт)
country_event = {
	id = rcw_nc.80
	title = rcw_nc.80.t
	desc = rcw_nc.80.desc
	picture = GFX_report_event_don_krasnov_in_cabinet
	
	trigger = {
		tag = KUB
		surrender_progress > 0.99
		all_owned_state = { is_fully_controlled_by = ROOT }
		has_idea = marching_army_idea
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 100
	}
	
	hidden = yes
	
	option = {
		name = rcw_nc.79.a
		remove_ideas = marching_army_idea
	}
}

# I съезд иногородних
country_event = {
	id = rcw_nc.81
	title = rcw_nc.81.t
	desc = rcw_nc.81.desc
	picture = GFX_report_event_KUB_congress_nonresident
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			country_event = { id = rcw_nc.83 days = 1 }
		}
	}
	
	option = {
		name = rcw_nc.81.a
		country_event = { id = rcw_nc.82 days = 7 }
	}
}
# Результаты I съезда иногородних
country_event = {
	id = rcw_nc.82
	title = rcw_nc.82.t
	desc = rcw_nc.82.desc
	picture = GFX_report_event_KUB_congress_nonresident
	
	is_triggered_only = yes
	
	option = {
		name = rcw_nc.82.a
		add_stability = 0.01
		add_political_power = 20
		hidden_effect = {
			country_event = { id = rcw_nc.84 days = 20 random_days = 10 }
		}
	}
}
# Рабочая демонстрация в Екатеринодаре
country_event = {
	id = rcw_nc.83
	title = rcw_nc.83.t
	desc = rcw_nc.83.desc
	picture = GFX_report_event_KUB_labor_question
	
	is_triggered_only = yes
	
	option = {
		name = rcw_nc.83.a
		add_stability = -0.02
		if = {
			limit = { NOT = { has_idea = strikes_3 } }
			add_timed_idea = { idea = strikes_3 days = 4 }
			else = { add_timed_idea = { idea = strikes_2 days = 4 } }
		}
	}
}
# Развитие аграрного движения на Кубани
country_event = {
	id = rcw_nc.84
	title = rcw_nc.84.t
	desc = rcw_nc.84.desc
	picture = GFX_report_event_KUB_agrarian_question
	
	is_triggered_only = yes
	
	option = {
		name = rcw_nc.84.a
		add_popularity = {
			ideology = communism
			popularity = 0.03
		}
		add_timed_idea = { idea = white_terror_idea days = 730 }
	}
}
# Демонстрация в поддержку Учредительного собрания
country_event = {
	id = rcw_nc.85
	title = rcw_nc.85.t
	desc = rcw_nc.85.desc
	picture = GFX_report_event_KUB_kuban_constituent_assembly
	
	is_triggered_only = yes
	
	option = {
		name = rcw_nc.85.a
		add_war_support = 0.02
	}
}


# Северо-Кавказская советская республика
country_event = {
	id = rcw_nc.21
	title = rcw_nc.21.t
	desc = rcw_nc.21.desc
	picture = GFX_report_event_sov_redarmy
	
	trigger = {
		has_start_date < 1918.7.2
		original_tag = TCH
		NOT = { any_other_country = { original_tag = TCH exists = yes } }
		OR = { has_government = communism has_government = radical_socialism }
		RUS = { has_country_flag = RUS_Oktober_revolution_fired NOT = { has_war_with = ROOT } }
		RSR = { OR = { has_government = communism has_government = radical_socialism } exists = yes NOT = { has_war_with = ROOT } has_completed_focus = RUS_struggle_against_counterrevolution }
		any_other_country = {
			original_tag = KUB
			OR = { has_government = communism has_government = radical_socialism }
			NOT = { has_war_with = ROOT }
		}
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 90
		modifier = {
			factor = 0.01
			any_other_country = {
				original_tag = KUB
				OR = { has_government = communism has_government = radical_socialism }
				NOT = { has_war_with = ROOT }
				NOT = { has_country_flag = KUB_reds_CW }
			}
		}
		modifier = {
			factor = 0.01
			any_other_country = {
				original_tag = KUB
				OR = { has_government = communism has_government = radical_socialism }
				NOT = { has_war_with = ROOT }
				surrender_progress > 0.9
			}
		}
	}
	
	option = {
		name = rcw_nc.21.a
		
		random_other_country = {
			limit = {
				original_tag = KUB
				OR = { has_government = communism has_government = radical_socialism }
				NOT = { has_war_with = ROOT }
			}
			country_event = { id = rcw_nc.22 hours = 1 }
		}
	}
}
country_event = {
	id = rcw_nc.22
	title = rcw_nc.22.t
	desc = rcw_nc.22.desc
	picture = GFX_report_event_sov_redarmy
	
	is_triggered_only = yes
	
	option = {
		name = rcw_nc.22.a
		every_unit_leader = { set_nationality = FROM }
		FROM = {
			set_cosmetic_tag = NTC
			annex_country = {
				target = ROOT
				transfer_troops = yes
			}
		}
		every_state = {
			limit = { OR = { is_core_of = ROOT state = 235 state = 1385 } }
			add_core_of = FROM
		}
		every_state = {
			limit = { OR = { is_core_of = FROM state = 1377 state = 1389 } OWNER = { tag = FROM.OVERLORD } }
			FROM = { transfer_state = PREV }
		}
		if = {
			limit = { is_ai = no FROM = { is_ai = yes } }
			FROM = { change_tag_from = ROOT }
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = rcw_nc.22.b
		if = {
			limit = { is_subject = yes }
			OVERLORD = { end_puppet = ROOT }
		}
		FROM = {
			set_cosmetic_tag = NTC
		}
		every_state = {
			limit = { OR = { is_core_of = ROOT state = 235 state = 1385 } }
			add_core_of = FROM
		}
		every_state = {
			limit = { OR = { is_core_of = FROM state = 1377 state = 1389 } OWNER = { tag = FROM.OVERLORD } }
			FROM = { transfer_state = PREV }
		}
		FROM = {
			declare_war_on = {
				target = ROOT
				type = annex_everything
			}
		}
		ai_chance = {
			factor = 0
		}
	}
}