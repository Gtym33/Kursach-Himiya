add_namespace = romania

# Россия вышла из войны. Может и нам пора?
country_event = {
	id = romania.1
	title = romania.1.t
	desc = romania.1.desc
	picture = GFX_report_event_bul_dobro_pole
	
	trigger = {
		has_start_date < 1918.11.11
		has_global_flag = WWI_is_now
		tag = ROM
		NOT = { has_global_flag = WWI_ROM_HAS_CAPITULATED }
		NOT = { has_global_flag = WWI_GER_HAS_CAPITULATED }
		NOT = { has_global_flag = WWI_AUH_HAS_CAPITULATED }
		is_subject = no
		has_war_with = AUH
		OR = {
			RUS = { NOT = { has_war_with = GER } }
			198 = {
				CONTROLLER = { NOT = { has_war_with = AUH } }
			}
		}
	}

	mean_time_to_happen = {
		days = 15
	}
	
	fire_only_once = yes
	
	option = {
		name = romania.1.a
		ai_chance = {
			factor = 1
		}
		GER = { country_event = { id = romania.2 days = 1 } }
	}
	
	option = {
		name = romania.1.b
		ai_chance = {
			factor = 0
		}
		add_stability = 0.15
		add_war_support = 0.10
	}
}

# Переговоры с Румынией (Германия)
country_event = {
	id = romania.2
	title = romania.2.t
	desc = romania.2.desc
	picture = GFX_report_event_bul_dobro_pole
	
	trigger = {
		has_global_flag = WWI_is_now
		NOT = { has_global_flag = WWI_GER_HAS_CAPITULATED }
	}
	
	is_triggered_only = yes
	
	option = {
		name = romania.2.a
		trigger = { is_ai = no }
		ai_chance = {
			factor = 0
		}
		ROM = {
			add_stability = 0.2
			country_event = { id = romania.3 days = 1 }
		}
	}
	
	option = {
		name = romania.2.b
		ai_chance = {
			factor = 1
		}
		ROM = {
			set_country_flag = ROM_Bukharest_peace
			country_event = { id = romania.4 days = 1 }
		}
	}
}

### Германия отклонила мирное предложение
country_event = {
	id = romania.3
	title = romania.3.t
	desc = romania.3.desc
	picture = GFX_report_event_bul_dobro_pole
	
	fire_only_once = yes
	
	is_triggered_only = yes
	
	option = {
		name = romania.3.a
	}
}

# Бухарестский мирных договор
country_event = {
	id = romania.4
	title = romania.4.t
	desc = romania.4.desc
	picture = GFX_report_event_bul_dobro_pole
	
	is_triggered_only = yes
	
	trigger = {
		has_start_date < 1918.11.11
		tag = ROM
		has_global_flag = WWI_is_now
		NOT = { has_global_flag = WWI_GER_HAS_CAPITULATED }
		has_country_flag = ROM_Bukharest_peace
	}
	
	immediate = {
		hidden_effect = {
			remove_ideas = ROM_bonus_against_Central_powers
			clr_country_flag = ROM_Bukharest_peace
		}
	}
	
	option = {
		name = romania.4.a
		every_country = {
			limit = { OR = { is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = SNS is_in_faction_with = TGR is_in_faction_with = TUR AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
			white_peace = ROM
		}
		leave_faction = yes
		set_global_flag = WWI_ROM_HAS_CAPITULATED
		every_country = {
			limit = { OR = { is_in_faction_with = GER } }
			ROOT = { give_military_access = PREV }
		}
		add_ideas = {
			civilian_economy
			disarmed_nation
			neutral_foreign_policy_law
		}
		if = {
			limit = { AUH = { is_in_faction_with = GER NOT = { has_global_flag = AUH_lost_hope } } HUN = { exists = no } BNT = { exists = no } }
			AUH = {
				transfer_state = 820
				transfer_state = 1047
				transfer_state = 819
			}
		}
		if = {
			limit = { BUL = { is_in_faction_with = GER NOT = { has_global_flag = WWI_BUL_HAS_CAPITULATED } } }
			BUL = {
				transfer_state = 77
				transfer_state = 856
			}
		}
		country_event = { id = romania.5 hours = 2 }
		country_event = { id = romania.6 hours = 2 }
	}
}

# Постановка демилитаризованных зон и концессии
country_event = {
	id = romania.5
	hidden = yes
	picture = GFX_report_event_bul_dobro_pole
	
	is_triggered_only = yes
	
	option = {
		name = romania.5.a
		delete_unit_template_and_units = {
			division_template = "Mobilized Infantry Division"
		}
		give_resource_rights = { receiver = GER state = 46 }
		give_resource_rights = { receiver = GER state = 81 }
		every_owned_state = {
			limit = {
				OR = {
					state = 81
					state = 46
					state = 855
					state = 77
					state = 856
					state = 820
					state = 1047
					state = 819
				}
			}
			set_demilitarized_zone = yes
		}
	}
}

# Конфликт за Бессарабию
country_event = {
	id = romania.6
	
	title = romania.6.t
	desc = romania.6.desc
	
	picture = GFX_report_event_bul_dobro_pole
	
	immediate = {
		hidden_effect = {
			if = {
				limit = { owns_state = 79 78 = { OWNER = { has_war_with = ROOT any_owned_state = { NOT = { state = 78 } } } } }
				set_state_owner = 78
				if = {
					limit = { 766 = { OWNER = { has_war_with = ROOT any_owned_state = { NOT = { state = 766 } } } } }
					set_state_owner = 766
				}
			}
		}
	}
	
	is_triggered_only = yes
	
	option = {
		trigger = { owns_state = 79 NOT = { owns_state = 766 } }
		name = romania.6.a
		delete_unit_template_and_units = {
			division_template = "Mobilized Infantry Division"
		}
		add_war_support = -0.05
		ai_chance = {
			factor = 0
		}
	}
	option = {
		trigger = { NOT = { owns_state = 79 } }
		name = romania.6.b
		delete_unit_template_and_units = {
			division_template = "Mobilized Infantry Division"
		}
		add_war_support = -0.1
		add_stability = -0.1
	}
	option = {
		trigger = { owns_state = 79 owns_state = 78 owns_state = 766 }
		name = romania.6.c
		delete_unit_template_and_units = {
			division_template = "Mobilized Infantry Division"
		}
		add_war_support = 0.1
	}
	option = {
		trigger = { owns_state = 79 NOT = { owns_state = 78 owns_state = 766 } 78 = { CONTROLLER = { NOT = { former_russian_empire_ukraine_country = yes } } } }
		name = romania.6.d
		transfer_state = 78
		country_event = romania.6
	}
	option = {
		trigger = { owns_state = 79 NOT = { owns_state = 78 owns_state = 766 } 78 = { CONTROLLER = { former_russian_empire_ukraine_country = yes } } }
		name = romania.6.e
		start_border_war = {
			change_state_after_war = yes
			attacker = {
				state = 79
				num_provinces = 6
				on_win = romania.6
				on_lose = romania.6
				on_cancel = romania.6
			}
			defender = {
				state = 78
				num_provinces = 5
				on_win = romania.8
				on_lose = romania.7
				on_cancel = romania.9
			}
		}
	}
	option = {
		trigger = { owns_state = 79 owns_state = 78 NOT = { owns_state = 766 } 766 = { CONTROLLER = { NOT = { former_russian_empire_ukraine_country = yes } } } }
		name = romania.6.c
		transfer_state = 766
		delete_unit_template_and_units = {
			division_template = "Mobilized Infantry Division"
		}
		add_war_support = 0.1
	}
	option = {
		trigger = { owns_state = 79 owns_state = 78 NOT = { owns_state = 766 } 766 = { CONTROLLER = { former_russian_empire_ukraine_country = yes } } }
		name = romania.6.e
		start_border_war = {
			change_state_after_war = yes
			attacker = {
				state = 78
				num_provinces = 2
				on_win = romania.6
				on_lose = romania.6
				on_cancel = romania.6
			}
			defender = {
				state = 766
				num_provinces = 2
				on_win = romania.8
				on_lose = romania.7
				on_cancel = romania.9
			}
		}
	}
}
# Победа Румынии в Бессарабии
country_event = {
	id = romania.7
	
	title = romania.7.t
	desc = romania.7.desc
	
	picture = GFX_report_event_bul_dobro_pole
	
	is_triggered_only = yes
	
	option = {
		name = romania.7.a
		add_war_support = -0.05
	}
}
# Поражение Румынии в Бессарабии
country_event = {
	id = romania.8
	
	title = romania.8.t
	desc = romania.8.desc
	
	picture = GFX_report_event_bul_dobro_pole
	
	is_triggered_only = yes
	
	option = {
		name = romania.8.a
		add_war_support = 0.05
	}
}
# Статус-кво
country_event = {
	id = romania.9
	
	title = romania.9.t
	desc = romania.9.desc
	
	picture = GFX_report_event_bul_dobro_pole
	
	is_triggered_only = yes
	
	option = {
		name = romania.9.a
	}
}