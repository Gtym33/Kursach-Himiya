add_namespace = poland

# Независимость Польши после поражения Германии в ПМВ
country_event = {
	id = poland.1
	title = poland.1.t
	desc = poland.1.desc

	picture = GFX_report_event_greece_civil_war_soldiers
	
	fire_only_once = yes
	
	trigger = {
		has_start_date < 1918.11.11
		tag = POL
		OR = {
			has_global_flag = WWI_GER_HAS_CAPITULATED
			GER = { has_country_flag = GER_monarchy_fall }
		}
		is_subject = no
		NOT = { has_country_leader = { name = "Józef Pilsudski" } }
	}

	mean_time_to_happen = {
		days = 0
	}
	
	option = {
		name = poland.1.a
		drop_cosmetic_tag = yes
		add_popularity = { ideology = authoritarism popularity = -1 }
		if = {
			limit = { has_country_leader = { name = "Hans Beseler" ruling_only = yes } }
			retire_country_leader = yes
		}
		add_popularity = { ideology = social_democracy popularity = 0.1 }
		set_politics = { ruling_party = despotism elections_allowed = no }
		if = {
			limit = { has_country_leader = { name = "Hans Beseler" ruling_only = yes } }
			retire_country_leader = yes
		}
		create_country_leader = { name = "Józef Pilsudski" desc = POL_jozef_pilsudski_DESC picture = "gfx/leaders/POL/Jusef_Pilsudsky.dds" expire = "1935.1.1" ideology = despotism_ideology  traits = {  } }
		create_field_marshal = {  name = "Józef Pilsudski" id = 69053 portrait_path = "gfx/leaders/POL/Jusef_Pilsudky_military.dds" traits = { politically_connected war_hero infantry_officer offensive_doctrine adaptable } skill = 3 attack_skill = 4 defense_skill = 1 planning_skill = 2 logistics_skill = 3 }
		load_oob = POL_1917
	}
}

# Захват ЗУНР
country_event = {
	id = poland.2
	title = poland.2.t
	desc = poland.2.desc

	picture = GFX_report_event_greece_civil_war_soldiers
	
	fire_only_once = yes
	
	trigger = {
		tag = POL
		OR = {
			has_global_flag = WWI_GER_HAS_CAPITULATED
			GER = { has_country_flag = GER_monarchy_fall }
		}
		GAL = { exists = yes is_puppet = no }
	}

	mean_time_to_happen = {
		days = 0
	}
	
	option = {
		name = poland.2.a
		ai_chance = {
			factor = 1
		}
		add_war_support = 0.05
		add_popularity = { ideology = despotism popularity = 0.1 }
		declare_war_on = {
				target = GAL
				type = annex_everything
			}
		hidden_effect = {
			GAL = {
				load_oob = GAL_defender
			}
		}
	}
	
	option = {
		name = poland.2.b
		ai_chance = {
			factor = 0
		}
		add_war_support = -0.1
		add_popularity = { ideology = despotism popularity = -0.3 }
	}
}

# ЗУНР отбилась
country_event = {
	id = poland.3
	title = poland.3.t
	desc = poland.3.desc

	picture = GFX_report_event_greece_civil_war_soldiers
	
	fire_only_once = yes
	
	trigger = {
		tag = POL
		has_war_with = GAL
		GAL = { is_puppet = no }
		OR = {
			NOT = {
				controls_state = 10
			}
			has_capitulated = yes
			surrender_progress > 0.4
		}
	}

	mean_time_to_happen = {
		days = 0
	}
	
	option = {
		name = poland.3.a
		add_war_support = -0.3
		every_country = {
				limit = {
					has_war_with = GAL
					OR = {
						tag = POL
						is_in_faction_with = POL
					}
				}
				white_peace = GAL
		}
	}
	
}

# Конфликт с Литвой
country_event = {
	id = poland.4
	title = poland.4.t
	desc = poland.4.desc

	picture = GFX_report_event_greece_civil_war_soldiers
	
	trigger = {
		tag = POL
		OR = {
			has_global_flag = WWI_GER_HAS_CAPITULATED
			GER = { has_country_flag = GER_monarchy_fall }
		}
		owns_state = 822
		LIT = { owns_state = 97 }
		has_war = no
	}

	mean_time_to_happen = {
		days = 0
	}
	
	fire_only_once = yes
	
	option = {
		ai_chance = {
			factor = 100
		}
		name = poland.2.a
			start_border_war = {
				change_state_after_war = yes
				attacker = {
					state = 822
					num_provinces = 2
					on_win = poland.6
					on_lose = poland.5
					on_cancel = poland.5
				}
				defender = {
					state = 97
					num_provinces = 3
					on_win = poland.5
					on_lose = poland.6
					on_cancel = poland.5
				}
			}
	}
	option = {
		ai_chance = {
			factor = 0
		}
		name = poland.2.b
	}
}

# Поражение (остановка)
country_event = {
	id = poland.5
	title = poland.5.t
	desc = poland.5.desc

	picture = GFX_report_event_greece_civil_war_soldiers
	
	is_triggered_only = yes
	
	option = {
		name = poland.5.a
	}
}
# Промежуточная победа
country_event = {
	id = poland.6
	title = poland.6.t
	desc = poland.6.desc

	picture = GFX_report_event_greece_civil_war_soldiers
	
	is_triggered_only = yes
	
	option = {
		name = poland.6.a
		if = {
			limit = { tag = POL country_exists = BLR }
			start_border_war = {
				change_state_after_war = yes
				attacker = {
					state = 97
					num_provinces = 3
					on_win = poland.7
					on_lose = poland.5
					on_cancel = poland.5
				}
				defender = {
					state = 956
					num_provinces = 3
					on_win = poland.5
					on_lose = poland.7
					on_cancel = poland.5
				}
			}
		}
	}
}
# Победа и переход в наступление на БНР
country_event = {
	id = poland.7
	title = poland.7.t
	desc = poland.7.desc

	picture = GFX_report_event_greece_civil_war_soldiers
	
	is_triggered_only = yes
	
	option = {
		name = poland.7.a
		if = {
			limit = { tag = POL }
			hidden_effect = { transfer_state = 97 transfer_state = 956 }
			if = {
				limit = { BLR = { owns_state = 927 } }
				declare_war_on = {
					target = BLR
					type = annex_everything
				}
				if = {
					limit = { BLR = { has_war_with = RUS } }
					declare_war_on = {
						target = RUS
						type = annex_everything
					}
				}
			}
		}
	}
}

# Холмщина и Подляшье
country_event = {
	id = poland.8
	title = poland.8.t
	desc = poland.8.desc

	picture = GFX_report_event_greece_civil_war_soldiers
	
	trigger = {
		tag = POL
		OR = {
			has_global_flag = WWI_GER_HAS_CAPITULATED
			GER = { has_country_flag = GER_monarchy_fall }
		}
		owns_state = 92
		GAL = { exists = no }
		any_country = {
			original_tag = UKR
			surrender_progress > 0.5
		}
		904 = { OWNER = { original_tag = UKR } }
		1165 = { OWNER = { original_tag = UKR } }
	}
	
	mean_time_to_happen = { days = 0 }
	
	fire_only_once = yes
	
	option = {
		ai_chance = {
			factor = 100
		}
		name = poland.8.a
		random_other_country = {
			limit = {
				original_tag = UKR
				is_neighbor_of = POL
			}
			country_event = { id = poland.9 hours = 2 }
		}
		transfer_state = 904
		transfer_state = 1165
	}
	option = {
		ai_chance = {
			factor = 0
		}
		name = poland.8.b
		
	}
}
# Ответ Польше (Украина)
country_event = {
	id = poland.9
	title = poland.9.t
	desc = poland.9.desc

	picture = GFX_report_event_greece_civil_war_soldiers
	
	trigger = {
		tag = UKR
		is_subject = no
	}
	
	is_triggered_only = yes
	
	option = {
		ai_chance = {
			factor = 100
		}
		name = poland.9.a
		trigger = { NOT = { has_country_flag = UKR_white has_government = communism has_government = radical_socialism } }
		add_stability = -0.01
		every_state = {
			limit = {
				is_owned_by = ROOT
				OR = {
					is_core_of = FROM
					is_claimed_by = FROM
				}
			}
			FROM = { set_state_owner = PREV }
		}
		FROM = {
			every_country = {
				limit = { has_war_with = ROOT NOT = { has_war_with = PREV } }
				PREV = { add_to_war = { targeted_alliance = ROOT enemy = PREV } }
				if = {
					limit = { OR = { is_faction_leader = yes AND = { is_in_faction = no is_subject = no } } }
					country_event = poland.21 # уведомление о том, что Польша взяла Украину
				}
			}
		}
		FROM = { UKR = { subjecting_script_with_transfer_parties_colony = yes } }
	}
	option = {
		ai_chance = {
			factor = 0
		}
		name = poland.9.b
		FROM = { country_event = { id = poland.10 days = 1 } }
	}
	option = {
		ai_chance = {
			factor = 0
		}
		name = poland.9.c
		every_country = {
			limit = {
				former_russian_empire_ukraine_country = yes
				NOT = { has_war_with = ROOT }
			}
			declare_war_on = {
				target = FROM
				type = annex_everything
			}
		}
	}
}

# Польша реагирует на неуступчивость Украины
country_event = {
	id = poland.10
	title = poland.10.t
	desc = poland.10.desc

	picture = GFX_report_event_greece_civil_war_soldiers
	
	is_triggered_only = yes
	
	option = {
		ai_chance = {
			factor = 0
		}
		name = poland.10.a
	}
	option = {
		ai_chance = {
			factor = 100
		}
		name = poland.10.b
		every_country = {
			limit = {
				former_russian_empire_ukraine_country = yes
				NOT = { has_war_with = ROOT }
			}
			ROOT = {
				declare_war_on = {
					target = PREV
					type = annex_everything
				}
			}
		}
		if = {
			limit = { UKR = { has_war_with = RUS } }
			declare_war_on = {
				target = RUS
				type = annex_everything
			}
		}
	}
}

# Польша или Россия предлагает другой стороне мир с большими уступками для Польши
country_event = {
	id = poland.11
	title = poland.11.t
	desc = poland.11.desc

	picture = GFX_report_event_greece_civil_war_soldiers
	
	is_triggered_only = yes
	
	option = {
		name = poland.11.a
		set_global_flag = POL_communist_peace_fired
		if = {
			limit = { BLR = { exists = yes is_subject_of = POL } }
			RUS = {
				annex_country = { 
					target = BLR
					transfer_troops = no 
				}
			}
		}
		if = {
			limit = { UKR = { exists = yes is_subject_of = POL } }
			RUS = {
				annex_country = { 
					target = UKR
					transfer_troops = no 
				}
			}
		}
		every_state = {
			limit = {
				is_owned_by = RUS
				OR = {
					is_core_of = POL
					is_claimed_by = POL
				}
			}
			POL = { transfer_state = PREV }
		}
		if = {
			limit = { BLR = { exists = yes is_subject_of = RUS } }
			every_state = {
				limit = {
					is_owned_by = BLR
					OR = {
						is_core_of = POL
						is_claimed_by = POL
					}
				}
				POL = { transfer_state = PREV }
			}
		}
		if = {
			limit = { OR = { UKR = { exists = yes is_subject_of = RUS } USR = { exists = yes is_subject_of = RUS } } }
			every_state = {
				limit = {
					OR = {
						is_owned_by = UKR
						is_owned_by = USR
					}
					OR = {
						is_core_of = POL
						is_claimed_by = POL
					}
				}
				POL = { transfer_state = PREV }
			}
		}
		if = {
			limit = { LIT = { exists = yes is_subject_of = RUS } }
			every_state = {
				limit = {
					is_owned_by = LIT
					OR = {
						is_core_of = POL
						is_claimed_by = POL
					}
				}
				POL = { transfer_state = PREV }
			}
		}
		if = {
			limit = { LAT = { has_war_with = RUS } }
			every_country = {
				limit = { OR = { tag = RUS is_in_faction_with = RUS } }
				LAT = { white_peace = PREV }
			}
			every_state = {
				limit = {
					is_owned_by = RUS
					is_core_of = LAT
				}
				LAT = { transfer_state = PREV }
			}
		}
		if = {
			limit = { EST = { has_war_with = RUS } }
			every_country = {
				limit = { OR = { tag = RUS is_in_faction_with = RUS } }
				EST = { white_peace = PREV }
			}
			every_state = {
				limit = {
					is_owned_by = RUS
					is_core_of = EST
				}
				EST = { transfer_state = PREV }
			}
		}
		every_country = {
			limit = { OR = { tag = RUS is_in_faction_with = RUS } }
			POL = { white_peace = PREV }
		}
	}
	option = {
		ai_chance = {
			factor = 1
		}
		name = poland.11.b
		FROM = { country_event = poland.17 }
		ai_chance = {
			factor = 2
		}
	}
	option = {
		name = poland.11.b
		set_global_flag = POL_RUS_peace_fired
		if = {
			limit = { BLR = { exists = yes is_subject_of = POL } }
			every_state = {
				limit = {
					OWNER = {
						OR = {
							tag = RUS
							is_subject_of = RUS
						}
					}
					is_core_of = BLR
				}
				BLR = { transfer_state = PREV }
			}
		}
		if = {
			limit = { UKR = { exists = yes is_subject_of = POL } }
			every_state = {
				limit = {
					OWNER = {
						OR = {
							tag = RUS
							is_subject_of = RUS
						}
					}
					is_core_of = UKR
				}
				UKR = { transfer_state = PREV }
			}
		}
		if = {
			limit = { LIT = { exists = yes is_subject_of = POL } }
			every_state = {
				limit = {
					OWNER = {
						OR = {
							tag = RUS
							is_subject_of = RUS
						}
					}
					is_core_of = LIT
				}
				LIT = { transfer_state = PREV }
			}
		}
		if = {
			limit = { LAT = { exists = yes is_subject_of = POL } }
			every_state = {
				limit = {
					OWNER = {
						OR = {
							tag = RUS
							is_subject_of = RUS
						}
					}
					is_core_of = LAT
				}
				LAT = { transfer_state = PREV }
			}
		}
		if = {
			limit = { EST = { exists = yes is_subject_of = POL } }
			every_state = {
				limit = {
					OWNER = {
						OR = {
							tag = RUS
							is_subject_of = RUS
						}
					}
					is_core_of = EST
				}
				EST = { transfer_state = PREV }
			}
		}
		every_state = {
			limit = {
				OWNER = {
					OR = {
						tag = RUS
						is_subject_of = RUS
					}
				}
				OR = {
					is_core_of = POL
					is_claimed_by = POL
					is_core_of = BLR
					is_claimed_by = BLR
					is_core_of = LIT
					is_claimed_by = LIT
					is_core_of = COU
					is_claimed_by = COU
					is_core_of = UKR
					is_claimed_by = UKR
				}
			}
			POL = { transfer_state = PREV }
		}
		if = {
			limit = { BLR = { exists = yes is_subject_of = RUS } }
			POL = {
				annex_country = {
					target = BLR
					transfer_troops = no
				}
			}
		}
		if = {
			limit = { OR = { UKR = { exists = yes is_subject_of = RUS } USR = { exists = yes is_subject_of = RUS } } }
			if = {
				limit = { UKR = { exists = yes is_subject_of = RUS } }
				POL = {
					annex_country = {
						target = UKR
						transfer_troops = no 
					}
				}
			}
			if = {
				limit = { USR = { exists = yes is_subject_of = RUS } }
				POL = {
					annex_country = {
						target = USR
						transfer_troops = no 
					}
				}
			}
		}
		if = {
			limit = { LIT = { exists = yes is_subject_of = RUS } }
			POL = {
				annex_country = {
					target = LIT
					transfer_troops = no 
				}
			}
		}
		if = {
			limit = { LAT = { has_war_with = RUS } }
			every_country = {
				limit = { OR = { tag = RUS is_in_faction_with = RUS } }
				LAT = { white_peace = PREV }
			}
			every_state = {
				limit = {
					is_owned_by = RUS
					OR = {
						is_core_of = LAT
						is_claimed_by = LAT
					}
				}
				LAT = { transfer_state = PREV }
			}
		}
		if = {
			limit = { EST = { has_war_with = RUS } }
			every_country = {
				limit = { OR = { tag = RUS is_in_faction_with = RUS } }
				EST = { white_peace = PREV }
			}
			every_state = {
				limit = {
					is_owned_by = RUS
					OR = {
						is_core_of = EST
						is_claimed_by = EST
					}
				}
				EST = { transfer_state = PREV }
			}
		}
		every_country = {
			limit = { OR = { tag = RUS is_in_faction_with = RUS } }
			POL = { white_peace = PREV }
		}
		ai_chance = {
			factor = 2
		}
	}
}

# Польша или Россия предлагает другой стороне историчный мир
country_event = {
	id = poland.12
	title = poland.12.t
	desc = poland.12.desc

	picture = GFX_report_event_greece_civil_war_soldiers
	
	is_triggered_only = yes
	
	option = {
		name = poland.12.a
		FROM = { country_event = poland.17 }
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = poland.12.b
		set_global_flag = POL_RUS_peace_fired
		if = {
			limit = { BLR = { exists = yes is_subject_of = POL } }
			RUS = {
				annex_country = {
					target = BLR
					transfer_troops = no
				}
			}
		}
		if = {
			limit = { UKR = { exists = yes is_subject_of = POL } }
			RUS = {
				annex_country = {
					target = UKR
					transfer_troops = no 
				}
			}
		}
		if = {
			limit = { LIT = { exists = yes is_subject_of = RUS } }
			POL = {
				annex_country = {
					target = LIT
					transfer_troops = no 
				}
			}
		}
		every_state = {
			limit = {
				OR = {
					is_core_of = POL
					is_claimed_by = POL
				}
				OWNER = {
					OR = {
						tag = RUS
						is_subject_of = RUS
					}
				}
			}
			POL = { transfer_state = PREV }
		}
		every_state = {
			limit = {
				is_core_of = LIT
				OWNER = {
					OR = {
						tag = RUS
						is_subject_of = RUS
					}
				}
			}
			POL = { transfer_state = PREV }
		}
		every_country = {
			limit = { OR = { tag = RUS is_in_faction_with = RUS } }
			POL = { white_peace = PREV }
		}
		ai_chance = {
			factor = 4
		}
	}
}

# Польша или Россия предлагает другой стороне мир (Польша замкнута в границах царства польского)
country_event = {
	id = poland.13
	title = poland.13.t
	desc = poland.13.desc

	picture = GFX_report_event_greece_civil_war_soldiers
	
	is_triggered_only = yes
	
	option = {
		name = poland.13.a
		FROM = { country_event = poland.17 }
		ai_chance = {
			factor = 2
		}
	}
	option = {
		name = poland.13.b
		set_global_flag = POL_RUS_peace_fired
		if = {
			limit = { BLR = { exists = yes is_subject_of = POL } }
			RUS = {
				annex_country = {
					target = BLR
					transfer_troops = no 
				}
			}
		}
		if = {
			limit = { UKR = { exists = yes is_subject_of = POL } }
			RUS = {
				annex_country = {
					target = UKR
					transfer_troops = no 
				}
			}
		}
		if = {
			limit = { LIT = { exists = yes is_subject_of = POL } }
			RUS = {
				annex_country = {
					target = LIT
					transfer_troops = no 
				}
			}
		}
		if = {
			limit = { LAT = { exists = yes is_subject_of = POL } }
			RUS = {
				annex_country = {
					target = LAT
					transfer_troops = no 
				}
			}
		}
		if = {
			limit = { EST = { exists = yes is_subject_of = POL } }
			RUS = {
				annex_country = {
					target = EST
					transfer_troops = no 
				}
			}
		}
		every_state = {
			limit = {
				is_core_of = POL
				OWNER = {
					OR = {
						tag = RUS
						is_subject_of = RUS
					}
				}
			}
			POL = { transfer_state = PREV }
		}
		if = {
			limit = { BLR = { exists = yes is_subject_of = RUS } }
			every_state = {
				limit = {
					is_owned_by = POL
					OR = {
						is_core_of = BLR
						is_claimed_by = BLR
					}
				}
				BLR = { transfer_state = PREV }
			}
		}
		if = {
			limit = { OR = { UKR = { exists = yes is_subject_of = RUS } USR = { exists = yes is_subject_of = RUS } } }
			if = {
				limit = { UKR = { exists = yes is_subject_of = RUS } }
				every_state = {
					limit = {
						is_owned_by = POL
						OR = {
							is_core_of = UKR
							is_claimed_by = UKR
						}
					}
					UKR = { transfer_state = PREV }
				}
			}
			if = {
				limit = { USR = { exists = yes is_subject_of = RUS } }
				every_state = {
					limit = {
						is_owned_by = POL
						OR = {
							is_core_of = USR
							is_claimed_by = USR
						}
					}
					USR = { transfer_state = PREV }
				}
			}
		}
		every_country = {
			limit = { OR = { tag = RUS is_in_faction_with = RUS } }
			POL = { white_peace = PREV }
		}
		ai_chance = {
			factor = 2
		}
	}
}

# Польша потерпела поражение от России
country_event = {
	id = poland.14
	title = poland.14.t
	desc = poland.14.desc

	picture = GFX_report_event_greece_civil_war_soldiers
	
	trigger = {
		tag = RUS
		has_war_with = POL
		has_country_flag = RUS_Oktober_revolution_fired
		has_government = communism
		RUS = { is_subject = no }
		POL = { is_subject = no }
		NOT = { has_global_flag = RUS_civil_war_over }
		NOT = { has_global_flag = POL_RUS_peace_fired }
		POL = {
			surrender_progress > 0.8
			NOT = {
				controls_state = 10
			}
		}
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = poland.14.a
		set_global_flag = POL_RUS_peace_fired
		if = {
			limit = { BLR = { exists = yes is_subject_of = POL } }
			RUS = {
				annex_country = { 
					target = BLR
					transfer_troops = no 
				}
			}
		}
		if = {
			limit = { UKR = { exists = yes is_subject_of = POL } }
			RUS = {
				annex_country = { 
					target = UKR
					transfer_troops = no 
				}
			}
		}
		if = {
			limit = { LIT = { exists = yes is_subject_of = POL } }
			RUS = {
				annex_country = { 
					target = LIT
					transfer_troops = no 
				}
			}
		}
		if = {
			limit = { LAT = { exists = yes is_subject_of = POL } }
			RUS = {
				annex_country = { 
					target = LAT
					transfer_troops = no 
				}
			}
		}
		if = {
			limit = { EST = { exists = yes is_subject_of = POL } }
			RUS = {
				annex_country = { 
					target = EST
					transfer_troops = no 
				}
			}
		}
		every_state = {
			limit = {
				is_owned_by = RUS
				is_core_of = POL
			}
			POL = { transfer_state = PREV }
		}
		if = {
			limit = { BLR = { exists = yes is_subject_of = RUS } }
			every_state = {
				limit = {
					is_owned_by = POL
					OR = {
						is_core_of = BLR
						is_claimed_by = BLR
					}
				}
				BLR = { transfer_state = PREV }
			}
		}
		if = {
			limit = { OR = { UKR = { exists = yes is_subject_of = RUS } USR = { exists = yes is_subject_of = RUS } } }
			if = {
				limit = { UKR = { exists = yes is_subject_of = RUS } }
				every_state = {
					limit = {
						is_owned_by = POL
						OR = {
							is_core_of = UKR
							is_claimed_by = UKR
						}
					}
					UKR = { transfer_state = PREV }
				}
			}
			if = {
				limit = { USR = { exists = yes is_subject_of = RUS } }
				every_state = {
					limit = {
						is_owned_by = POL
						OR = {
							is_core_of = USR
							is_claimed_by = USR
						}
					}
					USR = { transfer_state = PREV }
				}
			}
		}
		every_country = {
			limit = { OR = { tag = RUS is_in_faction_with = RUS } }
			POL = { white_peace = PREV }
		}
		if = {
			limit = { RUS = { is_faction_leader = yes } }
			RUS = { add_to_faction = POL }
		}
		POL = {
			add_popularity = { ideology = communism popularity = 0.15 }
			set_politics = {
				ruling_party = communism
				elections_allowed = no
			}
			add_ideas = {
				military_dictatorship_gov_form
				local_assembly_decisions_b_law
				unitary_gov_terr
				allow_one_party_law
				ideological_expansion_law
				workers_control_law
				
				civilian_economy
				disarmed_nation
			}
			create_country_leader = { name = "Jozef Unszlicht" desc = "" picture = "gfx/leaders/SOV/Jozef_Unszlicht.dds" ideology = leninism traits = { } }
		}
		RUS = { POL = { subjecting_script_with_transfer_parties_dominion = yes } }
	}
}

# Россия потерпела поражение от Польши
country_event = {
	id = poland.15
	title = poland.15.t
	desc = poland.15.desc

	picture = GFX_report_event_greece_civil_war_soldiers
	
	trigger = {
		tag = RUS
		has_war_with = POL
		has_country_flag = RUS_Oktober_revolution_fired
		has_government = communism
		RUS = { is_subject = no }
		POL = { is_subject = no }
		NOT = { has_global_flag = RUS_civil_war_over }
		NOT = { has_global_flag = POL_RUS_peace_fired }
		RUS = {
			surrender_progress > 0.6
			NOT = {
				controls_state = 206
				controls_state = 202
				OR = {
					controls_state = 195
					controls_state = 219
					controls_state = 813
				}
			}
		}
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = poland.15.a
		set_global_flag = POL_RUS_peace_fired
		if = {
			limit = { BLR = { exists = yes is_subject_of = POL } }
			every_state = {
				limit = {
					is_owned_by = RUS
					is_core_of = BLR
				}
				BLR = { transfer_state = PREV }
			}
		}
		if = {
			limit = { UKR = { exists = yes is_subject_of = POL } }
			every_state = {
				limit = {
					is_owned_by = RUS
					is_core_of = UKR
				}
				UKR = { transfer_state = PREV }
			}
		}
		if = {
			limit = { LIT = { exists = yes is_subject_of = POL } }
			every_state = {
				limit = {
					is_owned_by = RUS
					is_core_of = LIT
				}
				LIT = { transfer_state = PREV }
			}
		}
		if = {
			limit = { LAT = { exists = yes is_subject_of = POL } }
			every_state = {
				limit = {
					is_owned_by = RUS
					is_core_of = LAT
				}
				LAT = { transfer_state = PREV }
			}
		}
		if = {
			limit = { EST = { exists = yes is_subject_of = POL } }
			every_state = {
				limit = {
					is_owned_by = RUS
					is_core_of = EST
				}
				EST = { transfer_state = PREV }
			}
		}
		if = {
			limit = { CRI = { exists = yes is_subject_of = POL } }
			every_state = {
				limit = {
					is_owned_by = RUS
					is_core_of = CRI
				}
				CRI = { transfer_state = PREV }
			}
		}
		every_state = {
			limit = {
				is_owned_by = RUS
				OR = {
					is_core_of = POL
					is_claimed_by = POL
					is_core_of = BLR
					is_claimed_by = BLR
					is_core_of = UKR
					is_claimed_by = UKR
					is_core_of = LIT
					is_claimed_by = LIT
					is_core_of = LAT
					is_claimed_by = LAT
					is_core_of = EST
					is_claimed_by = EST
					is_core_of = CRI
					is_claimed_by = CRI
				}
			}
			POL = { transfer_state = PREV }
		}
		if = {
			limit = { BLR = { exists = yes is_subject_of = RUS } }
			POL = {
				annex_country = { 
					target = BLR
					transfer_troops = no 
				}
			}
		}
		if = {
			limit = { OR = { UKR = { exists = yes is_subject_of = RUS } USR = { exists = yes is_subject_of = RUS } } }
			if = {
				limit = { UKR = { exists = yes is_subject_of = RUS } }
				POL = {
					annex_country = { 
						target = UKR
						transfer_troops = no 
					}
				}
			}
			if = {
				limit = { USR = { exists = yes is_subject_of = RUS } }
				POL = {
					annex_country = { 
						target = USR
						transfer_troops = no 
					}
				}
			}
		}
		if = {
			limit = { LIT = { exists = yes is_subject_of = RUS } }
			POL = {
				annex_country = { 
					target = LIT
					transfer_troops = no 
				}
			}
		}
		if = {
			limit = { LAT = { exists = yes is_subject_of = RUS } }
			POL = {
				annex_country = { 
					target = LAT
					transfer_troops = no 
				}
			}
		}
		if = {
			limit = { EST = { exists = yes is_subject_of = RUS } }
			POL = {
				annex_country = { 
					target = EST
					transfer_troops = no 
				}
			}
		}
		if = {
			limit = { CRI = { exists = yes is_subject_of = RUS } }
			POL = {
				annex_country = { 
					target = CRI
					transfer_troops = no 
				}
			}
		}
		every_state = {
			limit = {
				is_owned_by = RUS
				OR = {
					state = 865
					state = 210
					state = 242
					state = 243
					state = 1016
					#state = 1169
					state = 224
					state = 960
					state = 220
					state = 240
				}
			}
			POL = { transfer_state = PREV }
		}
		every_country = {
			limit = { OR = { tag = RUS is_in_faction_with = RUS } }
			POL = { white_peace = PREV }
		}
		
	}
}

# Оповещалка о отклонении мирного предложения
country_event = {
	id = poland.17
	title = poland.17.t
	desc = poland.17.desc

	picture = GFX_report_event_greece_civil_war_soldiers
	
	is_triggered_only = yes
	
	option = {
		name = poland.17.a
		
	}
}

# Оповещалка о переходе Украины в подданство Польши
country_event = {
	id = poland.21
	title = poland.21.t
	desc = poland.21.desc

	picture = GFX_report_event_greece_civil_war_soldiers
	
	is_triggered_only = yes
	
	option = {
		name = poland.21.a
		
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = poland.21.b
		
		every_state = {
			limit = {
				is_controlled_by = UKR
				OR = {
					is_core_of = UKR
					is_claimed_by = UKR
				}
				OWNER = {
					OR = {
						tag = ROOT
						is_in_faction_with = ROOT
						is_subject_of = ROOT
					}
				}
			}
			UKR = { transfer_state = PREV }
		}
		every_state = {
			limit = {
				CONTROLLER = {
					OR = {
						tag = ROOT
						is_in_faction_with = ROOT
						is_subject_of = ROOT
					}
				}
				OR = {
					is_core_of = CONTROLLER
					is_claimed_by = CONTROLLER
				}
				is_owned_by = UKR
			}
			CONTROLLER = { transfer_state = PREV }
		}
		FROM = {
			OVERLORD = {
				ROOT = { white_peace = PREV }
			}
		}
		
		ai_chance = {
			factor = 4
			modifier = {
				factor = 0
				tag = RUS
			}
		}
	}
}