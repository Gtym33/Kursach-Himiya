###########################
# Treaty of Brest-Litovsk Events
###########################

add_namespace = treaty_of_brest

# Начало переговоров
country_event = {
	id = treaty_of_brest.1
	title = treaty_of_brest.1.t
	desc = {
		text = treaty_of_brest.1.d
		trigger = {
			OR = {
				has_government = communism
				has_government = radical_socialism
			}
		}
	}
	desc = {
		text = treaty_of_brest.1.d_1
		trigger = {
			NOT = {
				has_government = communism
				has_government = radical_socialism
			}
		}
	}
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	option = {
		name = treaty_of_brest.1.a #отправить делегацию в Германию
		if = {
			limit = { has_global_flag = RUS_monarchy_Petrograd_commune_civil_war }
			GER = { country_event = treaty_of_brest.2 }
			else = { GER = { country_event = { id = treaty_of_brest.2 days = 9 } } }
		}
	}
}

# Предложение большевиков
country_event = {
	id = treaty_of_brest.2
	title = {
		text = treaty_of_brest.2.t
		trigger = {
			RUS = { has_government = communism }
		}
	}
	title = {
		text = treaty_of_brest.2.t_1
		trigger = {
			RUS = { NOT = { has_government = communism } }
		}
	}
	desc = {
		text = treaty_of_brest.2.d
		trigger = {
			RUS = { OR = { has_government = communism has_government = radical_socialism } }
		}
	}
	desc = {
		text = treaty_of_brest.2.d_1
		trigger = {
			RUS = { NOT = { has_government = communism has_government = radical_socialism } }
		}
	}
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	option = {
		name = treaty_of_brest.2.a #начать переговоры по сепаратному миру с Россией
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				NOT = { surrender_progress > 0.2 }
			}
			modifier = {
				factor = 0
				OR = {
					has_government = communism
					has_government = radical_socialism
					has_government = social_democracy
				}
			}
		}
		if = {
			limit = { has_global_flag = RUS_monarchy_Petrograd_commune_civil_war }
			RUS = { country_event = treaty_of_brest.3 }
			else = { RUS = { country_event = { id = treaty_of_brest.3 days = 3 } } }
		}
	}
	option = {
		name = treaty_of_brest.2.b #немедленный демократический мир без аннексий и контрибуций
		ai_chance = {
			factor = 0
			modifier = {
				add = 99999
				surrender_progress > 0.2
			}
			modifier = {
				add = 99999
				RUS = {
					OR = {
						controls_state = 763
						controls_state = 85
						controls_state = 62
						controls_state = 64
						controls_state = 87
						controls_state = 1115
						controls_state = 88
					}
				}
			}
			modifier = {
				add = 99999
				OR = {
					has_government = communism
					has_government = radical_socialism
					has_government = social_democracy
				}
			}
		}
		RUS = { country_event = treaty_of_brest.45 }
	}
	option = {
		name = treaty_of_brest.2.c #война до победного конца
		ai_chance = {
			factor = 0
			modifier = {
				add = 1
				RUS = { surrender_progress > 0.2 }
				NOT = { surrender_progress > 0.2 }
			}
			modifier = {
				add = 2
				RUS = { surrender_progress > 0.22 }
				NOT = { surrender_progress > 0.2 }
			}
			modifier = {
				add = 3
				RUS = { surrender_progress > 0.24 }
				NOT = { surrender_progress > 0.2 }
			}
			modifier = {
				add = 5
				RUS = { surrender_progress > 0.26 }
				NOT = { surrender_progress > 0.2 }
			}
			modifier = {
				add = 10
				RUS = { surrender_progress > 0.28 }
				NOT = { surrender_progress > 0.2 }
			}
			modifier = {
				add = 99999
				RUS = { surrender_progress > 0.3 }
				NOT = { surrender_progress > 0.2 }
			}
			modifier = {
				factor = 0
				OR = {
					has_government = communism
					has_government = radical_socialism
					has_government = social_democracy
				}
			}
		}
		RUS = { country_event = treaty_of_brest.46 }
	}
}


# Начало первого этапа переговоров
country_event = {
	id = treaty_of_brest.3
	title = treaty_of_brest.3.t
	desc = treaty_of_brest.3.d
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	option = {
		name = treaty_of_brest.3.a
		set_country_flag = brest_negotiation_Lenin_can_threaten_resignation
		RUS = { add_timed_idea = { idea = brest_negotiation_truce_Russia_and_allies days = 170 } }
		UKR = { add_timed_idea = { idea = brest_negotiation_truce_Russia_and_allies days = 170 } }
		USR = { add_timed_idea = { idea = brest_negotiation_truce_Russia_and_allies days = 170 } }
		ODS = { add_timed_idea = { idea = brest_negotiation_truce_Russia_and_allies days = 170 } }
		FIN = { add_timed_idea = { idea = brest_negotiation_truce_Russia_and_allies days = 170 } }
		GER = { add_timed_idea = { idea = brest_negotiation_truce_Central_powers days = 170 } }
		AUH = { add_timed_idea = { idea = brest_negotiation_truce_Central_powers days = 170 } }
		BUL = { add_timed_idea = { idea = brest_negotiation_truce_Central_powers days = 170 } }
		TUR = { add_timed_idea = { idea = brest_negotiation_truce_Central_powers days = 170 } }
		GER = { country_event = { id = treaty_of_brest.4 days = 4 } }
	}
}

# Германия: выбор требований
country_event = {
	id = treaty_of_brest.4
	title = treaty_of_brest.4.t
	desc = treaty_of_brest.4.d
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	option = {
		name = treaty_of_brest.4.a #Польша и Прибалтика
		set_global_flag = GER_average_peace_brest_tech_flag
		if = {
			limit = { has_global_flag = RUS_monarchy_Petrograd_commune_civil_war }
			RUS = { country_event = { id = treaty_of_brest.9 days = 1 } }
			else = { RUS = { country_event = { id = treaty_of_brest.9 days = 7 } } }
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				RUS = { surrender_progress < 0.2 }
			}
		}
	}
	option = {
		name = treaty_of_brest.4.b #Польша, Литва и Белоруссия
		set_global_flag = GER_average_peace_brest_tech_flag
		set_global_flag = GER_average_peace_brest_alt_demand_tech_flag
		RUS = { country_event = { id = treaty_of_brest.9 days = 7 } }
		if = {
			limit = { has_global_flag = RUS_monarchy_Petrograd_commune_civil_war }
			RUS = { country_event = { id = treaty_of_brest.9 days = 1 } }
			else = { RUS = { country_event = { id = treaty_of_brest.9 days = 7 } } }
		}
		ai_chance = {
			factor = 0
		}
	}
	option = {
		name = treaty_of_brest.4.c #Обер-ост, то есть Польша, Литва и Курляндия
		if = {
			limit = { has_global_flag = RUS_monarchy_Petrograd_commune_civil_war }
			RUS = { country_event = { id = treaty_of_brest.6 days = 1 } }
			else = { RUS = { country_event = { id = treaty_of_brest.6 days = 7 } } }
		}
		ai_chance = {
			factor = 3
		}
	}
}

#Переговоры по поводу Курляндииии, Литвы и Польши
country_event = {
	id = treaty_of_brest.6
	title = treaty_of_brest.6.t
	desc = {
		text = treaty_of_brest.6.d
		trigger = {
			OR = {
				has_government = communism
				has_government = radical_socialism
			}
		}
	}
	desc = {
		text = treaty_of_brest.6.d_1
		trigger = {
			NOT = {
				has_government = communism
				has_government = radical_socialism
			}
		}
	}
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	option = {
		name = treaty_of_brest.6.a #В полном согласии с открытым заявлением обеих договаривающихся сторон об отсутствии у них завоевательных планов и о желании заключить мир без аннексий. Россия выводит свои войска из занимаемых ею частей Австро-Венгрии, Турции и Персии, а державы Четверного союза — из Польши, Литвы, Курляндии и других областей России
		GER = { country_event = { id = treaty_of_brest.7 days = 2 } }
		ai_chance = {
			factor = 1
		}
	}
	option = {
		trigger = {
			has_global_flag = RUS_monarchy_Petrograd_commune_civil_war
		}
		name = treaty_of_brest.6.b #согласится на требования немцев
		if = {
			limit = { NOT = { has_global_flag = GER_average_peace_brest_tech_flag } }
			if = {
				limit = { has_global_flag = GER_average_peace_brest_alt_demand_tech_flag }
				RUS = { set_country_flag = brest_average_alt }
			}
			GER = { country_event = { id = treaty_of_brest.44 days = 1 } }
			clr_global_flag = GER_average_peace_brest_tech_flag
			else = {
				GER = { country_event = { id = treaty_of_brest.43 days = 1 } }
			}
		}
		ai_chance = {
			factor = 99
		}
	}
}

#Ответ немцев
country_event = {
	id = treaty_of_brest.7
	title = treaty_of_brest.7.t
	desc = treaty_of_brest.7.d
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	option = {
		name = treaty_of_brest.7.a #выдвинуть контрпредложение
		if = {
			limit = { RUS = { surrender_progress < 0.2 } }
			set_global_flag = GER_average_peace_brest_tech_flag
		}
		RUS = { country_event = { id = treaty_of_brest.9 days = 1 } }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					has_government = communism
					has_government = radical_socialism
					has_government = social_democracy
				}
			}
		}
	}
	option = {
		name = treaty_of_brest.7.b #согласится с предложением большевиков
		RUS = { country_event = { id = treaty_of_brest.8 days = 1 } }
		ai_chance = {
			factor = 0
			modifier = {
				add = 99999
				OR = {
					has_government = communism
					has_government = radical_socialism
					has_government = social_democracy
				}
			}
		}
	}
}

#Заключение мира и референдум о независимости Польши, Литвы и Курляндии после вывода немецких войск
country_event = {
	id = treaty_of_brest.8
	title = treaty_of_brest.8.t
	desc = treaty_of_brest.8.d
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = { RUS = { clr_country_flag = brest_negotiation_Lenin_can_threaten_resignation } }
	}
	
	option = {
		name = treaty_of_brest.8.a
		clr_global_flag = brest_litovsk_negotiations
		clr_global_flag = brest_litovsk_negotiations_GER_UKR_peace
		clr_global_flag = brest_litovsk_GER_UKR_negotiations
		clr_global_flag = GER_average_peace_brest_tech_flag
		clr_global_flag = GER_average_peace_brest_alt_demand_tech_flag
		every_country = {
			limit = {
				OR = {
					has_idea = brest_negotiation_truce_Russia_and_allies
					has_idea = brest_negotiation_truce_Central_powers
				}
			}
			remove_ideas = {
				brest_negotiation_truce_Russia_and_allies
				brest_negotiation_truce_Central_powers
			}
		}
			every_state = {
				limit = {
					OR = {
						is_owned_by = RUS
						is_owned_by = POL
						OWNER = { is_subject_of = RUS NOT = { tag = USR tag = ODS } }
						OWNER = { is_subject_of = POL }
					}
					OR = {
						state = 784
						state = 998
						state = 95
						state = 956
						state = 1024
						state = 97
						state = 910
						state = 846
						state = 847
						state = 11
						state = 189
						state = 999
						state = 998
						state = 95
						state = 956
						state = 1024
						state = 97
						state = 910
						state = 846
					}
				}
				LIT = { transfer_state = PREV }
			}
			every_state = {
				limit = {
					is_owned_by = RUS
					is_core_of = POL
					NOT = { is_core_of = GER }
				}
				GER = { transfer_state = PREV }
			}
			if = {
				limit = { 10 = { OWNER = { OR = { tag = GER is_subject_of = GER } } POL = { OR = { is_subject_of = GER exists = no } } } }
				country_event = { id = annexs_u_puppets.2 hours = 2 }
			}
		every_state = {
			limit = { OR { is_owned_by = RUS OWNER = { is_subject_of = RUS } } OWNER = { NOT = { tag = USR tag = ODS } } is_core_of = COU }
			COU = { transfer_state = PREV }
		}
		RUS = { set_country_flag = RUS_brest_peace_white set_country_flag = RUS_brest_peace_fired }
		hidden_effect = { FRA = { country_event = { id = treaty_of_brest.101 days = 3 } } ENG = { country_event = { id = treaty_of_brest.101 days = 3 } } }
		every_country = {
			limit = { OR = { tag = GER tag = AUH tag = SNS tag = TRG tag = TUR is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = SNS is_in_faction_with = TRG is_in_faction_with = TUR AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
			white_peace = RUS
			white_peace = FIN
			white_peace = SLT
			white_peace = UKR
		}
		hidden_effect = { news_event = { id = news_n.17 hours = 48 } }
		#RUS = { white_peace = LUX }
		RUS = {
			if = {
				limit = { RUS = { NOT = { controls_state = 341 controls_state = 797 controls_state = 949 } } }
				random_country = {
					limit = { original_tag = TUR exists = yes }
					every_state = {
						limit = { is_owned_by = RUS is_core_of = PREV NOT = { state = 341 state = 949 state = 797 state = 863 state = 864 state = 898 } }
						PREV = {
							transfer_state = PREV
						}
					}
				}
			}
			if = {
				limit = { has_country_flag = RUS_occupated_PER_WWI }
				every_state = {
					limit = { is_owned_by = RUS is_core_of = PER NOT = { is_core_of = RUS } }
					PER = { transfer_state = PREV }
				}
				clr_country_flag = RUS_occupated_PER_WWI
			}
			random_country = {
				limit = { original_tag = BUL exists = yes }
				every_state = {
					limit = { is_owned_by = RUS is_core_of = PREV }
					PREV = {
						transfer_state = PREV
					}
				}
			}
		}
	}
}

# Заключение мира или предверие к новому витку переговоров
country_event = {
	id = treaty_of_brest.9
	title = treaty_of_brest.9.t
	desc = {
		text = treaty_of_brest.9.d
		trigger = {
			NOT = { has_global_flag = GER_average_peace_brest_tech_flag }
		}
	}
	desc = {
		text = treaty_of_brest.9.d_1
		trigger = {
			has_global_flag = GER_average_peace_brest_tech_flag
			NOT = { has_global_flag = GER_average_peace_brest_alt_demand_tech_flag }
		}
	}
	desc = {
		text = treaty_of_brest.9.d_2
		trigger = {
			has_global_flag = GER_average_peace_brest_tech_flag
			has_global_flag = GER_average_peace_brest_alt_demand_tech_flag
		}
	}
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				check_variable = { percent_left_faction_CC > 0.5 }
				has_country_flag = RUS_flag_soviet_power
			}
			custom_effect_tooltip = treaty_of_brest_9_left_faction_CC_more_50_tt
		}
	}
	
	option = {
		name = treaty_of_brest.9.a #начать затягивать переговоры
		set_global_flag = brest_litovsk_negotiations
		clr_global_flag = GER_average_peace_brest_tech_flag
		hidden_effect = {
			if = {
				limit = { UKR = { exists = yes NOT = { has_government = radical_socialism has_government = communism } } }
				UKR = { country_event = { id = treaty_of_brest.10 days = 15 } }
			}
		}
		ai_chance = {
			factor = 3
			modifier = {
				factor = 0
				OR = {
					has_government = authoritarism
					has_government = despotism
					has_government = fascism
				}
			}
		}
	}
	option = {
		trigger = {
			OR = {
				NOT = { check_variable = { percent_left_faction_CC > 0.5 } }
				NOT = { has_country_flag = RUS_flag_soviet_power }
			}
		}
		name = treaty_of_brest.9.b #согласится на требования немцев
		RUS = {
			add_popularity = {
				ideology = communism
				popularity = -0.05
			}
			add_popularity = {
				ideology = radical_socialism
				popularity = 0.05
			}
		}
		if = {
			limit = { NOT = { has_global_flag = GER_average_peace_brest_tech_flag } }
			if = {
				limit = { has_global_flag = GER_average_peace_brest_alt_demand_tech_flag }
				RUS = { set_country_flag = brest_average_alt }
			}
			GER = { country_event = { id = treaty_of_brest.44 days = 1 } }
			clr_global_flag = GER_average_peace_brest_tech_flag
			else = {
				GER = { country_event = { id = treaty_of_brest.43 days = 1 } }
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					has_government = radical_socialism
					has_government = communism
				}
			}
		}
	}
	option = {
		name = treaty_of_brest.9.c #продолжать войну, завершить переговоры
		trigger = {
			NOT = {
				has_government = radical_socialism
				has_government = communism
			}
		}
		every_country = {
			limit = {
				OR = {
					has_idea = brest_negotiation_truce_Russia_and_allies
					has_idea = brest_negotiation_truce_Central_powers
				}
			}
			remove_ideas = {
				brest_negotiation_truce_Russia_and_allies
				brest_negotiation_truce_Central_powers
			}
		}
		clr_global_flag = brest_litovsk_negotiations
		clr_global_flag = brest_litovsk_negotiations_GER_UKR_peace
		clr_global_flag = brest_litovsk_GER_UKR_negotiations
		clr_global_flag = GER_average_peace_brest_tech_flag
		clr_global_flag = GER_average_peace_brest_alt_demand_tech_flag
		set_global_flag = russia_rejects_german_ultimatum
		if = {
			limit = { RUS = { NOT = { has_completed_focus = RUS_WPRA } has_focus_tree = Russia_Bolsheviks_focus } }
			add_ideas = disorganization_of_army
		}
		country_event = { id = rcw_bolsheviks.304 days = 1 }
		if = {
			limit = { SLT = { exists = yes is_subject = no NOT = { has_war_with = GER } } }
			GER = {
				declare_war_on = {
					target = SLT
					type = annex_everything
				}
			}
			hidden_effect = {
				every_state = {
					limit = { is_core_of = SLT OWNER = { has_war_with = GER } }
					SLT = { set_state_owner = PREV }
				}
			}
		}
		ai_chance = {
			factor = 3
			modifier = {
				factor = 0
				surrender_progress > 0.03
			}
		}
	}
	option = {
		name = treaty_of_brest.9.e #продолжать войну, завершить переговоры
		trigger = {
			OR = {
				has_government = radical_socialism
				has_government = communism
			}
		}
		add_popularity = {
			ideology = communism
			popularity = -0.025
		}
		add_popularity = {
			ideology = radical_socialism
			popularity = -0.025
		}
		every_country = {
			limit = {
				OR = {
					has_idea = brest_negotiation_truce_Russia_and_allies
					has_idea = brest_negotiation_truce_Central_powers
				}
			}
			remove_ideas = {
				brest_negotiation_truce_Russia_and_allies
				brest_negotiation_truce_Central_powers
			}
		}
		clr_global_flag = brest_litovsk_negotiations
		clr_global_flag = brest_litovsk_negotiations_GER_UKR_peace
		clr_global_flag = brest_litovsk_GER_UKR_negotiations
		clr_global_flag = GER_average_peace_brest_tech_flag
		clr_global_flag = GER_average_peace_brest_alt_demand_tech_flag
		set_global_flag = russia_rejects_german_ultimatum
		if = {
			limit = { RUS = { NOT = { has_completed_focus = RUS_WPRA } has_focus_tree = Russia_Bolsheviks_focus } }
			add_ideas = disorganization_of_army
		}
		country_event = { id = rcw_bolsheviks.304 days = 1 }
		if = {
			limit = { SLT = { exists = yes is_subject = no NOT = { has_war_with = GER } } }
			GER = {
				declare_war_on = {
					target = SLT
					type = annex_everything
				}
			}
			hidden_effect = {
				every_state = {
					limit = { is_core_of = SLT OWNER = { has_war_with = GER } }
					SLT = { set_state_owner = PREV }
				}
			}
		}
		ai_chance = {
			factor = 3
			modifier = {
				factor = 0
				surrender_progress > 0.03
			}
		}
	}
}

country_event = {
	id = treaty_of_brest.10
	title = treaty_of_brest.10.t
	desc = treaty_of_brest.10.d
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	option = {
		name = treaty_of_brest.10.a #отправить делегацию
		complete_national_focus = UKR_peace_negotiations_with_GER
		GER = { country_event = treaty_of_brest.11 }
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = treaty_of_brest.10.b #мы будем воевать на стороне антанты
		add_war_support = 0.05
		complete_national_focus = UKR_war_for_freedom
		trigger = {
			is_ai = no
		}
		ai_chance = {
			factor = 0
		}
	}
}

country_event = {
	id = treaty_of_brest.11
	title = treaty_of_brest.11.t
	desc = treaty_of_brest.11.d
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	option = {
		name = treaty_of_brest.11.a #принять делегацию
		set_global_flag = brest_litovsk_GER_UKR_negotiations
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					has_government = communism
					has_government = radical_socialism
					has_government = social_democracy
				}
			}
		}
	}
	option = {
		name = treaty_of_brest.11.b #мы будем говорить только с СовНарКомом и законным правительством Украины в Харькове
		UKR = { country_event = treaty_of_brest.20 }
		trigger = {
			is_ai = no
		}
		set_global_flag = brest_litovsk_GER_UKR_negotiations_refused
		ai_chance = {
			factor = 0
			modifier = {
				add = 99999
				OR = {
					has_government = communism
					has_government = radical_socialism
					has_government = social_democracy
				}
			}
		}
	}
}

country_event = {
	id = treaty_of_brest.12
	title = treaty_of_brest.12.t
	desc = {
		text = treaty_of_brest.12.d
		trigger = {
			RUS = { OR = { has_government = communism has_government = radical_socialism } }
		}
	}
	desc = {
		text = treaty_of_brest.12.d_1
		trigger = {
			RUS = { NOT = { has_government = communism has_government = radical_socialism } }
		}
	}
	picture = GFX_report_event_februrary_revolution
	
	trigger = {
		tag = GER
		has_global_flag = brest_litovsk_negotiations
		has_war_with = RUS
		OR = {
			UKR = { OR = { exists = no has_government = communism has_government = radical_socialism } }
			has_global_flag = brest_litovsk_GER_UKR_negotiations_refused
		}
		NOT = { has_global_flag = brest_litovsk_negotiations_GER_UKR_peace }
		NOT = {
			any_country = {
				is_in_faction_with = GER
				controls_state = 202
			}
		}
		RUS = { surrender_progress > 0.1 }
		OR = {
			NOT = { owns_state = 763 }
			controls_state = 763
		}
		OR = {
			NOT = { owns_state = 85 }
			controls_state = 85
		}
		OR = {
			NOT = { owns_state = 66 }
			controls_state = 66
		}
	}
	
	mean_time_to_happen = {
		days = 82
	}
	
	fire_only_once = yes
	
	option = {
		name = treaty_of_brest.12.a #надавить на Россию
		add_war_support = -0.05
		RUS = { country_event = { id = treaty_of_brest.13 days = 1 } }
	}
}

# Германский ультиматум
country_event = {
	id = treaty_of_brest.13
	title = treaty_of_brest.13.t
	desc = {
		text = treaty_of_brest.13.d
		trigger = {
			RUS = { OR = { has_government = communism has_government = radical_socialism } }
		}
	}
	desc = {
		text = treaty_of_brest.13.d_1
		trigger = {
			RUS = { NOT = { has_government = communism has_government = radical_socialism } }
		}
	}
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			OR = {
				check_variable = { percent_left_faction_CC < 0.5 }
				NOT = { has_country_flag = RUS_flag_soviet_power }
			}
		}
		name = treaty_of_brest.13.a #согласится на требования Германии
		add_war_support = -0.05
		GER = { country_event = { id = treaty_of_brest.44 days = 1 } }
	}
	option = {
		name = treaty_of_brest.13.b #сорвать переговоры
		every_country = {
			limit = {
				OR = {
					has_idea = brest_negotiation_truce_Russia_and_allies
					has_idea = brest_negotiation_truce_Central_powers
				}
			}
			remove_ideas = {
				brest_negotiation_truce_Russia_and_allies
				brest_negotiation_truce_Central_powers
			}
		}
		clr_global_flag = brest_litovsk_negotiations
		clr_global_flag = brest_litovsk_negotiations_GER_UKR_peace
		clr_global_flag = brest_litovsk_GER_UKR_negotiations
		clr_global_flag = GER_average_peace_brest_tech_flag
		clr_global_flag = GER_average_peace_brest_alt_demand_tech_flag
		set_global_flag = russia_rejects_german_ultimatum
		if = {
			limit = { RUS = { NOT = { has_completed_focus = RUS_WPRA } has_focus_tree = Russia_Bolsheviks_focus } }
			add_ideas = disorganization_of_army
		}
		country_event = { id = rcw_bolsheviks.304 days = 1 }
		if = {
			limit = { SLT = { exists = yes is_subject = no NOT = { has_war_with = GER } } }
			GER = {
				declare_war_on = {
					target = SLT
					type = annex_everything
				}
			}
			hidden_effect = {
				every_state = {
					limit = { is_core_of = SLT OWNER = { has_war_with = GER } }
					SLT = { set_state_owner = PREV }
				}
			}
		}
	}
}

country_event = {
	id = treaty_of_brest.14
	title = treaty_of_brest.14.t
	desc = {
		text = treaty_of_brest.14.d
		trigger = {
			RUS = { OR = { has_government = communism has_government = radical_socialism } }
		}
	}
	desc = {
		text = treaty_of_brest.14.d_1
		trigger = {
			RUS = { NOT = { has_government = communism has_government = radical_socialism } }
		}
	}
	picture = GFX_report_event_februrary_revolution
	
	trigger = {
		tag = GER
		has_global_flag = brest_litovsk_negotiations
		has_war_with = RUS
		OR = {
			has_global_flag = brest_litovsk_negotiations_GER_UKR_peace
			any_country = {
				is_in_faction_with = GER
				controls_state = 202
			}
		}
	}
	
	mean_time_to_happen = {
		days = 0
	}
	
	fire_only_once = yes
	
	option = {
		name = treaty_of_brest.14.a #надавить на Россию
		add_war_support = -0.05
		RUS = { country_event = { id = treaty_of_brest.15 days = 1 } }
	}
}

# Германский ультиматум
country_event = {
	id = treaty_of_brest.15
	title = treaty_of_brest.15.t
	desc = treaty_of_brest.15.d
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			OR = {
				check_variable = { percent_left_faction_CC < 0.3 }
				NOT = { has_country_flag = RUS_flag_soviet_power }
			}
		}
		name = treaty_of_brest.13.a #согласится на требования Германии
		add_war_support = -0.05
		GER = { country_event = { id = treaty_of_brest.43 days = 1 } }
	}
	option = {
		name = treaty_of_brest.15.b #ни мира ни войны армию распустить
		add_war_support = -0.05
		clr_global_flag = brest_litovsk_negotiations
		clr_global_flag = brest_litovsk_negotiations_GER_UKR_peace
		clr_global_flag = brest_litovsk_GER_UKR_negotiations
		clr_global_flag = GER_average_peace_brest_tech_flag
		clr_global_flag = GER_average_peace_brest_alt_demand_tech_flag
		set_global_flag = russia_rejects_german_ultimatum
		if = {
			limit = { RUS = { NOT = { has_completed_focus = RUS_WPRA } has_focus_tree = Russia_Bolsheviks_focus } }
			add_ideas = disorganization_of_army
		}
		every_country = {
			limit = {
				OR = {
					has_idea = brest_negotiation_truce_Russia_and_allies
					has_idea = brest_negotiation_truce_Central_powers
				}
			}
			remove_ideas = {
				brest_negotiation_truce_Russia_and_allies
				brest_negotiation_truce_Central_powers
			}
		}
		if = {
			limit = { SLT = { exists = yes is_subject = no NOT = { has_war_with = GER } } }
			GER = {
				declare_war_on = {
					target = SLT
					type = annex_everything
				}
			}
			hidden_effect = {
				every_state = {
					limit = { is_core_of = SLT OWNER = { has_war_with = GER } }
					SLT = { set_state_owner = PREV }
				}
			}
		}
	}
}

country_event = {
	id = treaty_of_brest.16
	title = treaty_of_brest.16.t
	desc = { #Историчный исход
		text = treaty_of_brest.16.d
		trigger = {
			NOT = { controls_state = 195 }
			NOT = { controls_state = 219 }
			RUS = { NOT = { surrender_progress < 0.22 } }
		}
	}
	desc = { #Смягчённый исход
		text = treaty_of_brest.16.d_1
		trigger = {
			RUS = { NOT = { surrender_progress < 0.1 } }
			RUS = { surrender_progress < 0.22 }
			NOT = { controls_state = 195 }
			NOT = { controls_state = 219 }
		}
	}
	desc = { #Большевики удерживают оборону
		text = treaty_of_brest.16.d_2
		trigger = {
			NOT = { controls_state = 195 }
			NOT = { controls_state = 219 }
			RUS = { surrender_progress < 0.1 }
		}
	}
	desc = { #Немцы берут Петроград или Москву
		text = treaty_of_brest.16.d_3
		trigger = {
			OR = {
				controls_state = 195
				controls_state = 219
			}
		}
	}
	picture = GFX_report_event_februrary_revolution
	
	trigger = {
		tag = GER
		has_global_flag = russia_rejects_german_ultimatum
		has_war_with = RUS
		NOT = { has_global_flag = WWI_GER_HAS_CAPITULATED }
	}
	
	mean_time_to_happen = {
		days = 70
		modifier = {
			factor = 0.01
			RUS = {
				OR = {
					NOT = { controls_state = 195 }
					NOT = { controls_state = 219 }
				}
			}
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.12 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.13 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.14 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.15 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.16 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.17 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.18 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.19 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.20 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.21 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.22 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.23 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.24 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.25 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.26 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.27 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.28 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.29 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.30 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.31 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.32 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.33 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.34 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.35 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.36 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.37 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.38 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.39 }
		}
		modifier = {
			factor = 0.95 RUS = { surrender_progress > 0.40 }
		}
	}
	
	immediate = {
		hidden_effect = { RUS = { clr_country_flag = brest_negotiation_Lenin_can_threaten_resignation } }
	}
	
	fire_only_once = yes
	
	option = {
		name = treaty_of_brest.16.a
		trigger = {
			NOT = { controls_state = 195 }
			NOT = { controls_state = 219 }
			RUS = { NOT = { surrender_progress < 0.22 } }
		}
		add_war_support = -0.05
		add_stability = -0.05
		clr_global_flag = brest_litovsk_negotiations
		clr_global_flag = brest_litovsk_negotiations_GER_UKR_peace
		clr_global_flag = brest_litovsk_GER_UKR_negotiations
		clr_global_flag = GER_average_peace_brest_tech_flag
		clr_global_flag = GER_average_peace_brest_alt_demand_tech_flag
		clr_global_flag = russia_rejects_german_ultimatum
		RUS = {
			set_country_flag = brest_hard
			if = {
				limit = { has_focus_tree = Russia_Bolsheviks_focus }
				hidden_effect = {
					USA = { country_event = treaty_of_brest.58 }
					country_event = { id = treaty_of_brest.61 days = 3 }
				}
				else = {
					hidden_effect = { country_event = { id = treaty_of_brest.62 days = 3 } }
				}
			}
		}
	}
	option = {
		name = treaty_of_brest.16.b
		trigger = {
			NOT = { controls_state = 195 }
			NOT = { controls_state = 219 }
			RUS = { NOT = { surrender_progress < 0.1 } }
			RUS = { surrender_progress < 0.22 }
		}
		if = {
			limit = {
				OR = {
					AND = {
						NOT = { controls_state = 12 }
						controls_state = 206
					}
					has_global_flag = GER_average_peace_brest_alt_demand_tech_flag
				}
			}
			RUS = {
				set_country_flag = brest_average
				set_country_flag = brest_average_alt
				if = {
					limit = { has_focus_tree = Russia_Bolsheviks_focus }
					hidden_effect = {
						USA = { country_event = treaty_of_brest.58 }
						country_event = { id = treaty_of_brest.61 days = 3 }
					}
					else = {
						hidden_effect = { country_event = { id = treaty_of_brest.62 days = 3 } }
					}
				}
			}
			else = {
				RUS = {
					set_country_flag = brest_average
					if = {
						limit = { has_focus_tree = Russia_Bolsheviks_focus }
						hidden_effect = {
							USA = { country_event = treaty_of_brest.58 }
							country_event = { id = treaty_of_brest.61 days = 3 }
						}
						else = {
							hidden_effect = { country_event = { id = treaty_of_brest.62 days = 3 } }
						}
					}
				}
			}
		}
		clr_global_flag = brest_litovsk_negotiations
		clr_global_flag = brest_litovsk_negotiations_GER_UKR_peace
		clr_global_flag = brest_litovsk_GER_UKR_negotiations
		clr_global_flag = GER_average_peace_brest_tech_flag
		clr_global_flag = GER_average_peace_brest_alt_demand_tech_flag
		clr_global_flag = russia_rejects_german_ultimatum
	}
	option = {
		name = treaty_of_brest.16.c
		trigger = {
			NOT = { controls_state = 195 }
			NOT = { controls_state = 219 }
			RUS = { surrender_progress < 0.1 }
		}
		RUS = {
			set_country_flag = brest_soft
			if = {
				limit = { has_focus_tree = Russia_Bolsheviks_focus }
				hidden_effect = {
					USA = { country_event = treaty_of_brest.58 }
					country_event = { id = treaty_of_brest.61 days = 3 }
				}
				else = {
					hidden_effect = { country_event = { id = treaty_of_brest.62 days = 3 } }
				}
			}
		}
		clr_global_flag = brest_litovsk_negotiations
		clr_global_flag = brest_litovsk_negotiations_GER_UKR_peace
		clr_global_flag = brest_litovsk_GER_UKR_negotiations
		clr_global_flag = GER_average_peace_brest_tech_flag
		clr_global_flag = GER_average_peace_brest_alt_demand_tech_flag
		clr_global_flag = russia_rejects_german_ultimatum
	}
	option = {
		name = treaty_of_brest.16.e
		trigger = {
			OR = {
				controls_state = 195
				controls_state = 219
			}
		}
		RUS = {
			set_country_flag = brest_hardest
			if = {
				limit = { has_focus_tree = Russia_Bolsheviks_focus }
				hidden_effect = {
					USA = { country_event = treaty_of_brest.58 }
					country_event = { id = treaty_of_brest.61 days = 3 }
				}
				else = {
					hidden_effect = { country_event = { id = treaty_of_brest.62 days = 3 } }
				}
			}
		}
		clr_global_flag = brest_litovsk_negotiations
		clr_global_flag = brest_litovsk_negotiations_GER_UKR_peace
		clr_global_flag = brest_litovsk_GER_UKR_negotiations
		clr_global_flag = GER_average_peace_brest_tech_flag
		clr_global_flag = GER_average_peace_brest_alt_demand_tech_flag
		clr_global_flag = russia_rejects_german_ultimatum
	}
}

# Хлебный мир Германии c Украиной
country_event = {
	id = treaty_of_brest.19
	title = treaty_of_brest.19.t
	desc = treaty_of_brest.19.d
	picture = GFX_report_event_februrary_revolution
	
	trigger = {
		tag = GER
		has_global_flag = brest_litovsk_GER_UKR_negotiations
		NOT = { has_global_flag = brest_litovsk_negotiations_GER_UKR_peace }
		has_war_with = UKR
	}
	
	mean_time_to_happen = {
		days = 60
		modifier = {
			factor = 0.95
			surrender_progress > 0.1
		}
		modifier = {
			factor = 0.95
			surrender_progress > 0.12
		}
		modifier = {
			factor = 0.95
			surrender_progress > 0.14
		}
		modifier = {
			factor = 0.95
			surrender_progress > 0.16
		}
		modifier = {
			factor = 0.95
			surrender_progress > 0.18
		}
		modifier = {
			factor = 0.95
			surrender_progress > 0.2
		}
		modifier = {
			factor = 0.85
			surrender_progress > 0.22
		}
		modifier = {
			factor = 0.85
			surrender_progress > 0.24
		}
		modifier = {
			factor = 0.85
			surrender_progress > 0.26
		}
		modifier = {
			factor = 0.85
			surrender_progress > 0.28
		}
		modifier = {
			factor = 0.85
			surrender_progress > 0.3
		}
		modifier = {
			factor = 0.75
			surrender_progress > 0.32
		}
		modifier = {
			factor = 0.75
			surrender_progress > 0.34
		}
		modifier = {
			factor = 0.75
			surrender_progress > 0.36
		}
		modifier = {
			factor = 0.75
			surrender_progress > 0.38
		}
		modifier = {
			factor = 0.75
			surrender_progress > 0.4
		}
		modifier = {
			factor = 0.65
			surrender_progress > 0.42
		}
		modifier = {
			factor = 0.55
			surrender_progress > 0.44
		}
		modifier = {
			factor = 0.45
			surrender_progress > 0.46
		}
		modifier = {
			factor = 0.35
			surrender_progress > 0.48
		}
		modifier = {
			factor = 0.25
			surrender_progress > 0.5
		}
		modifier = {
			factor = 0.15
			surrender_progress > 0.52
		}
		modifier = {
			factor = 0.01
			GER = { controls_state = 202 }
		}
		modifier = {
			factor = 0.01
			AUH = { controls_state = 202 }
		}
	}
	
	option = {
		name = treaty_of_brest.19.a
		if = {
			limit = { GER = { controls_state = 202 } }
			UKR = {
				add_popularity = {
					ideology = authoritarism
					popularity = 0.15
				}
				set_politics = {
					ruling_party = authoritarism
				}
				add_ideas = {
					limited_exports
					extensive_conscription
					minimum_legislation
					interventionalism_law
					war_economy
				}
				GER = {
					#add_ideas = UKR_zerno_out
					diplomatic_relation = {
						country = UKR
						relation = military_access
						active = yes
					}
				}
				AUH = {
					diplomatic_relation = {
						country = UKR
						relation = military_access
						active = yes
					}
				}
			}
		}
		GER = { UKR = { subjecting_script_with_transfer_parties_dominion = yes } add_to_faction = UKR }
		UKR = { every_owned_state = { limit = { CONTROLLER = { OR = { tag = GER is_in_faction_with = GER } } } UKR = { set_state_controller = PREV } } }
		UKR = {
			dismantle_faction = yes
			leave_faction = yes
			remove_ideas = UKR_bonus_against_Central_powers
		}
		every_country = {
			limit = { OR = { tag = GER tag = AUH tag = SNS tag = TRG tag = TUR is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = SNS is_in_faction_with = TRG is_in_faction_with = TUR AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
			white_peace = UKR
		}
		set_global_flag = brest_litovsk_negotiations_GER_UKR_peace
		GER = { country_event = treaty_of_brest.14 }
		ai_chance = {
			factor = 999
			modifier = {
				factor = 0
				UKR = { controls_state = 202 }
			}
		}
	}
}

# Германия отказала Центральной раде в переговорах
country_event = {
	id = treaty_of_brest.20
	title = treaty_of_brest.20.t
	desc = treaty_of_brest.20.d
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	option = {
		name = treaty_of_brest.20.a
		add_stability = -0.05
		add_war_support = -0.05
		complete_national_focus = UKR_war_for_freedom
		USR = {
			add_stability = 0.10
			add_war_support = 0.15
		}
	}
}

country_event = {
	id = treaty_of_brest.21
	title = treaty_of_brest.21.t
	desc = treaty_of_brest.21.d
	picture = GFX_report_event_februrary_revolution
	
	trigger = {
		tag = GER
		has_global_flag = brest_litovsk_negotiations
		has_war_with = RUS
		OR = {
			UKR = { OR = { exists = no has_government = communism has_government = radical_socialism } }
			has_global_flag = brest_litovsk_GER_UKR_negotiations_refused
		}
		NOT = { has_global_flag = brest_litovsk_negotiations_GER_UKR_peace }
		NOT = {
			any_country = {
				is_in_faction_with = GER
				controls_state = 202
			}
		}
		OR = {
			RUS = { NOT = { surrender_progress > 0.1 } }
			AND = {
				owns_state = 763
				NOT = { controls_state = 763 }
			}
			AND = {
				owns_state = 85
				NOT = { controls_state = 85 }
			}
			AND = {
				owns_state = 66
				NOT = { controls_state = 66 }
			}
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	fire_only_once = yes
	
	option = {
		name = treaty_of_brest.21.a #запросить мир
		add_war_support = -0.05
		RUS = { country_event = { id = treaty_of_brest.22 days = 1 } }
	}
}

country_event = {
	id = treaty_of_brest.22
	title = treaty_of_brest.22.t
	desc = treaty_of_brest.22.d
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	option = {
		trigger = {
			OR = {
				check_variable = { percent_left_faction_CC < 0.5 }
				NOT = { has_country_flag = RUS_flag_soviet_power }
			}
		}
		name = treaty_of_brest.22.a #согласится на мир
		add_stability = 0.05
		add_popularity = {
			ideology = communism
			popularity = 0.1
		}
		country_event = treaty_of_brest.45
	}
	option = {
		name = treaty_of_brest.22.b #добить германскую сволочь
		every_country = {
			limit = {
				OR = {
					has_idea = brest_negotiation_truce_Russia_and_allies
					has_idea = brest_negotiation_truce_Central_powers
				}
			}
			remove_ideas = {
				brest_negotiation_truce_Russia_and_allies
				brest_negotiation_truce_Central_powers
			}
		}
		clr_global_flag = brest_litovsk_negotiations
		clr_global_flag = brest_litovsk_negotiations_GER_UKR_peace
		clr_global_flag = brest_litovsk_GER_UKR_negotiations
		clr_global_flag = GER_average_peace_brest_tech_flag
		clr_global_flag = GER_average_peace_brest_alt_demand_tech_flag
		set_global_flag = russia_rejects_german_ultimatum
		country_event = { id = rcw_bolsheviks.304 days = 1 }
	}
}


# Миры

# Самый жёсткий мир
country_event = {
	id = treaty_of_brest.41
	title = treaty_of_brest.41.t
	desc = treaty_of_brest.41.d
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = { RUS = { clr_country_flag = brest_negotiation_Lenin_can_threaten_resignation } }
	}
	
	option = {
		name = treaty_of_brest.41.a
		GER = {
			if = {
				limit = { 651 = { is_owned_by = RUS CONTROLLER = { OR = { tag = PREV.PREV is_in_faction_with = PREV.PREV } } } }
				BSH = { transfer_state = 651 transfer_state = 582 }
				BSH = { load_oob = BSH_1918_CCA_autonomy }
			}
			if = {
				limit = { 249 = { is_owned_by = RUS CONTROLLER = { OR = { tag = PREV.PREV is_in_faction_with = PREV.PREV } } } }
				TAR = { transfer_state = 249 }
				TAR = { load_oob = TAR_1918_CCA_autonomy }
			}
			if = {
				limit = { 256 = { is_owned_by = RUS CONTROLLER = { OR = { tag = PREV.PREV is_in_faction_with = PREV.PREV } } } }
				CHV = { transfer_state = 256 }
				CHV = { load_oob = CHV_1918_CCA_autonomy }
			}
			if = {
				limit = { 652 = { is_owned_by = RUS CONTROLLER = { OR = { tag = PREV.PREV is_in_faction_with = PREV.PREV } } } }
				OCH = { transfer_state = 652 transfer_state = 1072 transfer_state = 1071 transfer_state = 1070 }
				OCH = { load_oob = OCH_cossaks }
			}
			if = {
				limit = { 251 = { is_owned_by = RUS CONTROLLER = { OR = { tag = PREV.PREV is_in_faction_with = PREV.PREV } } } }
				VLG = { transfer_state = 251 transfer_state = 401 transfer_state = 239 transfer_state = 250 }
				VLG = { load_oob = OCH_cossaks }
			}
			if = {
				limit = { 813 = { is_owned_by = RUS CONTROLLER = { OR = { tag = PREV.PREV is_in_faction_with = PREV.PREV } } } }
				RUS = {
					every_owned_state = { limit = { region = 134 } MRC = { transfer_state = PREV } }
					every_owned_state = { limit = { region = 135 NOT = { state = 236 state = 237 } } KUB = { transfer_state = PREV } }
					every_owned_state = { limit = { OR = { state = 245 state = 815 state = 813 state = 236 state = 237 } } DON = { transfer_state = PREV } }
				}
			}
		}
		
		hidden_effect = { RUS = { annex_country = { target = SLT transfer_troops = no } } }
		if = {
			limit = { UKR = { exists = no } USR = { exists = yes } NOT = { any_state = { is_core_of = USR CONTROLLER = { has_war_with = USR } } } }
			every_country = {
				limit = { OR = { tag = GER tag = AUH tag = SNS tag = TRG tag = TUR is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = SNS is_in_faction_with = TRG is_in_faction_with = TUR AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
				white_peace = USR
				white_peace = ODS
			}
			else = {
				RUS = { end_puppet = ODS }
				RUS = { end_puppet = USR }
				UKR = { white_peace = RUS }
				USR = {
					diplomatic_relation = { country = GER relation = non_aggression_pact active = no }
					diplomatic_relation = { country = AUH relation = non_aggression_pact active = no }
					diplomatic_relation = { country = BUL relation = non_aggression_pact active = no }
					diplomatic_relation = { country = TUR relation = non_aggression_pact active = no }
				}
				ODS = {
					diplomatic_relation = { country = GER relation = non_aggression_pact active = no }
					diplomatic_relation = { country = AUH relation = non_aggression_pact active = no }
					diplomatic_relation = { country = BUL relation = non_aggression_pact active = no }
					diplomatic_relation = { country = TUR relation = non_aggression_pact active = no }
				}
			}
		}
		clr_global_flag = brest_litovsk_negotiations
		clr_global_flag = brest_litovsk_negotiations_GER_UKR_peace
		clr_global_flag = brest_litovsk_GER_UKR_negotiations
		clr_global_flag = GER_average_peace_brest_tech_flag
		clr_global_flag = GER_average_peace_brest_alt_demand_tech_flag
		every_country = {
			limit = {
				OR = {
					has_idea = brest_negotiation_truce_Russia_and_allies
					has_idea = brest_negotiation_truce_Central_powers
				}
			}
			remove_ideas = {
				brest_negotiation_truce_Russia_and_allies
				brest_negotiation_truce_Central_powers
			}
		}
		RUS = {
			if = {
				limit = {
					NOT = {
						has_government = radical_socialism
						has_government = communism
					}
				}
				add_country_leader_trait = defeatist_after_war
				add_political_power = -150
			}
			add_stability = -0.15
			#release = POL
			#release = UKR
			end_puppet = UKR
			if = {
				limit = { FIN = { is_subject_of = RUS } }
				FIN = { country_event = finland.9 }
			}
			set_country_flag = RUS_brest_peace_hard
			set_country_flag = RUS_brest_peace_fired
			if = {
				limit = { NOT = { has_focus_tree = RUS_Bolsheviks } }
				remove_one_priziv_from_army = yes
				remove_one_priziv_from_army = yes
				remove_one_priziv_from_army = yes
				remove_one_priziv_from_army = yes
				remove_one_priziv_from_army = yes
				remove_one_priziv_from_army = yes
				remove_one_priziv_from_army = yes
			}
		}
		hidden_effect = { FRA = { country_event = { id = treaty_of_brest.101 days = 3 } } ENG = { country_event = { id = treaty_of_brest.101 days = 3 } } }
		if = {
			limit = { POL = { exists = yes is_subject_of = GER } }
			every_state = {
				limit = {
					is_owned_by = RUS
					is_core_of = POL
					is_controlled_by = POL
				}
				POL = { transfer_state = PREV }
			}
		}
		if = {
			limit = { UKR = { exists = yes } }
			every_state = {
				limit = {
					OR = {
						is_owned_by = RUS
						is_owned_by = GER
						is_owned_by = AUH
						is_owned_by = BUL
						is_owned_by = TUR
						is_owned_by = SNS
						is_owned_by = TRG
					}
					NOT = {
						is_core_of = GER
						is_core_of = AUH
						is_core_of = GAL
						is_core_of = BUL
						is_core_of = TUR
						is_core_of = SNS
						is_core_of = TRG
					}
					OR = {
						is_core_of = UKR
						state = 204
						state = 957
						state = 194
						state = 994
						state = 94
						state = 955
						state = 960
					}
					NOT = { is_core_of = POL }
					NOT = { is_core_of = CRI }
					NOT = { state = 919 
							state = 227
							state = 852
							state = 918
							state = 958
							state = 814
							state = 221
							state = 200
					}
				}
				UKR = { transfer_state = PREV }
			}
		}
		else_if = {
			limit = { 202 = { controller = { tag = AUH } } }
			every_state = {
				limit = {
					OR = {
						is_owned_by = RUS
						is_owned_by = GER
						is_owned_by = AUH
						is_owned_by = BUL
						is_owned_by = TUR
						is_owned_by = SNS
						is_owned_by = TRG
					}
					NOT = {
						is_core_of = GER
						is_core_of = AUH
						is_core_of = GAL
						is_core_of = BUL
						is_core_of = TUR
						is_core_of = SNS
						is_core_of = TRG
					}
					OR = {
						is_core_of = UKR
						state = 204
						state = 957
						state = 194
						state = 994
						state = 94
						state = 955
						state = 960
					}
					NOT = { is_core_of = POL }
					NOT = { is_core_of = CRI }
				}
				UKR = { transfer_state = PREV }
			}
			AUH = { UKR = { subjecting_script_with_transfer_parties_dominion = yes add_ideas = help_from_foreign_interventionists } } GER = { add_to_faction = UKR }
			UKR = { every_owned_state = { limit = { CONTROLLER = { OR = { tag = GER is_in_faction_with = GER } } } UKR = { set_state_controller = PREV } } }
		}
		else = {
			every_state = {
				limit = {
					OR = {
						is_owned_by = RUS
						is_owned_by = GER
						is_owned_by = AUH
						is_owned_by = BUL
						is_owned_by = TUR
						is_owned_by = SNS
						is_owned_by = TRG
					}
					NOT = {
						is_core_of = GER
						is_core_of = AUH
						is_core_of = GAL
						is_core_of = BUL
						is_core_of = TUR
						is_core_of = SNS
						is_core_of = TRG
					}
					OR = {
						is_core_of = UKR
						state = 204
						state = 957
						state = 194
						state = 994
						state = 94
						state = 955
						state = 960
					}
					NOT = { is_core_of = POL }
					NOT = { is_core_of = CRI }
					NOT = {
							state = 919
							state = 227
							state = 852
							state = 918
							state = 958
							state = 814
							state = 221
							state = 200
					}
				}
				UKR = { transfer_state = PREV }
			}
		}
		every_state = {
			limit = { is_owned_by = UKR CONTROLLER = { NOT = { tag = UKR has_war_with = UKR } } }
			UKR = { set_state_controller = PREV }
		}
		if = {
			limit = { any_state = { region = 213 CONTROLLER = { has_war_with = RUS } } }
			if = {
				limit = { 1253 = { CONTROLLER = { has_war_with = RUS } } }
				every_state = {
					limit = {
						is_owned_by = RUS
						region = 213
					}
					1253 = { CONTROLLER = { transfer_state = PREV.PREV } }
				}
			}
			every_state = {
				limit = {
					is_owned_by = RUS
					region = 213
				}
				GER = { transfer_state = PREV }
			}
			else = {
				if = {
					limit = {
						UKR = { exists = yes NOT = { is_subject_of = RUS } }
						CRI = { exists = no }
					}
					RUS = { release = CRI }
					CRI = {
						hidden_effect = {
							add_ideas = neutral_foreign_policy_law
							remove_all_foreing_locked_templates_from_liberated_country = yes
							load_oob = CRI_1918
						}
					}
				}
			}
		}
		every_state = {
			limit = {
				is_owned_by = RUS
				OR = {
					is_core_of = ROM
					is_core_of = MOL
				}
			}
			MOL = { transfer_state = PREV }
		}
		every_state = {
			limit = {
				is_owned_by = RUS
				is_controlled_by = AUH
				OR = {
					state = 92
					state = 90
					state = 1117
					state = 1115
					state = 87
					state = 1116
					state = 10
					state = 98
					state = 1120
					state = 1118
					state = 1116
					state = 822
					state = 1119
					state = 904
					state = 1165
				}
			}
			AUH = { transfer_state = PREV }
		}
		every_state = {
			limit = {
				is_owned_by = RUS
				OR = {
					state = 10
					state = 1116
					state = 87
					state = 1115
					state = 90
					state = 1117
					state = 98
					state = 1118
					state = 1120
					state = 92
					state = 904
					state = 1165
					state = 822
					state = 1119
					state = 97
					state = 910
				}
			}
			GER = { transfer_state = PREV }
		}
		GER = {
			every_state = {
				limit = {
					OR = {
						is_owned_by = RUS
						is_owned_by = SLT
						OWNER = { is_subject_of = RUS NOT = { tag = USR tag = ODS } }
					}
					OR = {
						region = 37
						region = 38
						region = 39
						region = 131
						region = 217
						state = 919
							state = 227
							state = 852
							state = 918
							state = 958
							state = 814
							state = 221
							state = 200
					}
				}
				GER = { transfer_state = PREV }
			}
					every_state = {
						limit = {
							OWNER = { OR = { is_subject_of = RUS original_tag = RUS original_tag = SLT } }
							OR = {
								state = 860
								region = 131
								region = 217
								AND = {
									region = 132
									NOT = { state = 244 }
									NOT = { state = 264 }
									NOT = { state = 1080 }
								}
								AND = {
									region = 133
									NOT = { state = 248 }
									NOT = { state = 252 }
									NOT = { state = 253 }
									NOT = { state = 255 }
									NOT = { state = 1100 }
									NOT = { state = 1101 }
									NOT = { state = 1219 }
									NOT = { state = 1234 }
								}
							}
						}
						GER = { transfer_state = PREV }
					}
			RUS = { annex_country = { target = SLT transfer_troops = no } }
			country_event = { id = annexs_u_puppets.1 hours = 2 }
			if = {
				limit = {
					UKR = { OR = { NOT = { has_war_with = GER } has_capitulated = yes } }
				}
				every_state = {
					limit = {
						is_owned_by = UKR
						OR = {
							state = 919
							state = 227
							state = 852
							state = 918
							state = 958
							state = 814
							state = 221
							state = 200
						}
					}
					GER = { transfer_state = PREV }
				}
			}
		}
		every_country = {
			limit = { OR = { tag = GER tag = AUH tag = SNS tag = TRG tag = TUR is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = SNS is_in_faction_with = TRG is_in_faction_with = TUR AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
			white_peace = RUS
			white_peace = FIN
			white_peace = SLT
			white_peace = UKR
		}
		hidden_effect = { news_event = { id = news_n.17 hours = 48 } }
		if = {
			limit = { UKR = { exists = yes is_subject = no } }
			GER = { UKR = { subjecting_script_with_transfer_parties_dominion = yes add_ideas = help_from_foreign_interventionists } add_to_faction = UKR }
			UKR = { every_owned_state = { limit = { CONTROLLER = { OR = { tag = GER is_in_faction_with = GER } } } UKR = { set_state_controller = PREV } } }
		}
		RUS = {
			if = {
				limit = { RUS = { NOT = { controls_state = 341 controls_state = 797 controls_state = 949 } } }
				random_country = {
					limit = { original_tag = TUR exists = yes }
					every_state = {
						limit = { is_owned_by = RUS is_core_of = PREV NOT = { state = 341 state = 949 state = 797 state = 863 state = 864 state = 898 } }
						PREV = {
							transfer_state = PREV
						}
					}
				}
			}
			if = {
				limit = { has_country_flag = RUS_occupated_PER_WWI }
				every_state = {
					limit = { is_owned_by = RUS is_core_of = PER NOT = { is_core_of = RUS } }
					PER = { transfer_state = PREV }
				}
				clr_country_flag = RUS_occupated_PER_WWI
			}
			random_country = {
				limit = { original_tag = BUL exists = yes }
				every_state = {
					limit = { is_owned_by = RUS is_core_of = PREV }
					PREV = {
						transfer_state = PREV
					}
				}
			}
		}
		RUS = {
			end_puppet = USR
			remove_from_faction = USR
			end_puppet = ODS
			remove_from_faction = ODS
			end_puppet = UKR
		}
		every_country = {
			limit = {
				OR = {
					tag = UKR
					tag = FIN
					tag = ROM
					tag = RUS
					tag = SLT
				}
			}
			if = { limit = { has_idea = ROM_bonus_against_Central_powers } remove_ideas = ROM_bonus_against_Central_powers }
			if = { limit = { has_idea = UKR_bonus_against_Central_powers } remove_ideas = UKR_bonus_against_Central_powers }
		}
	}
}

# Историчный мир
country_event = {
	id = treaty_of_brest.42
	title = treaty_of_brest.42.t
	desc = treaty_of_brest.42.d
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = { RUS = { clr_country_flag = brest_negotiation_Lenin_can_threaten_resignation } }
	}
	
	option = {
		name = treaty_of_brest.42.a
		hidden_effect = { RUS = { annex_country = { target = SLT transfer_troops = no } } }
		if = {
			limit = { UKR = { exists = no } USR = { exists = yes } NOT = { any_state = { is_core_of = USR CONTROLLER = { has_war_with = USR } } } }
			every_country = {
				limit = { OR = { tag = GER tag = AUH tag = SNS tag = TRG tag = TUR is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = SNS is_in_faction_with = TRG is_in_faction_with = TUR AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
				white_peace = USR
				white_peace = ODS
			}
			else = {
				RUS = { end_puppet = ODS }
				RUS = { end_puppet = USR }
				USR = {
					diplomatic_relation = { country = GER relation = non_aggression_pact active = no }
					diplomatic_relation = { country = AUH relation = non_aggression_pact active = no }
					diplomatic_relation = { country = BUL relation = non_aggression_pact active = no }
					diplomatic_relation = { country = TUR relation = non_aggression_pact active = no }
					diplomatic_relation = { country = UKR relation = non_aggression_pact active = no }
					leave_faction = yes
					if = {
						limit = { NOT = { has_war_with = UKR } }
						declare_war_on = {
							target = UKR
							type = annex_everything
						}
					}
				}
				ODS = {
					diplomatic_relation = { country = GER relation = non_aggression_pact active = no }
					diplomatic_relation = { country = AUH relation = non_aggression_pact active = no }
					diplomatic_relation = { country = BUL relation = non_aggression_pact active = no }
					diplomatic_relation = { country = TUR relation = non_aggression_pact active = no }
					diplomatic_relation = { country = UKR relation = non_aggression_pact active = no }
					leave_faction = yes
					if = {
						limit = { NOT = { has_war_with = UKR } }
						declare_war_on = {
							target = UKR
							type = annex_everything
						}
					}
				}
				if = {
					limit = { UKR = { NOT = { is_subject_of = GER } } }
					UKR = { white_peace = RUS }
				}
			}
		}
		if = {
			limit = {
				OR = {
					GER = {
						OR = {
							controls_state = 1015
							controls_state = 210
							controls_state = 191
							controls_state = 1016
							controls_state = 242
						}
					}
					RUS = { NOT = { has_full_control_of_state = 209 } }
				}
			}
			RUS = { set_country_flag = Pskov_taken_by_GER }
		}
		if = {
			limit = { country_exists = USR }
			USR = {
				if = {
					limit = { 953 = { CONTROLLER = { OR = { tag = GER is_in_faction_with = GER } } } }
					set_state_owner = 953
					if = {
						limit = { 228 = { CONTROLLER = { OR = { tag = GER is_in_faction_with = GER } } } }
						set_state_owner = 228
						if = {
							limit = { 218 = { CONTROLLER = { OR = { tag = GER is_in_faction_with = GER } } } }
							set_state_owner = 218
						}
					}
				}
			}
			else = {
				GER = {
					if = {
						limit = { 953 = { CONTROLLER = { OR = { tag = GER is_in_faction_with = GER } } } }
						set_state_owner = 953
						if = {
							limit = { 228 = { CONTROLLER = { OR = { tag = GER is_in_faction_with = GER } } } }
							set_state_owner = 228
							if = {
								limit = { 218 = { CONTROLLER = { OR = { tag = GER is_in_faction_with = GER } } } }
								set_state_owner = 218
							}
						}
					}
				}
			}
		}
		clr_global_flag = brest_litovsk_negotiations
		clr_global_flag = brest_litovsk_negotiations_GER_UKR_peace
		clr_global_flag = brest_litovsk_GER_UKR_negotiations
		clr_global_flag = GER_average_peace_brest_tech_flag
		every_country = {
			limit = {
				OR = {
					has_idea = brest_negotiation_truce_Russia_and_allies
					has_idea = brest_negotiation_truce_Central_powers
				}
			}
			remove_ideas = {
				brest_negotiation_truce_Russia_and_allies
				brest_negotiation_truce_Central_powers
			}
		}
		RUS = {
			if = {
				limit = {
					NOT = {
						has_government = radical_socialism
						has_government = communism
					}
				}
				add_country_leader_trait = defeatist_after_war
				add_political_power = -150
			}
			if = {
				limit = { is_faction_leader = no is_in_faction_with = ENG }
				leave_faction = yes
					every_country = {
						limit = { OR = { is_in_faction_with = ENG is_in_faction_with = FRA is_in_faction_with = USA is_in_faction_with = GER is_in_faction_with = AUH tag = ENG tag = FRA tag = USA tag = GER tag = AUH} }
						every_country = {
							limit = {
								has_war_with = PREV
								OR = {
									tag = KRN
									tag = FIN
									tag = event_target:red_FIN
									tag = TRK
									tag = PRM
									tag = CPG
									
									tag = DON
									tag = KUB
									tag = RVA
									tag = SIB
									tag = CCA
									tag = RSS
									tag = OCH
									tag = BKL
									tag = NRR
								}
							}
							PREV = { white_peace = PREV }
						}
					}
			}
			add_stability = -0.15
			#release = POL
			#release = UKR
			end_puppet = UKR
			if = {
				limit = { FIN = { is_subject_of = RUS } }
				FIN = { country_event = finland.9 }
			}
			set_country_flag = RUS_brest_peace_hard
			set_country_flag = RUS_brest_peace_fired
			if = {
				limit = { NOT = { has_focus_tree = RUS_Bolsheviks } }
				remove_one_priziv_from_army = yes
				remove_one_priziv_from_army = yes
				remove_one_priziv_from_army = yes
				remove_one_priziv_from_army = yes
			}
		}
		hidden_effect = { FRA = { country_event = { id = treaty_of_brest.101 days = 3 } } ENG = { country_event = { id = treaty_of_brest.101 days = 3 } } }
		if = {
			limit = { POL = { exists = yes is_subject_of = GER } }
			every_state = {
				limit = {
					is_owned_by = RUS
					is_core_of = POL
					is_controlled_by = POL
				}
				POL = { transfer_state = PREV }
			}
		}
		hidden_effect = { country_event = { id = treaty_of_brest.47 hours = 1 } }
		if = {
			limit = { any_state = { region = 213 CONTROLLER = { has_war_with = RUS } } }
			if = {
				limit = { 1253 = { CONTROLLER = { has_war_with = RUS } } }
				every_state = {
					limit = {
						is_owned_by = RUS
						region = 213
					}
					1253 = { CONTROLLER = { transfer_state = PREV.PREV } }
				}
			}
			every_state = {
				limit = {
					is_owned_by = RUS
					region = 213
				}
				GER = { transfer_state = PREV }
			}
			else = {
				if = {
					limit = {
						UKR = { exists = yes NOT = { is_subject_of = RUS } }
						CRI = { exists = no }
					}
					RUS = { release = CRI }
					CRI = {
						hidden_effect = {
							add_ideas = neutral_foreign_policy_law
							remove_all_foreing_locked_templates_from_liberated_country = yes
							load_oob = CRI_1918
						}
					}
				}
			}
		}
		every_state = {
			limit = {
				is_owned_by = RUS
				OR = {
					is_core_of = ROM
					is_core_of = MOL
				}
			}
			MOL = { transfer_state = PREV }
		}
		every_state = {
			limit = {
				is_owned_by = RUS
				is_controlled_by = AUH
				OR = {
					state = 92
					state = 90
					state = 1117
					state = 1115
					state = 87
					state = 1116
					state = 10
					state = 98
					state = 1120
					state = 1118
					state = 1116
					state = 822
					state = 1119
					state = 904
					state = 1165
				}
			}
			AUH = { transfer_state = PREV }
		}
		every_state = {
			limit = {
				is_owned_by = RUS
				OR = {
					state = 10
					state = 1116
					state = 87
					state = 1115
					state = 90
					state = 1117
					state = 98
					state = 1118
					state = 1120
					state = 92
					state = 904
					state = 1165
					state = 822
					state = 1119
					state = 97
					state = 910
				}
			}
			GER = { transfer_state = PREV }
		}
		GER = {
			every_state = {
				limit = {
					OR = {
						is_owned_by = RUS
						is_owned_by = SLT
						OWNER = { is_subject_of = RUS NOT = { tag = USR tag = ODS } }
					}
					OR = {
						region = 37
						region = 38
						region = 39
						region = 131
						AND = {
							region = 217
							NOT = { state = 205 }
							NOT = { state = 210 }
							NOT = { state = 242 }
							NOT = { state = 1169 }
							NOT = { state = 243 }
							NOT = { state = 224 }
						}
						state = 1002
						state = 919
							state = 227
							state = 852
							state = 918
							state = 958
							state = 814
							state = 221
							state = 200
					}
				}
				GER = { transfer_state = PREV }
			}
			RUS = { annex_country = { target = SLT transfer_troops = no } }
			if = {
				limit = { RUS = { has_country_flag = Pskov_taken_by_GER } }
				every_state = {
					limit = {
						OR = {
							is_owned_by = RUS
							OWNER = { is_subject_of = RUS NOT = { tag = USR tag = ODS } }
						}
						OR = {
							state = 209
							state = 210
						}
					}
					GER = { transfer_state = PREV }
				}
				RUS = { clr_country_flag = Pskov_taken_by_GER }
			}
			country_event = { id = annexs_u_puppets.1 hours = 2 }
			if = {
				limit = {
					UKR = { OR = { NOT = { has_war_with = GER } has_capitulated = yes } }
				}
				every_state = {
					limit = {
						is_owned_by = UKR
						OR = {
							state = 919
							state = 227
							state = 852
							state = 918
							state = 958
							state = 814
							state = 221
							state = 200
						}
					}
					GER = { transfer_state = PREV }
				}
			}
		}
		every_country = {
			limit = { OR = { tag = GER tag = AUH tag = SNS tag = TRG tag = TUR is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = SNS is_in_faction_with = TRG is_in_faction_with = TUR AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
			white_peace = RUS
			white_peace = FIN
			white_peace = SLT
			white_peace = UKR
		}
		hidden_effect = { news_event = { id = news_n.17 hours = 48 } }
		if = {
			limit = { UKR = { exists = yes is_subject = no } }
			GER = { UKR = { subjecting_script_with_transfer_parties_dominion = yes add_ideas = help_from_foreign_interventionists } add_to_faction = UKR }
			UKR = { every_owned_state = { limit = { CONTROLLER = { OR = { tag = GER is_in_faction_with = GER } } } UKR = { set_state_controller = PREV } } }
		}
		RUS = {
			if = {
				limit = { RUS = { NOT = { controls_state = 341 controls_state = 797 controls_state = 949 } } }
				random_country = {
					limit = { original_tag = TUR exists = yes }
					every_state = {
						limit = { is_owned_by = RUS is_core_of = PREV NOT = { state = 341 state = 949 state = 797 state = 863 state = 864 state = 898 } }
						PREV = {
							transfer_state = PREV
						}
					}
				}
			}
			if = {
				limit = { has_country_flag = RUS_occupated_PER_WWI }
				every_state = {
					limit = { is_owned_by = RUS is_core_of = PER NOT = { is_core_of = RUS } }
					PER = { transfer_state = PREV }
				}
				clr_country_flag = RUS_occupated_PER_WWI
			}
			random_country = {
				limit = { original_tag = BUL exists = yes }
				every_state = {
					limit = { is_owned_by = RUS is_core_of = PREV }
					PREV = {
						transfer_state = PREV
					}
				}
			}
		}
		RUS = {
			end_puppet = USR
			remove_from_faction = USR
			end_puppet = ODS
			remove_from_faction = ODS
			end_puppet = UKR
		}
		every_country = {
			limit = {
				OR = {
					tag = UKR
					tag = FIN
					tag = ROM
					tag = RUS
					tag = SLT
				}
			}
			if = { limit = { has_idea = ROM_bonus_against_Central_powers } remove_ideas = ROM_bonus_against_Central_powers }
			if = { limit = { has_idea = UKR_bonus_against_Central_powers } remove_ideas = UKR_bonus_against_Central_powers }
		}
	}
}

# Средний мир
country_event = {
	id = treaty_of_brest.43
	title = treaty_of_brest.43.t
	desc = treaty_of_brest.43.d
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = { RUS = { clr_country_flag = brest_negotiation_Lenin_can_threaten_resignation } }
	}
	
	option = {
		name = treaty_of_brest.43.a
		hidden_effect = { RUS = { annex_country = { target = SLT transfer_troops = no } } }
		if = {
			limit = { UKR = { exists = no } USR = { exists = yes } NOT = { any_state = { is_core_of = USR CONTROLLER = { has_war_with = USR } } } }
			every_country = {
				limit = { OR = { tag = GER tag = AUH tag = SNS tag = TRG tag = TUR is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = SNS is_in_faction_with = TRG is_in_faction_with = TUR AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
				white_peace = USR
				white_peace = ODS
			}
			else = {
				if = {
					limit = { any_state = { region = 213 CONTROLLER = { has_war_with = RUS } } }
					if = {
						limit = { 1253 = { CONTROLLER = { has_war_with = RUS } } }
						every_state = {
							limit = {
								is_owned_by = RUS
								region = 213
							}
							1253 = { CONTROLLER = { transfer_state = PREV.PREV } }
						}
					}
					every_state = {
						limit = {
							is_owned_by = RUS
							region = 213
						}
						GER = { transfer_state = PREV }
					}
					else = {
						if = {
							limit = {
								UKR = { exists = yes NOT = { is_subject_of = RUS } }
								CRI = { exists = no }
							}
							RUS = { release = CRI }
							CRI = {
								hidden_effect = {
									add_ideas = neutral_foreign_policy_law
									remove_all_foreing_locked_templates_from_liberated_country = yes
									load_oob = CRI_1918
								}
							}
						}
					}
				}
				RUS = { end_puppet = ODS }
				RUS = { end_puppet = USR }
				USR = {
					diplomatic_relation = { country = GER relation = non_aggression_pact active = no }
					diplomatic_relation = { country = AUH relation = non_aggression_pact active = no }
					diplomatic_relation = { country = BUL relation = non_aggression_pact active = no }
					diplomatic_relation = { country = TUR relation = non_aggression_pact active = no }
					diplomatic_relation = { country = UKR relation = non_aggression_pact active = no }
					leave_faction = yes
					if = {
						limit = { NOT = { has_war_with = UKR } }
						declare_war_on = {
							target = UKR
							type = annex_everything
						}
					}
				}
				ODS = {
					diplomatic_relation = { country = GER relation = non_aggression_pact active = no }
					diplomatic_relation = { country = AUH relation = non_aggression_pact active = no }
					diplomatic_relation = { country = BUL relation = non_aggression_pact active = no }
					diplomatic_relation = { country = TUR relation = non_aggression_pact active = no }
					diplomatic_relation = { country = UKR relation = non_aggression_pact active = no }
					leave_faction = yes
					if = {
						limit = { NOT = { has_war_with = UKR } }
						declare_war_on = {
							target = UKR
							type = annex_everything
						}
					}
				}
				if = {
					limit = { UKR = { NOT = { is_subject_of = GER } } }
					UKR = { white_peace = RUS }
				}
			}
		}
		clr_global_flag = brest_litovsk_negotiations
		clr_global_flag = brest_litovsk_negotiations_GER_UKR_peace
		clr_global_flag = brest_litovsk_GER_UKR_negotiations
		clr_global_flag = GER_average_peace_brest_tech_flag
		clr_global_flag = GER_average_peace_brest_alt_demand_tech_flag
		every_country = {
			limit = {
				OR = {
					has_idea = brest_negotiation_truce_Russia_and_allies
					has_idea = brest_negotiation_truce_Central_powers
				}
			}
			remove_ideas = {
				brest_negotiation_truce_Russia_and_allies
				brest_negotiation_truce_Central_powers
			}
		}
		RUS = {
			if = {
				limit = {
					NOT = {
						has_government = radical_socialism
						has_government = communism
					}
				}
				add_country_leader_trait = defeatist_after_war
				add_political_power = -100
			}
			if = {
				limit = { is_faction_leader = no is_in_faction_with = ENG }
				leave_faction = yes
					every_country = {
						limit = { OR = { is_in_faction_with = ENG is_in_faction_with = FRA is_in_faction_with = USA is_in_faction_with = GER is_in_faction_with = AUH tag = ENG tag = FRA tag = USA tag = GER tag = AUH} }
						every_country = {
							limit = {
								has_war_with = PREV
								OR = {
									tag = KRN
									tag = FIN
									tag = event_target:red_FIN
									tag = TRK
									tag = PRM
									tag = CPG
									
									tag = DON
									tag = KUB
									tag = RVA
									tag = SIB
									tag = CCA
									tag = RSS
									tag = OCH
									tag = BKL
									tag = NRR
								}
							}
							PREV = { white_peace = PREV }
						}
					}
			}
			add_stability = -0.05
			#release = POL
			end_puppet = UKR
			if = {
				limit = { FIN = { is_subject_of = RUS } }
				FIN = { country_event = finland.9 }
			}
			set_country_flag = RUS_brest_peace_average
			set_country_flag = RUS_brest_peace_fired
			if = {
				limit = { NOT = { has_focus_tree = RUS_Bolsheviks } }
				remove_one_priziv_from_army = yes
				remove_one_priziv_from_army = yes
				remove_one_priziv_from_army = yes
			}
		}
		hidden_effect = { FRA = { country_event = { id = treaty_of_brest.101 days = 3 } } ENG = { country_event = { id = treaty_of_brest.101 days = 3 } } }
		if = {
			limit = { POL = { exists = yes is_subject_of = GER } }
			every_state = {
				limit = {
					is_owned_by = RUS
					is_core_of = POL
					is_controlled_by = POL
				}
				POL = { transfer_state = PREV }
			}
		}
		every_state = {
			limit = {
				is_owned_by = RUS
				is_controlled_by = AUH
				OR = {
					state = 92
					state = 90
					state = 1117
					state = 1115
					state = 87
					state = 1116
					state = 10
					state = 98
					state = 1120
					state = 1118
					state = 1116
					state = 822
					state = 1119
					state = 904
					state = 1165
				}
			}
			AUH = { transfer_state = PREV }
		}
		every_state = {
			limit = {
				is_owned_by = RUS
				OR = {
					state = 10
					state = 1116
					state = 87
					state = 1166
					state = 1115
					state = 90
					state = 1117
					state = 98
					state = 1118
					state = 1120
					state = 92
					state = 904
					state = 1165
					state = 822
					state = 1119
					state = 97
					state = 910
				}
			}
			GER = { transfer_state = PREV }
		}
		GER = {
			every_state = {
				limit = {
					OR = {
						is_owned_by = RUS
						is_owned_by = SLT
						OWNER = { is_subject_of = RUS NOT = { tag = USR tag = ODS } }
					}
					OR = {
						state = 11
						state = 784
						state = 999
						state = 189
						state = 846
						state = 910
						state = 847
						
						state = 190
						state = 867
						state = 866
						
						state = 95
						state = 998
						state = 956
						state = 1024
					}
				}
				GER = { transfer_state = PREV }
			}
			RUS = { annex_country = { target = SLT transfer_troops = no } }
			if = {
				limit = { RUS = { has_country_flag = brest_average_alt } }
				RUS = { clr_country_flag = brest_average_alt }
				every_state = {
					limit = {
						OR = {
							is_owned_by = RUS
							OWNER = { is_subject_of = RUS NOT = { tag = USR tag = ODS } }
						}
						OR = {
							state = 204
							state = 927
							state = 194
							state = 957
							state = 994
							state = 206
							state = 1168
							state = 96
							state = 1167
						}
					}
					GER = { transfer_state = PREV }
				}
				else = {
					every_state = {
						limit = {
							OR = {
								is_owned_by = RUS
								OWNER = { is_subject_of = RUS NOT = { tag = USR tag = ODS } }
							}
							OR = {
								state = 12
								state = 13
								state = 914
								state = 921
								state = 916
								state = 1003
								state = 915
								state = 1002
								state = 920
								state = 191
								
								state = 1001
							}
						}
						GER = { transfer_state = PREV }
					}
					if = { limit = { GER = { owns_state = 865 } } RUS = { set_state_owner = 865 } }
				}
			}
			country_event = { id = annexs_u_puppets.1 hours = 2 }
		}
		every_country = {
			limit = { OR = { tag = GER tag = AUH tag = SNS tag = TRG tag = TUR is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = SNS is_in_faction_with = TRG is_in_faction_with = TUR AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
			white_peace = RUS
			white_peace = FIN
			white_peace = SLT
			white_peace = UKR
		}
		hidden_effect = { news_event = { id = news_n.17 hours = 48 } }
		#RUS = { white_peace = LUX }
		every_country = {
			limit = {
				OR = {
					tag = UKR
					tag = FIN
					tag = ROM
					tag = RUS
					tag = SLT
				}
			}
			if = { limit = { has_idea = ROM_bonus_against_Central_powers } remove_ideas = ROM_bonus_against_Central_powers }
			if = { limit = { has_idea = UKR_bonus_against_Central_powers } remove_ideas = UKR_bonus_against_Central_powers }
		}
	}
}

# Мягкий мир
country_event = {
	id = treaty_of_brest.44
	title = treaty_of_brest.44.t
	desc = treaty_of_brest.44.d
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = { RUS = { clr_country_flag = brest_negotiation_Lenin_can_threaten_resignation } }
	}
	
	option = {
		name = treaty_of_brest.44.a
		if = {
			limit = { NOT = { country_exists = SLT } GER = { any_owned_state = { is_core_of = SLT } } }
			every_state = {
				limit = { is_core_of = SLT }
				RUS = { transfer_state = PREV }
			}
		}
		hidden_effect = { RUS = { annex_country = { target = SLT transfer_troops = no } } }
		clr_global_flag = brest_litovsk_negotiations
		clr_global_flag = brest_litovsk_negotiations_GER_UKR_peace
		clr_global_flag = brest_litovsk_GER_UKR_negotiations
		clr_global_flag = GER_average_peace_brest_tech_flag
		clr_global_flag = GER_average_peace_brest_alt_demand_tech_flag
		every_country = {
			limit = {
				OR = {
					has_idea = brest_negotiation_truce_Russia_and_allies
					has_idea = brest_negotiation_truce_Central_powers
				}
			}
			remove_ideas = {
				brest_negotiation_truce_Russia_and_allies
				brest_negotiation_truce_Central_powers
			}
		}
		RUS = {
			if = {
				limit = {
					NOT = {
						has_government = radical_socialism
						has_government = communism
					}
				}
				add_country_leader_trait = defeatist_after_war
				add_political_power = -50
			}
			if = {
				limit = { is_faction_leader = no is_in_faction_with = ENG }
				leave_faction = yes
					every_country = {
						limit = { OR = { is_in_faction_with = ENG is_in_faction_with = FRA is_in_faction_with = USA is_in_faction_with = GER is_in_faction_with = AUH tag = ENG tag = FRA tag = USA tag = GER tag = AUH} }
						every_country = {
							limit = {
								has_war_with = PREV
								OR = {
									tag = KRN
									tag = FIN
									tag = event_target:red_FIN
									tag = TRK
									tag = PRM
									tag = CPG
									
									tag = DON
									tag = KUB
									tag = RVA
									tag = SIB
									tag = CCA
									tag = RSS
									tag = OCH
									tag = BKL
									tag = NRR
								}
							}
							PREV = { white_peace = PREV }
						}
					}
			}
			#release = POL
			set_country_flag = RUS_brest_peace_soft
			set_country_flag = RUS_brest_peace_fired
			if = {
				limit = { NOT = { has_focus_tree = RUS_Bolsheviks } }
				remove_one_priziv_from_army = yes
				remove_one_priziv_from_army = yes
			}
		}
		hidden_effect = { FRA = { country_event = { id = treaty_of_brest.101 days = 3 } } ENG = { country_event = { id = treaty_of_brest.101 days = 3 } } }
		if = {
			limit = { POL = { exists = yes is_subject_of = GER } }
			every_state = {
				limit = {
					is_owned_by = RUS
					is_core_of = POL
					is_controlled_by = POL
				}
				POL = { transfer_state = PREV }
			}
		}
		every_state = {
			limit = {
				is_owned_by = RUS
				is_controlled_by = AUH
				OR = {
					state = 92
					state = 90
					state = 1117
					state = 1115
					state = 87
					state = 1116
					state = 10
					state = 98
					state = 1120
					state = 1118
					state = 1116
					state = 822
					state = 1119
					state = 904
					state = 1165
				}
			}
			AUH = { transfer_state = PREV }
		}
		every_state = {
			limit = {
				is_owned_by = RUS
				OR = {
					state = 10
					state = 1116
					state = 87
					state = 1166
					state = 1115
					state = 90
					state = 1117
					state = 98
					state = 1118
					state = 1120
					state = 92
					state = 904
					state = 1165
					state = 822
					state = 1119
					state = 97
					state = 910
				}
			}
			GER = { transfer_state = PREV }
		}
		GER = {
			if = {
				limit = {
					12 = {
						OR = {
							is_owned_by = RUS
							OWNER = { is_subject_of = RUS NOT = { tag = USR tag = ODS } }
						}
						CONTROLLER = {
							OR = {
								tag = GER
								is_in_faction_with = GER
							}
						}
					}
				}
				transfer_state = 12
			}
			every_state = {
				limit = {
					OR = {
						is_owned_by = RUS
						OWNER = { is_subject_of = RUS NOT = { tag = USR tag = ODS } }
					}
					OR = {
						state = 11
						state = 784
						state = 999
						state = 866
						state = 867
						
						state = 189
						state = 846
						state = 910
						state = 847
						
						state = 190
						
						state = 998
						state = 95
						state = 1024
						state = 956
					}
				}
				GER = { transfer_state = PREV }
			}
			country_event = { id = annexs_u_puppets.1 hours = 2 }
		}
		every_country = {
			limit = { OR = { tag = GER tag = AUH tag = SNS tag = TRG tag = TUR is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = SNS is_in_faction_with = TRG is_in_faction_with = TUR AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
			white_peace = RUS
			white_peace = FIN
			white_peace = SLT
			white_peace = UKR
			white_peace = USR
			white_peace = ODS
		}
		hidden_effect = { news_event = { id = news_n.17 hours = 48 } }
		#RUS = { white_peace = LUX }
		RUS = {
			if = {
				limit = { RUS = { NOT = { controls_state = 341 controls_state = 797 controls_state = 949 } } }
				random_country = {
					limit = { original_tag = TUR exists = yes }
					every_state = {
						limit = { is_owned_by = RUS is_core_of = PREV NOT = { state = 341 state = 949 state = 797 state = 863 state = 864 state = 898 } }
						PREV = {
							transfer_state = PREV
						}
					}
				}
			}
			if = {
				limit = { has_country_flag = RUS_occupated_PER_WWI }
				every_state = {
					limit = { is_owned_by = RUS is_core_of = PER NOT = { is_core_of = RUS } }
					PER = { transfer_state = PREV }
				}
				clr_country_flag = RUS_occupated_PER_WWI
			}
			random_country = {
				limit = { original_tag = BUL exists = yes }
				every_state = {
					limit = { is_owned_by = RUS is_core_of = PREV }
					PREV = {
						transfer_state = PREV
					}
				}
			}
		}
		every_country = {
			limit = {
				OR = {
					tag = UKR
					tag = FIN
					tag = ROM
					tag = RUS
					tag = SLT
				}
			}
			if = { limit = { has_idea = ROM_bonus_against_Central_powers } remove_ideas = ROM_bonus_against_Central_powers }
			if = { limit = { has_idea = UKR_bonus_against_Central_powers } remove_ideas = UKR_bonus_against_Central_powers }
		}
		UKR = { if = { limit = { is_subject = yes } OVERLORD = { end_puppet = PREV } } }
	}
}

# Немедленный демократический мир без аннексий и контрибуций
country_event = {
	id = treaty_of_brest.45
	title = treaty_of_brest.45.t
	desc = treaty_of_brest.45.d
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = { RUS = { clr_country_flag = brest_negotiation_Lenin_can_threaten_resignation } }
	}
	
	option = {
		name = treaty_of_brest.45.a
		if = {
			limit = { NOT = { country_exists = SLT } GER = { any_owned_state = { is_core_of = SLT } } }
			every_state = {
				limit = { is_core_of = SLT }
				RUS = { transfer_state = PREV }
			}
		}
		hidden_effect = { RUS = { annex_country = { target = SLT transfer_troops = no } } }
		clr_global_flag = brest_litovsk_negotiations
		clr_global_flag = brest_litovsk_negotiations_GER_UKR_peace
		clr_global_flag = brest_litovsk_GER_UKR_negotiations
		clr_global_flag = GER_average_peace_brest_tech_flag
		clr_global_flag = GER_average_peace_brest_alt_demand_tech_flag
		every_country = {
			limit = {
				OR = {
					has_idea = brest_negotiation_truce_Russia_and_allies
					has_idea = brest_negotiation_truce_Central_powers
				}
			}
			remove_ideas = {
				brest_negotiation_truce_Russia_and_allies
				brest_negotiation_truce_Central_powers
			}
		}
		every_country = {
			limit = { OR = { tag = GER tag = AUH tag = SNS tag = TRG tag = TUR is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = SNS is_in_faction_with = TRG is_in_faction_with = TUR AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
			white_peace = RUS
			white_peace = FIN
			white_peace = SLT
			white_peace = UKR
			white_peace = USR
			white_peace = ODS
		}
		hidden_effect = { news_event = { id = news_n.17 hours = 48 } }
		#RUS = { white_peace = LUX }
		RUS = {
			if = {
				limit = { is_faction_leader = no is_in_faction_with = ENG }
				leave_faction = yes
					every_country = {
						limit = { OR = { is_in_faction_with = ENG is_in_faction_with = FRA is_in_faction_with = USA is_in_faction_with = GER is_in_faction_with = AUH tag = ENG tag = FRA tag = USA tag = GER tag = AUH} }
						every_country = {
							limit = {
								has_war_with = PREV
								OR = {
									tag = KRN
									tag = FIN
									tag = event_target:red_FIN
									tag = TRK
									tag = PRM
									tag = CPG
									
									tag = DON
									tag = KUB
									tag = RVA
									tag = SIB
									tag = CCA
									tag = RSS
									tag = OCH
									tag = BKL
									tag = NRR
								}
							}
							PREV = { white_peace = PREV }
						}
					}
			}
			if = {
				limit = { RUS = { NOT = { controls_state = 341 controls_state = 797 controls_state = 949 } } }
				random_country = {
					limit = { original_tag = TUR exists = yes }
					every_state = {
						limit = { is_owned_by = RUS is_core_of = PREV NOT = { state = 341 state = 949 state = 797 state = 863 state = 864 state = 898 } }
						PREV = {
							transfer_state = PREV
						}
					}
				}
			}
			if = {
				limit = { has_country_flag = RUS_occupated_PER_WWI }
				every_state = {
					limit = { is_owned_by = RUS is_core_of = PER NOT = { is_core_of = RUS } }
					PER = { transfer_state = PREV }
				}
				clr_country_flag = RUS_occupated_PER_WWI
			}
			random_country = {
				limit = { original_tag = BUL exists = yes }
				every_state = {
					limit = { is_owned_by = RUS is_core_of = PREV }
					PREV = {
						transfer_state = PREV
					}
				}
			}
		}
		RUS = {
			add_stability = 0.1
			set_country_flag = RUS_brest_peace_white
			set_country_flag = RUS_brest_peace_fired
		}
		hidden_effect = { FRA = { country_event = { id = treaty_of_brest.101 days = 3 } } ENG = { country_event = { id = treaty_of_brest.101 days = 3 } } }
	}
}

# Великая Отечественная война против немецкой-кайзеровских захватчиков
country_event = {
	id = treaty_of_brest.46
	title = treaty_of_brest.46.t
	desc = treaty_of_brest.46.d
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = { RUS = { clr_country_flag = brest_negotiation_Lenin_can_threaten_resignation } }
	}
	
	option = {
		name = treaty_of_brest.46.a
		trigger = {
			OR = {
				has_government = communism
				has_government = radical_socialism
			}
		}
		effect_tooltip = {
			load_oob = RUS_gpw_red_guard
		}
		hidden_effect = {
			if = {
				limit = { has_template = "Krasnoarmeyskaya Diviziya" }
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				spawn_krasnoarmeyskaya_diviziya_on_german_front = yes
				else_if = {
					limit = { has_template = "Krasnoarmeyskaya Brigada" }
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
					spawn_krasnoarmeyskaya_brigada_on_german_front = yes
				}
				else = {
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
					spawn_red_guard_on_german_front = yes
				}
			}
		}
		rise_mobilization_law = yes
		set_country_flag = RUS_bolsheviks_continued_war
		add_war_support = 0.2
	}
	option = {
		name = treaty_of_brest.46.b
		trigger = {
			NOT = {
				has_government = communism
				has_government = radical_socialism
			}
		}
		add_war_support = 0.15
	}
}

country_event = {
	id = treaty_of_brest.47
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	hidden = yes
	
	option = {
		if = {
			limit = { UKR = { exists = yes } }
			every_state = {
				limit = {
					OR = {
						is_owned_by = RUS
						is_owned_by = GER
						is_owned_by = AUH
						is_owned_by = BUL
						is_owned_by = TUR
						is_owned_by = SNS
						is_owned_by = TRG
					}
					NOT = {
						is_core_of = GER
						is_core_of = AUH
						is_core_of = GAL
						is_core_of = BUL
						is_core_of = TUR
						is_core_of = SNS
						is_core_of = TRG
					}
					OR = {
						is_core_of = UKR
						state = 204
						state = 957
						state = 194
						state = 994
						state = 94
						state = 955
						state = 923
						state = 960
					}
					NOT = { is_core_of = POL }
					NOT = { is_core_of = CRI }
					NOT = { state = 919
							state = 227
							state = 852
							state = 918
							state = 958
							state = 814
							state = 221
							state = 200
					}
				}
				UKR = { transfer_state = PREV }
			}
		}
		else_if = {
			limit = { 202 = { controller = { tag = AUH } } }
			every_state = {
				limit = {
					OR = {
						is_owned_by = RUS
						is_owned_by = GER
						is_owned_by = AUH
						is_owned_by = BUL
						is_owned_by = TUR
						is_owned_by = SNS
						is_owned_by = TRG
					}
					NOT = {
						is_core_of = GER
						is_core_of = AUH
						is_core_of = GAL
						is_core_of = BUL
						is_core_of = TUR
						is_core_of = SNS
						is_core_of = TRG
					}
					OR = {
						is_core_of = UKR
						state = 204
						state = 957
						state = 194
						state = 994
						state = 94
						state = 955
						state = 960
						state = 923
					}
					NOT = { is_core_of = POL }
					NOT = { is_core_of = CRI }
				}
				UKR = { transfer_state = PREV }
			}
			AUH = { UKR = { subjecting_script_with_transfer_parties_dominion = yes add_ideas = help_from_foreign_interventionists } } GER = { add_to_faction = UKR }
			UKR = { every_owned_state = { limit = { CONTROLLER = { OR = { tag = GER is_in_faction_with = GER } } } UKR = { set_state_controller = PREV } } }
		}
		else = {
			every_state = {
				limit = {
					OR = {
						is_owned_by = RUS
						is_owned_by = GER
						is_owned_by = AUH
						is_owned_by = BUL
						is_owned_by = TUR
						is_owned_by = SNS
						is_owned_by = TRG
					}
					NOT = {
						is_core_of = GER
						is_core_of = AUH
						is_core_of = GAL
						is_core_of = BUL
						is_core_of = TUR
						is_core_of = SNS
						is_core_of = TRG
					}
					OR = {
						is_core_of = UKR
						state = 204
						state = 957
						state = 194
						state = 994
						state = 94
						state = 955
						state = 960
						state = 923
					}
					NOT = { is_core_of = POL }
					NOT = { is_core_of = CRI }
					NOT = { state = 919 
							state = 227
							state = 852
							state = 918
							state = 958
							state = 814
							state = 221
							state = 200
					}
				}
				UKR = { transfer_state = PREV }
			}
			GER = { UKR = { subjecting_script_with_transfer_parties_dominion = yes add_ideas = help_from_foreign_interventionists } add_to_faction = UKR }
			UKR = { every_owned_state = { limit = { CONTROLLER = { OR = { tag = GER is_in_faction_with = GER } } } UKR = { set_state_controller = PREV } } }
		}
		every_state = {
			limit = { is_owned_by = UKR CONTROLLER = { NOT = { tag = UKR has_war_with = UKR } } }
			UKR = { set_state_controller = PREV }
		}
	}
}

country_event = {
	id = treaty_of_brest.52
	title = treaty_of_brest.52.t
	desc = treaty_of_brest.52.d
	picture = GFX_report_event_februrary_revolution
	
	trigger = {
		tag = GER
		has_war_with = RUS
		RUS = { has_country_flag = RUS_bolsheviks_continued_war }
		OR = {
			AND = {
				195 = { is_owned_by = RUS is_controlled_by = ROOT }
				219 = { is_owned_by = RUS is_controlled_by = ROOT }
			}
			AND = {
				RUS = { surrender_progress > 0.5 }
				OR = {
					195 = { is_owned_by = RUS is_controlled_by = ROOT }
					219 = { is_owned_by = RUS is_controlled_by = ROOT }
				}
			}
		}
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = treaty_of_brest.52.a
		country_event = treaty_of_brest.41
		RUS = { country_event = treaty_of_brest.53 }
	}
}

country_event = {
	id = treaty_of_brest.53
	title = treaty_of_brest.53.t
	desc = treaty_of_brest.53.d
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	option = {
		name = treaty_of_brest.53.a
	}
}

# Телеграмма для Съезда (США)
country_event = {
	id = treaty_of_brest.58
	title = treaty_of_brest.58.t
	desc = treaty_of_brest.58.d
	picture = GFX_report_event_sov_3rd-5th_congress_of_soviets_of_russia_and_other
	
	trigger = { has_war_with = GER NOT = { has_government = national_syndicalism has_government = fascism has_government = despotism has_government = authoritarism has_government = social_conservatism } }
	
	is_triggered_only = yes
	
	option = {
		name = treaty_of_brest.58.a
		if = {
			limit = { RUS = { NOT = { has_country_flag = RUS_fourth_allrussian_congress_of_soviets } } }
			RUS = { set_country_flag = USA_president_letter_to_4_congress_tt }
			else = { RUS = { country_event = treaty_of_brest.59 } }
		}
	}
	option = {
		name = treaty_of_brest.58.b
	}
}
# Телеграмма от США (РСФСР)
country_event = {
	id = treaty_of_brest.59
	title = treaty_of_brest.59.t
	desc = treaty_of_brest.59.d
	picture = GFX_report_event_sov_3rd-5th_congress_of_soviets_of_russia_and_other
	
	is_triggered_only = yes
	
	option = {
		name = treaty_of_brest.59.a
		USA = { country_event = { id = treaty_of_brest.60 hours = 3 } }
		clr_country_flag = USA_president_letter_to_4_congress_tt
	}
}
# Телеграмма от Съезда (США)
country_event = {
	id = treaty_of_brest.60
	title = treaty_of_brest.60.t
	desc = treaty_of_brest.60.d
	picture = GFX_report_event_sov_3rd-5th_congress_of_soviets_of_russia_and_other
	
	is_triggered_only = yes
	
	option = {
		name = treaty_of_brest.60.a
	}
}

# IV Всероссийский съезд Советов
country_event = {
	id = treaty_of_brest.61
	title = treaty_of_brest.61.t
	desc = treaty_of_brest.61.d
	picture = GFX_report_event_sov_3rd-5th_congress_of_soviets_of_russia_and_other
	
	trigger = {
		has_country_flag = RUS_Oktober_revolution_fired
	}
	
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			if = {
				limit = { has_country_flag = USA_president_letter_to_4_congress_tt }
				country_event = treaty_of_brest.59
			}
		}
		add_to_variable = { var = global.num_of_allrussian_congress_of_soviets value = 1 }
		set_country_flag = RUS_fourth_allrussian_congress_of_soviets
	}
	
	# Мир с Германией
	option = {
		trigger = { has_country_flag = brest_hard }
		name = treaty_of_brest.61.a
		set_capital = 219
		GER = { country_event = treaty_of_brest.42 }
		set_country_flag = RUS_fourth_allrussian_congress_of_soviets
		clr_country_flag = Lenin_threatens_his_resignation
		ai_chance = {
			factor = 1
		}
	}
	# Мир с Германией
	option = {
		trigger = { has_country_flag = brest_average check_variable = { percent_left_faction_CC < 0.6 } }
		name = treaty_of_brest.61.b
		set_capital = 219
		GER = { country_event = treaty_of_brest.43 }
		set_country_flag = RUS_fourth_allrussian_congress_of_soviets
		clr_country_flag = Lenin_threatens_his_resignation
		ai_chance = {
			factor = 1
		}
	}
	# Мир с Германией
	option = {
		trigger = { has_country_flag = brest_soft check_variable = { percent_left_faction_CC < 0.5 } }
		name = treaty_of_brest.61.c
		set_capital = 219
		GER = { country_event = treaty_of_brest.44 }
		set_country_flag = RUS_fourth_allrussian_congress_of_soviets
		clr_country_flag = Lenin_threatens_his_resignation
		ai_chance = {
			factor = 1
		}
	}
	# Мир с Германией
	option = {
		trigger = { has_country_flag = brest_hardest }
		name = treaty_of_brest.61.e
		set_capital = 219
		GER = { country_event = treaty_of_brest.41 }
		set_country_flag = RUS_fourth_allrussian_congress_of_soviets
		clr_country_flag = Lenin_threatens_his_resignation
		ai_chance = {
			factor = 1
		}
	}
	# Продолжение войны
	option = {
		trigger = {
			NOT = { check_variable = { percent_left_faction_CC < 0.5 } }
			controls_state = 195
			controls_state = 219
		}
		name = treaty_of_brest.61.f
		set_capital = 219
		set_country_flag = RUS_fourth_allrussian_congress_of_soviets
		set_country_flag = RUS_bolsheviks_continued_war
		country_event = { id = rcw_bolsheviks.304 days = 1 }
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				NOT = { has_government = radical_socialism }
				surrender_progress > 0.099
			}
			modifier = {
				factor = 999
				has_government = radical_socialism
			}
			modifier = {
				factor = 999
				surrender_progress < 0.1
			}
		}
	}
}

# Мир
country_event = {
	id = treaty_of_brest.62
	title = treaty_of_brest.62.t
	desc = treaty_of_brest.62.d
	picture = GFX_report_event_sov_3rd-5th_congress_of_soviets_of_russia_and_other
	
	is_triggered_only = yes
	
	# Мир с Германией
	option = {
		trigger = { has_country_flag = brest_hard }
		name = treaty_of_brest.62.a
		GER = { country_event = treaty_of_brest.42 }
		ai_chance = {
			factor = 2
		}
	}
	# Мир с Германией
	option = {
		trigger = { has_country_flag = brest_average check_variable = { percent_left_faction_CC < 0.56 } }
		name = treaty_of_brest.62.b
		GER = { country_event = treaty_of_brest.43 }
		ai_chance = {
			factor = 3
		}
	}
	# Мир с Германией
	option = {
		trigger = { has_country_flag = brest_soft check_variable = { percent_left_faction_CC < 0.5 } }
		name = treaty_of_brest.62.c
		GER = { country_event = treaty_of_brest.44 }
		ai_chance = {
			factor = 4
		}
	}
	# Мир с Германией
	option = {
		trigger = { has_country_flag = brest_hardest }
		name = treaty_of_brest.62.e
		GER = { country_event = treaty_of_brest.41 }
		ai_chance = {
			factor = 1
		}
	}
	# Продолжение войны
	option = {
		name = treaty_of_brest.62.f
		add_war_support = -0.075
		ai_chance = {
			factor = 1
		}
	}
}
# Предложение Украины если революционная война в РСФСР
country_event = {
	id = treaty_of_brest.71
	title = treaty_of_brest.71.t
	desc = treaty_of_brest.71.d
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	immediate = {
		UKR = { add_timed_idea = { idea = brest_negotiation_truce_Russia_and_allies days = 170 } }
		GER = { add_timed_idea = { idea = brest_negotiation_truce_small_Central_powers days = 170 } }
		AUH = { add_timed_idea = { idea = brest_negotiation_truce_small_Central_powers days = 170 } }
		BUL = { add_timed_idea = { idea = brest_negotiation_truce_small_Central_powers days = 170 } }
		TUR = { add_timed_idea = { idea = brest_negotiation_truce_small_Central_powers days = 170 } }
	}
	
	option = {
		name = treaty_of_brest.71.a #начать переговоры по сепаратному миру с Украиной
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				NOT = { surrender_progress > 0.2 }
			}
			modifier = {
				factor = 0
				OR = {
					has_government = communism
					has_government = radical_socialism
					has_government = social_democracy
				}
			}
		}
		UKR = { country_event = { id = treaty_of_brest.72 days = 3 } }
	}
	option = {
		name = treaty_of_brest.71.b #немедленный демократический мир без аннексий и контрибуций
		ai_chance = {
			factor = 0
			modifier = {
				add = 99999
				surrender_progress > 0.2
			}
			modifier = {
				add = 99999
				NOT = {
					OR = {
						controls_state = 763
						controls_state = 85
						controls_state = 62
						controls_state = 64
						controls_state = 87
						controls_state = 1115
						controls_state = 88
					}
				}
			}
			modifier = {
				add = 99999
				OR = {
					has_government = communism
					has_government = radical_socialism
					has_government = social_democracy
				}
			}
		}
		UKR = { country_event = treaty_of_brest.73 }
	}
	option = {
		name = treaty_of_brest.2.c #война до победного конца
		trigger = { always = no }
		ai_chance = {
			factor = 0
		}
		UKR = { country_event = treaty_of_brest.74 }
	}
}

# Мир с вводом немецких войск
country_event = {
	id = treaty_of_brest.72
	title = treaty_of_brest.72.t
	desc = treaty_of_brest.72.d
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	option = {
		name = treaty_of_brest.72.a
		every_country = {
			limit = {
				OR = {
					has_idea = brest_negotiation_truce_Russia_and_allies
					has_idea = brest_negotiation_truce_small_Central_powers
				}
			}
			remove_ideas = {
				brest_negotiation_truce_Russia_and_allies
				brest_negotiation_truce_small_Central_powers
			}
		}
		every_country = {
			limit = { OR = { tag = GER tag = AUH tag = SNS tag = TRG tag = TUR is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = SNS is_in_faction_with = TRG is_in_faction_with = TUR AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
			white_peace = UKR
		}
		UKR = {
			if = {
				limit = { is_faction_leader = no is_in_faction_with = ENG }
				leave_faction = yes
			}
			add_stability = 0.1
		}
		GER = { UKR = { subjecting_script_with_transfer_parties_dominion = yes } }
	}
}

# Немедленный демократический мир без аннексий и контрибуций
country_event = {
	id = treaty_of_brest.73
	title = treaty_of_brest.73.t
	desc = treaty_of_brest.73.d
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	option = {
		name = treaty_of_brest.73.a
		every_country = {
			limit = {
				OR = {
					has_idea = brest_negotiation_truce_Russia_and_allies
					has_idea = brest_negotiation_truce_small_Central_powers
				}
			}
			remove_ideas = {
				brest_negotiation_truce_Russia_and_allies
				brest_negotiation_truce_small_Central_powers
			}
		}
		every_country = {
			limit = { OR = { tag = GER tag = AUH tag = SNS tag = TRG tag = TUR is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = SNS is_in_faction_with = TRG is_in_faction_with = TUR AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
			white_peace = UKR
		}
		UKR = {
			if = {
				limit = { is_faction_leader = no is_in_faction_with = ENG }
				leave_faction = yes
			}
			add_stability = 0.1
		}
	}
}

# Отказ немцев от переговоров с хохлами
country_event = {
	id = treaty_of_brest.74
	title = treaty_of_brest.74.t
	desc = treaty_of_brest.74.d
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	option = {
		name = treaty_of_brest.74.a
		add_war_support = 0.2
		complete_national_focus = UKR_war_for_freedom
		every_country = {
			limit = {
				OR = {
					has_idea = brest_negotiation_truce_Russia_and_allies
					has_idea = brest_negotiation_truce_small_Central_powers
				}
			}
			remove_ideas = {
				brest_negotiation_truce_Russia_and_allies
				brest_negotiation_truce_small_Central_powers
			}
		}
	}
}

# Ивент у Франции и Великобритании о снижении или повышении поддержки войны из-за мира
country_event = {
	id = treaty_of_brest.101
	title = treaty_of_brest.101.t
	desc = treaty_of_brest.101.d
	picture = GFX_report_event_februrary_revolution
	
	is_triggered_only = yes
	
	option = {
		name = treaty_of_brest.101.a
		if = {
			limit = { RUS = { has_country_flag = RUS_brest_peace_hardest } }
			add_war_support = 0.25
		}
		if = {
			limit = { RUS = { has_country_flag = RUS_brest_peace_hard } }
			add_war_support = 0.2
		}
		else_if = {
			limit = { RUS = { has_country_flag = RUS_brest_peace_average } }
			add_war_support = 0.15
		}
		else_if = {
			limit = { RUS = { has_country_flag = RUS_brest_peace_soft } }
			add_war_support = 0.1
		}
		else_if = {
			limit = { RUS = { has_country_flag = RUS_brest_peace_white } }
			add_war_support = -0.15
		}
		else = {
			add_war_support = 0.1
		}
	}
}



country_event = {
	id = treaty_of_brest.1917
	title = treaty_of_brest.1917.t
	desc = treaty_of_brest.1917.d
	picture = GFX_report_event_februrary_revolution
	
	trigger = {
		tag = RUS
		has_country_flag = RUS_Oktober_revolution_fired
		has_war_with = GER
		OR = { is_in_faction = no is_faction_leader = yes }
		OR = {
			has_global_flag = WWI_GER_HAS_CAPITULATED
			GER = {
				OR = {
					has_government = radical_socialism
					has_government = communism
					has_government = social_democracy
				}
			}
		}
		NOT = { has_country_flag = RUS_brest_peace_fired }
	}
	
	fire_only_once = yes
	
	immediate = {
		hidden_effect = { RUS = { clr_country_flag = brest_negotiation_Lenin_can_threaten_resignation } }
	}
	
	mean_time_to_happen = {
		days = 0
	}
	
	option = {
		name = treaty_of_brest.1917.a
		
				add_popularity = {
					ideology = communism
					popularity = 0.05
				}
				add_popularity = {
					ideology = radical_socialism
					popularity = 0.1
				}
				add_war_support = 0.2
				add_stability = 0.1
		
		hidden_effect = { if = { limit = { SLT = { NOT = { has_war_with = RUS } OR = { is_subject = no is_subject_of = RUS } } } RUS = { annex_country = { target = SLT transfer_troops = no } } } }
		clr_global_flag = brest_litovsk_negotiations
		clr_global_flag = brest_litovsk_negotiations_GER_UKR_peace
		clr_global_flag = brest_litovsk_GER_UKR_negotiations
		clr_global_flag = russia_rejects_german_ultimatum
		clr_global_flag = GER_average_peace_brest_tech_flag
		clr_global_flag = GER_average_peace_brest_alt_demand_tech_flag
		every_country = {
			limit = {
				OR = {
					has_idea = brest_negotiation_truce_Russia_and_allies
					has_idea = brest_negotiation_truce_Central_powers
				}
			}
			remove_ideas = {
				brest_negotiation_truce_Russia_and_allies
				brest_negotiation_truce_Central_powers
			}
		}
		if = {
			limit = { has_war_with = GER }
			GER = {
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = DON tag = UKR }
						}
						is_core_of = DON
						NOT = { is_core_of = GER }
					}
					DON = { transfer_state = PREV }
				}
				if = {
					limit = {
						has_country_flag = DON_partner
					}
					remove_ideas = DON_postavki_in
					remove_opinion_modifier = {
						target = DON
						modifier = DON_bread_trade
					}
					DON = {
						remove_ideas = DON_postavki_out
						remove_opinion_modifier = {
							target = GER
							modifier = DON_bread_trade
						}
					}
					DON = { remove_ideas = foreing_credit_for_DON }
					clr_country_flag = DON_partner
				}
				
				if = {
					limit = { UKR = { is_subject_of = GER } }
					end_puppet = UKR
					UKR = { remove_ideas = UKR_zerno_in }
					remove_ideas = UKR_zerno_out
					UKR = {
						every_country = {
							limit = { OR = { tag = ENG tag = USA is_in_faction_with = ENG is_in_faction_with = USA AND = { OR = { is_in_faction_with = FRA tag = FRA } NOT = { is_in_faction_with = GER } } } }
							white_peace = PREV
						}
						every_country = {
							limit = { OR = { tag = GEO tag = ARM tag = AZR tag = BAK } }
							white_peace = PREV
						}
						leave_faction = yes
						remove_ideas = help_from_foreign_interventionists
					}
				}
				if = {
					limit = { OR = { has_war_with = USR has_war_with = ODS } }
					white_peace = USR
					white_peace = ODS
				}
				
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = TUR tag = AZR tag = GEO tag = ARM tag = PER tag = PER tag = CHC tag = DAG tag = MRC }
						}
						is_core_of = TUR
						NOT = { is_core_of = GER }
					}
					TUR = { transfer_state = PREV }
				}
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = TUR tag = AZR tag = GEO tag = ARM tag = PER tag = PER tag = CHC tag = DAG tag = MRC }
						}
						is_core_of = AZR
						NOT = { is_core_of = GER }
					}
					AZR = { transfer_state = PREV }
				}
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = TUR tag = AZR tag = GEO tag = ARM tag = PER tag = PER tag = CHC tag = DAG tag = MRC }
						}
						is_core_of = GEO
						NOT = { is_core_of = GER }
					}
					GEO = { transfer_state = PREV }
				}
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = TUR tag = AZR tag = GEO tag = ARM tag = PER tag = PER tag = CHC tag = DAG tag = MRC }
						}
						is_core_of = ARM
						NOT = { is_core_of = GER }
					}
					ARM = { transfer_state = PREV }
				}
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = TUR tag = AZR tag = GEO tag = ARM tag = PER tag = PER tag = CHC tag = DAG tag = MRC }
						}
						is_core_of = PER
						NOT = { is_core_of = GER }
					}
					PER = { transfer_state = PREV }
				}
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = TUR tag = AZR tag = GEO tag = ARM tag = PER tag = PER tag = CHC tag = DAG tag = MRC }
						}
						is_core_of = CHC
						NOT = { is_core_of = GER }
					}
					CHC = { transfer_state = PREV }
				}
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = TUR tag = AZR tag = GEO tag = ARM tag = PER tag = PER tag = CHC tag = DAG tag = MRC }
						}
						is_core_of = DAG
						NOT = { is_core_of = GER }
					}
					DAG = { transfer_state = PREV }
				}
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = TUR tag = AZR tag = GEO tag = ARM tag = PER tag = PER tag = CHC tag = DAG tag = MRC }
						}
						region = 134
						NOT = { is_core_of = GER }
					}
					MRC = { transfer_state = PREV }
				}
				
				if = {
					limit = { any_state = { is_core_of = CRI OWNER = { OR = { tag = GER is_subject_of = GER } } } }
					CRI = { set_politics = { ruling_party = authoritarism } }
				}
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = CRI tag = UKR }
						}
						is_core_of = CRI
						NOT = { is_core_of = GER }
					}
					CRI = { transfer_state = PREV }
				}
				
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = TRK tag = BUK tag = KHI tag = SCH tag = SIB tag = KAZ }
						}
						is_core_of = TRK
						NOT = { is_core_of = GER }
					}
					TRK = { transfer_state = PREV }
				}
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = TRK tag = BUK tag = KHI tag = SCH tag = SIB tag = KAZ }
						}
						is_core_of = BUK
						NOT = { is_core_of = GER }
					}
					BUK = { transfer_state = PREV }
				}
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = TRK tag = BUK tag = KHI tag = SCH tag = SIB tag = KAZ }
						}
						is_core_of = KHI
						NOT = { is_core_of = GER }
					}
					KHI = { transfer_state = PREV }
				}
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = TRK tag = BUK tag = KHI tag = SCH tag = SIB tag = KAZ }
						}
						is_core_of = SCH
						NOT = { is_core_of = GER }
					}
					SCH = { transfer_state = PREV }
				}
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = TRK tag = BUK tag = KHI tag = SCH tag = SIB tag = KAZ }
						}
						is_core_of = SIB
						NOT = { is_core_of = GER }
					}
					SIB = { transfer_state = PREV }
				}
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = TRK tag = BUK tag = KHI tag = SCH tag = SIB tag = KAZ }
						}
						is_core_of = KAZ
						NOT = { is_core_of = GER }
					}
					KAZ = { transfer_state = PREV }
				}
				
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = TAN }
						}
						is_core_of = TAN
						NOT = { is_core_of = GER }
					}
					TAN = { transfer_state = PREV }
				}
				
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = BRY tag = BLK tag = AMR tag = PRM tag = ZKL }
						}
						is_core_of = BRY
						NOT = { is_core_of = GER }
					}
					BRY = { transfer_state = PREV }
				}
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = BRY tag = BLK tag = AMR tag = PRM tag = ZKL }
						}
						is_core_of = BLK
						NOT = { is_core_of = GER }
					}
					BLK = { transfer_state = PREV }
				}
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = BRY tag = BLK tag = AMR tag = PRM tag = ZKL }
						}
						is_core_of = AMR
						NOT = { is_core_of = GER }
					}
					AMR = { transfer_state = PREV }
				}
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = BRY tag = BLK tag = AMR tag = PRM tag = ZKL }
						}
						is_core_of = PRM
						NOT = { is_core_of = GER }
					}
					PRM = { transfer_state = PREV }
				}
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = BRY tag = BLK tag = AMR tag = PRM tag = ZKL }
						}
						is_core_of = ZKL
						NOT = { is_core_of = GER }
					}
					ZKL = { transfer_state = PREV }
				}
				
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = RVA tag = DON tag = MCW tag = RUS tag = UKR }
						}
						region = 135
						NOT = { is_core_of = GER }
					}
					if = {
						limit = { RVA = { exists = yes } }
						RVA = { transfer_state = PREV }
					}
					else_if = {
						limit = { DON = { exists = yes } }
						DON = { transfer_state = PREV }
					}
					else_if = {
						limit = { MCW = { exists = yes } }
						MCW = { transfer_state = PREV }
					}
					else = {
						RUS = { transfer_state = PREV }
					}
				}
				every_state = {
					limit = {
						is_owned_by = GER
						OR = {
							region = 147
							region = 148
							region = 149
							region = 14
							region = 155
							region = 212
						}
						NOT = { is_core_of = GER }
					}
					if = {
						limit = { SIB = { exists = yes } }
						SIB = { transfer_state = PREV }
					}
					else_if = {
						limit = { RSS = { exists = yes } }
						RSS = { transfer_state = PREV }
					}
					else_if = {
						limit = { CCA = { exists = yes } }
						CCA = { transfer_state = PREV }
					}
					else = {
						RUS = { transfer_state = PREV }
					}
				}
				every_state = {
					limit = {
						is_owned_by = GER
						region = 136
						NOT = { is_core_of = GER }
					}
					if = {
						limit = { TRK = { exists = yes } }
						TRK = { transfer_state = PREV }
					}
					else_if = {
						limit = { KAZ = { exists = yes } }
						KAZ = { transfer_state = PREV }
					}
					else_if = {
						limit = { CCA = { exists = yes } }
						CCA = { transfer_state = PREV }
					}
					else_if = {
						limit = { SIB = { exists = yes } }
						SIB = { transfer_state = PREV }
					}
					else_if = {
						limit = { RSS = { exists = yes } }
						RSS = { transfer_state = PREV }
					}
					else = {
						RUS = { transfer_state = PREV }
					}
				}
				every_state = {
					limit = {
						is_owned_by = GER
						OR = {
							region = 151
							region = 138
						}
						NOT = { is_core_of = GER }
					}
					if = {
						limit = { CCA = { exists = yes } }
						CCA = { transfer_state = PREV }
					}
					else_if = {
						limit = { SIB = { exists = yes } }
						SIB = { transfer_state = PREV }
					}
					else_if = {
						limit = { RSS = { exists = yes } }
						RSS = { transfer_state = PREV }
					}
					else = {
						RUS = { transfer_state = PREV }
					}
				}
				
				
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = LIT tag = LAT tag = BLR tag = POL tag = UKR tag = UBD }
						}
						OR = {
							state = 784
							state = 998
							state = 95
							state = 956
							state = 1024
							state = 97
							state = 910
							state = 846
							state = 847
							state = 11
							state = 189
							state = 999
							is_core_of = LIT
						}
						NOT = { is_core_of = GER }
					}
					LIT = { transfer_state = PREV }
				}
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = LIT tag = LAT tag = EST tag = BLR tag = POL tag = UKR tag = UBD }
						}
						is_core_of = LAT
						NOT = { state = 865 }
						NOT = { is_core_of = GER }
					}
					LAT = { transfer_state = PREV }
				}
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = LIT tag = LAT tag = EST tag = BLR tag = POL tag = UKR tag = UBD }
						}
						is_core_of = EST
						NOT = { state = 1004 }
						NOT = { is_core_of = GER }
					}
					EST = { transfer_state = PREV }
				}
				if = {
					limit = { owns_state = 865 OR = { country_exists = UBD country_exists = LAT } }
					1001 = { OWNER = { transfer_state = 865 } }
				}
				if = {
					limit = { owns_state = 1004 OR = { country_exists = UBD country_exists = EST } }
					191 = { OWNER = { transfer_state = 1004 } }
				}
				
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
								tag = AUH
								is_subject_of = AUH
							}
							NOT = { tag = LIT tag = LAT tag = EST tag = BLR tag = POL tag = UKR tag = UBD }
						}
						OR = {
							region = 38
							state = 92
							state = 904
							state = 1165
						}
						is_core_of = POL
						NOT = { is_core_of = GER }
						NOT = { is_core_of = AUH }
					}
					POL = { transfer_state = PREV }
				}
				
				every_state = {
					limit = {
						OR = {
							AND = {
								region = 39
								OR = {
									is_core_of = UKR
									is_claimed_by = UKR
								}
							}
							region = 130
						}
						is_owned_by = GER
					}
					UKR = { transfer_state = PREV }
				}
				every_state = {
					limit = {
						OWNER = {
							OR = {
								tag = GER
								is_subject_of = GER
							}
							NOT = { tag = LIT tag = LAT tag = EST tag = BLR tag = POL tag = UKR tag = UBD }
						}
						is_core_of = BLR
						NOT = { is_core_of = GER }
					}
					BLR = { transfer_state = PREV }
				}
				
				if = {
					limit = {
						OR = {
							owns_state = 195
							owns_state = 219
						}
					}
					every_state = {
						limit = {
							is_owned_by = GER
							NOT = { is_core_of = GER }
							is_core_of = RUS
							NOT = { region = 130 region = 134 region = 135 }
						}
						if = {
							limit = { NOT = { is_owned_by = GER } }
							GER = { transfer_state = PREV }
						}
						add_core_of = MCW
						MCW = { transfer_state = PREV }
					}
				}
				if = {
					limit = { 651 = { CONTROLLER = { OR = { tag = GER is_subject_of = GER } } } }
					BSH = {
						if = {
							limit = { OR = { exists = no is_subject_of = GER } }
							set_country_flag = WWI_post_german_russia_collaborators_new_country_BSH_TAR_CHV
						}
						if = {
							limit = { OR = { exists = no has_army_manpower = { size < 1000 } } }
							set_country_flag = WWI_post_german_russia_collaborators_has_no_army
						}
					}
					every_state = {
						limit = {
							CONTROLLER = {
								OR = {
									tag = GER
									is_subject_of = GER
								}
							}
							OWNER = { NOT = { is_subject_of = GER } }
							is_controlled_by = GER
							is_core_of = BSH
							NOT = { is_core_of = GER }
						}
						BSH = { transfer_state = PREV }
					}
				}
				if = {
					limit = { 249 = { CONTROLLER = { OR = { tag = GER is_subject_of = GER } } } }
					TAR = {
						if = {
							limit = { OR = { exists = no is_subject_of = GER } }
							set_country_flag = WWI_post_german_russia_collaborators_new_country_BSH_TAR_CHV
						}
						if = {
							limit = { OR = { exists = no has_army_manpower = { size < 1000 } } }
							set_country_flag = WWI_post_german_russia_collaborators_has_no_army
						}
					}
					every_state = {
						limit = {
							CONTROLLER = {
								OR = {
									tag = GER
									is_subject_of = GER
								}
							}
							OWNER = { NOT = { is_subject_of = GER } }
							is_controlled_by = GER
							is_core_of = TAR
							NOT = { is_core_of = GER }
						}
						TAR = { transfer_state = PREV }
					}
				}
				if = {
					limit = { 256 = { CONTROLLER = { OR = { tag = GER is_subject_of = GER } } } }
					CHV = {
						if = {
							limit = { OR = { exists = no is_subject_of = GER } }
							set_country_flag = WWI_post_german_russia_collaborators_new_country_BSH_TAR_CHV
						}
						if = {
							limit = { OR = { exists = no has_army_manpower = { size < 1000 } } }
							set_country_flag = WWI_post_german_russia_collaborators_has_no_army
						}
					}
					every_state = {
						limit = {
							CONTROLLER = {
								OR = {
									tag = GER
									is_subject_of = GER
								}
							}
							OWNER = { NOT = { is_subject_of = GER } }
							is_controlled_by = GER
							is_core_of = CHV
							NOT = { is_core_of = GER }
						}
						CHV = { transfer_state = PREV }
					}
				}
				if = {
					limit = {
						NOT = {
							any_state = {
								region = 213
								CONTROLLER = { NOT = { tag = GER is_subject_of = GER } }
							}
						}
					}
					CRI = {
						if = {
							limit = { OR = { exists = no is_subject_of = GER } }
							set_country_flag = WWI_post_german_russia_collaborators_new_country_CRI
						}
						if = {
							limit = { OR = { exists = no has_army_manpower = { size < 1000 } } }
							set_country_flag = WWI_post_german_russia_collaborators_has_no_army
						}
					}
					every_state = {
						limit = {
							CONTROLLER = {
								OR = {
									tag = GER
									is_subject_of = GER
								}
							}
							OWNER = { NOT = { is_subject_of = GER } }
							is_controlled_by = GER
							is_core_of = CRI
							NOT = { is_core_of = GER }
						}
						CRI = { transfer_state = PREV }
					}
				}
				
				if = {
					limit = { 218 = { CONTROLLER = { OR = { tag = GER is_subject_of = GER } } } 1044 = { CONTROLLER = { OR = { tag = GER is_subject_of = GER } } } }
					DON = {
						if = {
							limit = { OR = { exists = no is_subject_of = GER } }
							set_country_flag = WWI_post_german_russia_collaborators_new_country_DON
						}
						if = {
							limit = { OR = { exists = no has_army_manpower = { size < 1000 } } }
							set_country_flag = WWI_post_german_russia_collaborators_has_no_army
						}
					}
					every_state = {
						limit = {
							CONTROLLER = {
								OR = {
									tag = GER
									is_subject_of = GER
								}
							}
							OWNER = { NOT = { is_subject_of = GER } }
							is_controlled_by = GER
							is_core_of = DON
							NOT = { is_core_of = GER }
						}
						DON = { transfer_state = PREV }
					}
				}
				
				if = {
					limit = { 13 = { CONTROLLER = { OR = { tag = GER is_subject_of = GER } } } 920 = { CONTROLLER = { OR = { tag = GER is_subject_of = GER } } } 191 = { CONTROLLER = { OR = { tag = GER is_subject_of = GER } } } }
					EST = {
						if = {
							limit = { OR = { exists = no is_subject_of = GER } }
							set_country_flag = WWI_post_german_russia_collaborators_new_country_EST_LAT_LIT
						}
						if = {
							limit = { OR = { exists = no has_army_manpower = { size < 1000 } } }
							set_country_flag = WWI_post_german_russia_collaborators_has_no_army
						}
					}
					every_state = {
						limit = {
							CONTROLLER = {
								OR = {
									tag = GER
									is_subject_of = GER
								}
							}
							OWNER = { NOT = { is_subject_of = GER } }
							is_core_of = EST
							NOT = { is_core_of = GER }
						}
						EST = { transfer_state = PREV }
					}
				}
				if = {
					limit = { 12 = { CONTROLLER = { OR = { tag = GER is_subject_of = GER } } } 1001 = { CONTROLLER = { OR = { tag = GER is_subject_of = GER } } } 865 = { CONTROLLER = { OR = { tag = GER is_subject_of = GER } } } }
					LAT = {
						if = {
							limit = { OR = { exists = no is_subject_of = GER } }
							set_country_flag = WWI_post_german_russia_collaborators_new_country_EST_LAT_LIT
						}
						if = {
							limit = { OR = { exists = no has_army_manpower = { size < 1000 } } }
							set_country_flag = WWI_post_german_russia_collaborators_has_no_army
						}
					}
					every_state = {
						limit = {
							CONTROLLER = {
								OR = {
									tag = GER
									is_subject_of = GER
								}
							}
							OWNER = { NOT = { is_subject_of = GER } }
							is_core_of = LAT
							NOT = { is_core_of = GER }
						}
						LAT = { transfer_state = PREV }
					}
				}
				if = {
					limit = { 784 = { CONTROLLER = { OR = { tag = GER is_subject_of = GER } } } 11 = { CONTROLLER = { OR = { tag = GER is_subject_of = GER } } } 189 = { CONTROLLER = { OR = { tag = GER is_subject_of = GER } } } }
					LIT = {
						if = {
							limit = { OR = { exists = no is_subject_of = GER } }
							set_country_flag = WWI_post_german_russia_collaborators_new_country_EST_LAT_LIT
						}
						if = {
							limit = { OR = { exists = no has_army_manpower = { size < 1000 } } }
							set_country_flag = WWI_post_german_russia_collaborators_has_no_army
						}
					}
					every_state = {
						limit = {
							CONTROLLER = {
								OR = {
									tag = GER
									is_subject_of = GER
								}
							}
							OWNER = { NOT = { is_subject_of = GER } }
							OR = {
								is_core_of = LIT
								state = 998
								state = 95
								state = 1024
								state = 910
								state = 956
								state = 97
							}
							NOT = { is_core_of = GER }
						}
						LIT = { transfer_state = PREV }
					}
				}
				if = {
					limit = { 10 = { CONTROLLER = { OR = { tag = GER is_subject_of = GER is_in_faction_with = GER } } } 87 = { CONTROLLER = { OR = { tag = GER is_subject_of = GER is_in_faction_with = GER } } } 90 = { CONTROLLER = { OR = { tag = GER is_subject_of = GER is_in_faction_with = GER } } } }
					POL = {
						if = {
							limit = { OR = { exists = no has_army_manpower = { size < 1000 } } }
							set_country_flag = WWI_post_german_russia_collaborators_has_no_army
						}
					}
					every_state = {
						limit = {
							OR = {
								region = 38
								state = 92
								state = 904
								state = 1165
							}
							CONTROLLER = {
								OR = {
									tag = GER
									is_subject_of = GER
								}
							}
							OWNER = { NOT = { is_subject_of = GER } }
							is_core_of = POL
							NOT = { is_core_of = GER }
						}
						POL = { transfer_state = PREV }
					}
					every_state = {
						limit = {
							OR = {
								region = 38
								state = 92
								state = 904
								state = 1165
							}
							CONTROLLER = {
								OR = {
									tag = AUH
									is_subject_of = AUH
								}
							}
							OWNER = { NOT = { is_subject_of = AUH } }
							is_core_of = POL
							NOT = { is_core_of = AUH }
						}
						POL = { transfer_state = PREV }
					}
					else = {
						hidden_effect = { RUS = { annex_country = { target = POL transfer_troops = no } } }
					}
				}
				
				every_country = {
					limit = { has_country_flag = WWI_post_german_russia_collaborators_has_no_army }
					if = {
						limit = { tag = BSH }
						load_oob = BSH_1918_CCA_autonomy
					}
					if = {
						limit = { tag = TAR }
						load_oob = TAR_1918_CCA_autonomy
					}
					if = {
						limit = { tag = CHV }
						load_oob = CHV_1918_CCA_autonomy
					}
					if = {
						limit = { tag = CRI }
						load_oob = CRI_1918
					}
					if = {
						limit = { tag = DON }
						load_oob = DON_Cossack_mob
					}
					if = {
						limit = { tag = EST }
						country_event = rcw_bfk.3
						country_event = rcw_bfk.4
					}
					if = {
						limit = { tag = LAT }
						country_event = rcw_bfk.11
					}
					if = {
						limit = { tag = LIT }
						country_event = rcw_bfk.163
						country_event = rcw_bfk.164
						country_event = rcw_bfk.168
					}
					if = {
						limit = { tag = POL }
						country_event = { id = poland.1 hours = 2 }
					}
					clr_country_flag = WWI_post_german_russia_collaborators_has_no_army
				}
				
				if = {
					limit = { any_country = { has_country_flag = WWI_post_german_russia_collaborators_new_country_BSH_TAR_CHV } }
					RUS = { country_event = { id = rcw_britishseas.1 days = 1 } }
				}
				if = {
					limit = { any_country = { has_country_flag = WWI_post_german_russia_collaborators_new_country_CRI } }
					RUS = { country_event = { id = rcw_britishseas.2 days = 1 } }
				}
				if = {
					limit = { any_country = { has_country_flag = WWI_post_german_russia_collaborators_new_country_DON } }
					RUS = { country_event = { id = rcw_britishseas.3 days = 1 } }
				}
				if = {
					limit = { any_country = { has_country_flag = WWI_post_german_russia_collaborators_new_country_EST_LAT_LIT } }
					RUS = { country_event = { id = rcw_britishseas.4 days = 1 } }
				}
				if = {
					limit = { country_exists = POL any_country = { has_country_flag = WWI_post_german_russia_collaborators_new_country_EST_LAT_LIT } }
					RUS = { set_country_flag = WWI_post_german_russia_collaborators_new_country_POL }
				}
				if = {
					limit = { country_exists = POL NOT = { any_country = { has_country_flag = WWI_post_german_russia_collaborators_new_country_EST_LAT_LIT } } }
					RUS = { country_event = { id = rcw_britishseas.5 days = 1 } }
				}
			}
		}
		every_country = {
			limit = { OR = { tag = GER tag = AUH tag = SNS tag = TRG tag = TUR is_in_faction_with = GER is_in_faction_with = AUH is_in_faction_with = SNS is_in_faction_with = TRG is_in_faction_with = TUR AND = { is_in_faction_with = BUL NOT = { is_in_faction_with = ENG } } } }
			white_peace = RUS
			white_peace = FIN
			white_peace = SLT
			white_peace = UKR
			white_peace = USR
			white_peace = ODS
		}
		if = {
			limit = { has_country_flag = RUS_occupated_PER_WWI }
			every_state = {
				limit = { is_owned_by = RUS is_core_of = PER NOT = { is_core_of = RUS } }
				PER = { transfer_state = PREV }
			}
			clr_country_flag = RUS_occupated_PER_WWI
		}
	}
}