###########################
# Russian Civil War Events
###########################

add_namespace = rcw_crimea

country_event = {
	id = rcw_crimea.1
	title = rcw_crimea.1.t
	desc = rcw_crimea.1.desc
	
	trigger = {
		has_start_date < 1917.11.7
		tag = RUS
		NOT = { has_global_flag = RUS_civil_war_over }
		CRI = { exists = no }
		has_country_flag = RUS_Oktober_revolution_fired
		owns_state = 137
		OR = {
			has_idea = RUS_weak_state_suppression_apparatus
			has_idea = RUS_weak_state_suppression_apparatus_1
		}
	}
	
	fire_only_once = yes
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = rcw_crimea.1.a
		if = {
			limit = { any_controlled_state = { region = 213 } }
			CRI = {
				every_state = {
					limit = { region = 213 }
					PREV = { transfer_state = PREV }
				}
				set_capital = 1074
				add_ideas = neutral_foreign_policy_law
				remove_all_foreing_locked_templates_from_liberated_country = yes
				load_oob = CRI_1918
				country_event = { id = rcw_crimea.2 hours = 1 }
			}
			else = {
				CRI = {
					every_state = {
						limit = { region = 213 }
						PREV = { set_state_owner = PREV }
					}
					every_state = {
						limit = { region = 213 is_controlled_by = RUS }
						CRI = { set_state_controller = PREV }
					}
					add_ideas = {
						soviet_republic_gov_form
						federal_gov_terr
						local_assembly_decisions_b_law
						two_party_system_law
						neutral_foreign_policy_law
					}
					remove_all_foreing_locked_templates_from_liberated_country = yes
					every_country = {
						limit = {
							has_war_with = RUS
							any_controlled_state = { region = 213 }
						}
						declare_war_on = {
							target = CRI
							type = annex_everything
						}
					}
					load_oob = CRI_1918
				}
			}
		}
	}
	option = {
		trigger = { is_ai = no }
		name = rcw_crimea.1.b
		if = {
			limit = { any_controlled_state = { region = 213 } }
			CRI = {
				every_state = {
					limit = { region = 213 }
					PREV = { transfer_state = PREV }
				}
				set_capital = 1074
				add_ideas = neutral_foreign_policy_law
				remove_all_foreing_locked_templates_from_liberated_country = yes
				load_oob = CRI_1918
				country_event = { id = rcw_crimea.2 hours = 1 }
			}
			else = {
				CRI = {
					every_state = {
						limit = { region = 213 }
						PREV = { set_state_owner = PREV }
					}
					every_state = {
						limit = { region = 213 is_controlled_by = RUS }
						CRI = { set_state_controller = PREV }
					}
					add_ideas = {
						soviet_republic_gov_form
						federal_gov_terr
						local_assembly_decisions_b_law
						two_party_system_law
						neutral_foreign_policy_law
					}
					remove_all_foreing_locked_templates_from_liberated_country = yes
					every_country = {
						limit = {
							has_war_with = RUS
							any_controlled_state = { region = 213 }
						}
						declare_war_on = {
							target = CRI
							type = annex_everything
						}
					}
					load_oob = CRI_1918
				}
			}
		}
		CRI = { change_tag_from = ROOT }
	}
}
country_event = {
	id = rcw_crimea.2
	title = rcw_crimea.2.t
	desc = rcw_crimea.2.desc
	
	is_triggered_only = yes
	
	option = {
		name = rcw_crimea.2.a
		start_civil_war = {
			ideology = communism
			size = 0.75
			states = {
				1073
			}
		}
		random_country = {
			limit = { original_tag = CRI has_government = communism }
			add_ideas = {
				soviet_republic_gov_form
				federal_gov_terr
				local_assembly_decisions_b_law
				two_party_system_law
				neutral_foreign_policy_law
			}
			if = {
				limit = { any_other_country = { original_tag = CRI has_cosmetic_tag = CRI_Tavrida } }
				set_cosmetic_tag = CRI_Tavrida
			}
		}
		random_country = {
			limit = { original_tag = CRI NOT = { has_government = communism } }
			add_ideas = {
				parliamentary_republic_gov_form
				unitary_gov_terr
				constitution_b_law
				poliparty_system_law
				neutral_foreign_policy_law
			}
			if = {
				limit = { any_other_country = { original_tag = CRI has_cosmetic_tag = CRI_Tavrida } }
				drop_cosmetic_tag = yes
			}
		}
	}
	option = {
		trigger = { is_ai = no }
		name = rcw_crimea.2.b
		set_capital = 1073
		start_civil_war = {
			ideology = communism
			size = 0.75
			states = {
				1073
			}
		}
		random_country = {
			limit = { original_tag = CRI has_government = communism }
			add_ideas = {
				soviet_republic_gov_form
				federal_gov_terr
				local_assembly_decisions_b_law
				two_party_system_law
				neutral_foreign_policy_law
			}
			if = {
				limit = { any_other_country = { original_tag = CRI has_cosmetic_tag = CRI_Tavrida } }
				set_cosmetic_tag = CRI_Tavrida
			}
		}
		random_country = {
			limit = { original_tag = CRI NOT = { has_government = communism } }
			add_ideas = {
				parliamentary_republic_gov_form
				unitary_gov_terr
				constitution_b_law
				poliparty_system_law
				neutral_foreign_policy_law
			}
			if = {
				limit = { any_other_country = { original_tag = CRI has_cosmetic_tag = CRI_Tavrida } }
				drop_cosmetic_tag = yes
			}
		}
		random_country = {
			limit = { original_tag = CRI has_government = communism }
			change_tag_from = ROOT
		}
	}
}